<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SPI Engine Instruction Set Specification &#8212; HDL  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.min.css?v=8dde5eb3" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=e974aa45" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script defer="" src="../../_static/app.umd.js?v=37ac5827"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SPI Engine Pipeline Delays" href="pipeline-delays.html" />
    <link rel="prev" title="SPI Bus Interface" href="spi-bus-interface.html" />
   
  
    <meta name="robots" content="noindex">
  

  </head><body>
  <input type="checkbox" id="input-showsidebar">
  <input type="checkbox" id="input-showonthispage">
  <header>
    <div class="header">
      <div id="left">
        <label id="show-sidebar" for="input-showsidebar" title="Show/hide index"></label>
      </div>
      <div id="right">
        <a id="logo" href="../../index.html"></a>
        <span>
          <label id="show-onthispage" for="input-showonthispage" title="Show/hide contents"></label>
        </span>
      </div>
    </div>
    <div class="subdomain-tree">
      <root>
  <a href="../../../documentation/index.html">System Level</a>
  <a href="../../index.html" class="current">HDL</a>
  <a href="../../../no-os/index.html">no-OS</a>
  <a href="../../../pyadi-iio/index.html">pyadi-iio</a>
</root>

    </div>
  </header>

    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="onthispage">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">SPI Engine Instruction Set Specification</a><ul>
<li><a class="reference internal" href="#instructions">Instructions</a><ul>
<li><a class="reference internal" href="#transfer-instruction">Transfer Instruction</a></li>
<li><a class="reference internal" href="#chip-select-instruction">Chip-select Instruction</a></li>
<li><a class="reference internal" href="#configuration-write-instruction">Configuration Write Instruction</a></li>
<li><a class="reference internal" href="#synchronize-instruction">Synchronize Instruction</a></li>
<li><a class="reference internal" href="#sleep-instruction">Sleep Instruction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-registers">Configuration Registers</a><ul>
<li><a class="reference internal" href="#spi-configuration-register">SPI Configuration Register</a></li>
<li><a class="reference internal" href="#prescaler-configuration-register">Prescaler Configuration Register</a></li>
<li><a class="reference internal" href="#dynamic-transfer-length-register">Dynamic Transfer Length Register</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="subdomain-tree">
  <root>
  <a href="../../../documentation/index.html">System Level</a>
  <a href="../../index.html" class="current">HDL</a>
  <a href="../../../no-os/index.html">no-OS</a>
  <a href="../../../pyadi-iio/index.html">pyadi-iio</a>
</root>

</div>
<div class="sidebar-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../../user_guide/index.html">User Guide</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/git_repository.html">Git repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/releases.html">Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/build_hdl.html">Build an HDL project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/architecture.html">HDL architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/ip_cores.html">IP cores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/porting_project.html">Porting reference designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/customize_hdl.html">Customize HDL projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/hdl_coding_guideline.html">HDL coding guideline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/docs_guidelines.html">Documentation guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/third_party.html">Third party forks</a></li>
</ul>
</li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">Libraries</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../axi_dmac/index.html">High-Speed DMA Controller</a></li>
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1" checked=""/><div class="collapse"><a class="reference internal" href="index.html">SPI Engine</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="spi_engine_execution.html">Execution Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="axi_spi_engine.html">AXI Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_engine_offload.html">Offload Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi_engine_interconnect.html">Interconnect Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="control-interface.html">Control Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="offload-control-interface.html">Offload Control Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi-bus-interface.html">SPI Bus Interface</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Instruction Set Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline-delays.html">Pipeline Delays</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial.html">Tutorial - PulSAR ADC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../projects/index.html">Projects</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad4134_fmc/index.html">AD4134-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad4630_fmc/index.html">AD4630-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad469x_fmc/index.html">AD469X-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad5766_sdz/index.html">AD5766-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7134_fmc/index.html">AD7134-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad719x_asdz/index.html">AD719X-ASDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad738x_fmc/index.html">AD738X-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7616_sdz/index.html">AD7616-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9081_fmca_ebz/index.html">AD9081-FMCA-EBZ/AD9082-FMCA-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9434_fmc/index.html">AD9434-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9783_ebz/index.html">AD9783-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adaq7980_sdz/index.html">ADAQ7980-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0363/index.html">CN0363</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0540/index.html">CN0540</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0561/index.html">CN0561</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/pulsar_adc/index.html">PULSAR-ADC</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="spi-engine-instruction-set-specification">
<span id="spi-engine-instruction-format"></span><h1>SPI Engine Instruction Set Specification<a class="headerlink" href="#spi-engine-instruction-set-specification" title="Permalink to this heading">#</a></h1>
<p>The SPI Engine instruction set is a simple 16-bit instruction set of which
12-bit is currently allocated (bits 15,14,11,10 are always 0).</p>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this heading">#</a></h2>
<section id="transfer-instruction">
<h3>Transfer Instruction<a class="headerlink" href="#transfer-instruction" title="Permalink to this heading">#</a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>r</p></td>
<td><p>w</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
</tr>
</tbody>
</table>
</div>
<p>The transfer instructions perform a low-level SPI transfer. It will generate
SCLK transitions for the specified amount of cycles according to the SPI
configuration register. If the r bit is set the SDI pin will be sampled and
stored in the shift register at the end of each word the data is output on the
SDI_DATA stream. If the w bit is set the SDO pin will be updated with the data
received from the SDO_DATA stream. If the w bit is set the sdo_t signal will
also be set to 0 for the duration of the transfer. If the SDI_DATA stream is not
able to accept data or the SDO_DATA stream is not able to provide data the
execution is stalled at the end/start of the transfer until data is
accepted/becomes available.</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 15.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>r</p></td>
<td><p>Read</p></td>
<td><p>If set to 1 data will be read from the SDI pin during and the read words
will be available on the SDI_DATA interface.</p></td>
</tr>
<tr class="row-odd"><td><p>w</p></td>
<td><p>Write</p></td>
<td><p>If set to 1 data will be taken from the SDO_DATA interface and output on
the SDO pin.</p></td>
</tr>
<tr class="row-even"><td><p>n</p></td>
<td><p>Length</p></td>
<td><p>n + 1 number of words that will be transferred.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="chip-select-instruction">
<h3>Chip-select Instruction<a class="headerlink" href="#chip-select-instruction" title="Permalink to this heading">#</a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
<td><p>s</p></td>
<td><p>s</p></td>
<td><p>s</p></td>
<td><p>s</p></td>
<td><p>s</p></td>
<td><p>s</p></td>
<td><p>s</p></td>
<td><p>s</p></td>
</tr>
</tbody>
</table>
</div>
<p>The chip-select instruction updates the value chip-select output signal of the
SPI Engine execution module.</p>
<p>Before and after the update is performed the execution module is paused for the
specified delay. The length of the delay depends on the module clock frequency,
the setting of the prescaler register and the parameter <span class="math notranslate nohighlight">\(t\)</span> of the
instruction. This delay is inserted before and after the update of the
chip-select signal, so the total execution time of the chip-select instruction
is twice the delay, with an added fixed 2 clock cycles (fast clock, not
prescaled) before for the internal logic.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}delay_{before} = 2+ t * \frac{(div + 1)*2}{f_{clk}}\\delay_{after}  = t * \frac{(div + 1)*2}{f_{clk}}\end{aligned}\end{align} \]</div>
</div>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 15.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>t</p></td>
<td><p>Delay</p></td>
<td><p>Delay before and after setting the new configuration.</p></td>
</tr>
<tr class="row-odd"><td><p>s</p></td>
<td><p>Chip-select</p></td>
<td><p>The new chip-select configuration.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="configuration-write-instruction">
<h3>Configuration Write Instruction<a class="headerlink" href="#configuration-write-instruction" title="Permalink to this heading">#</a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>r</p></td>
<td><p>r</p></td>
<td><p>v</p></td>
<td><p>v</p></td>
<td><p>v</p></td>
<td><p>v</p></td>
<td><p>v</p></td>
<td><p>v</p></td>
<td><p>v</p></td>
<td><p>v</p></td>
</tr>
</tbody>
</table>
</div>
<p>The configuration writes instruction updates a
<a class="reference internal" href="#spi-engine-configutarion-registers"><span class="std std-ref">Configuration Registers</span></a>
of the SPI Engine execution module with a new value.</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 15.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>r</p></td>
<td><p>Register</p></td>
<td><p>Configuration register address.
2’b00 = <a class="reference internal" href="#spi-engine-prescaler-configuration-register"><span class="std std-ref">Prescaler Configuration Register</span></a>
2’b01 = <a class="reference internal" href="#spi-engine-spi-configuration-register"><span class="std std-ref">SPI Configuration Register</span></a>
2’b10 = <a class="reference internal" href="#spi-engine-dynamic-transfer-length-register"><span class="std std-ref">Dynamic Transfer Length Register</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>v</p></td>
<td><p>Value</p></td>
<td><p>New value for the configuration register.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="synchronize-instruction">
<h3>Synchronize Instruction<a class="headerlink" href="#synchronize-instruction" title="Permalink to this heading">#</a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
<td><p>n</p></td>
</tr>
</tbody>
</table>
</div>
<p>The synchronize instruction generates a synchronization event on the SYNC output
stream. This can be used to monitor the progress of the command stream. The
synchronize instruction is also used by the <a class="reference internal" href="spi_engine_interconnect.html#spi-engine-interconnect"><span class="std std-ref">SPI Engine Interconnect Module</span></a>
module to identify the end of a transaction and re-start the arbitration
process.</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 15.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>n</p></td>
<td><p>id</p></td>
<td><p>Value of the generated synchronization event.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="sleep-instruction">
<h3>Sleep Instruction<a class="headerlink" href="#sleep-instruction" title="Permalink to this heading">#</a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>15</p></th>
<th class="head"><p>14</p></th>
<th class="head"><p>13</p></th>
<th class="head"><p>12</p></th>
<th class="head"><p>11</p></th>
<th class="head"><p>10</p></th>
<th class="head"><p>9</p></th>
<th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
<td><p>t</p></td>
</tr>
</tbody>
</table>
</div>
<p>The sleep instruction stops the execution of the command stream for the
specified amount of time. The time is based on the external clock frequency the
configuration value of the prescaler register and the time parameter of the
instruction. A fixed delay of two clock cycles (fast, not affected by the prescaler)
is the minimum, needed by the internal logic.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[sleep\_time = \frac{2+(t) * ((div + 1) * 2)}{f_{clk}}\]</div>
</div>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 15.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>t</p></td>
<td><p>Time</p></td>
<td><p>The amount of time to wait.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="configuration-registers">
<span id="spi-engine-configutarion-registers"></span><h2>Configuration Registers<a class="headerlink" href="#configuration-registers" title="Permalink to this heading">#</a></h2>
<p>The SPI Engine execution module has a set of 8-bit configuration registers which
can be used to dynamically modify the behavior of the module at runtime.</p>
<section id="spi-configuration-register">
<span id="spi-engine-spi-configuration-register"></span><h3>SPI Configuration Register<a class="headerlink" href="#spi-configuration-register" title="Permalink to this heading">#</a></h3>
<p>The SPI configuration register configures various aspects of the low-level SPI
bus behavior.</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 15.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[7:3]</p></td>
<td><p>reserved</p></td>
<td><p>Must always be 0.</p></td>
</tr>
<tr class="row-odd"><td><p>[2]</p></td>
<td><p>three_wire</p></td>
<td><p>Configures the output of the three_wire pin.</p></td>
</tr>
<tr class="row-even"><td><p>[1]</p></td>
<td><p>CPOL</p></td>
<td><p>Configures the polarity of the SCLK signal. When 0, the idle state of
the SCLK signal is low. When 1, the idle state of the SCLK signal is
high.</p></td>
</tr>
<tr class="row-odd"><td><p>[0]</p></td>
<td><p>CPHA</p></td>
<td><p>Configures the phase of the SCLK signal. When 0, data is sampled on the
leading edge and updated on the trailing edge. When 1, data is
sampled on the trailing edge and updated on the leading edge.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="prescaler-configuration-register">
<span id="spi-engine-prescaler-configuration-register"></span><h3>Prescaler Configuration Register<a class="headerlink" href="#prescaler-configuration-register" title="Permalink to this heading">#</a></h3>
<p>The prescaler configuration register configures the divider that is applied to
the module clock when generating the SCLK signal and other internal control
signals used by the sleep and chip-select commands.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[7:0]</p></td>
<td><p>div</p></td>
<td><p>Prescaler clock divider</p></td>
</tr>
</tbody>
</table>
</div>
<p>The frequency of the SCLK signal is derived from the module clock frequency
using the following formula:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[f_{sclk} = \frac{f_{clk}}{((div + 1) * 2)}\]</div>
</div>
<p>If no prescaler block is present div is 0.</p>
</section>
<section id="dynamic-transfer-length-register">
<span id="spi-engine-dynamic-transfer-length-register"></span><h3>Dynamic Transfer Length Register<a class="headerlink" href="#dynamic-transfer-length-register" title="Permalink to this heading">#</a></h3>
<p>The dynamic transfer length register sets the length (in bits) of a transfer. By
default, the transfer length is equal to the DATA_WIDTH of the execution module.
If required the user can reduce this length by setting this register. A general
rule of thumb is to set the DATA_WIDTH parameter to the largest transfer length
supported by the target device.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[7:0]</p></td>
<td><p>div</p></td>
<td><p>Dynamic transfer length</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

          </div>
              <div class="related">
                &nbsp;
    <a href="spi-bus-interface.html" title="Previous document" class="prev">SPI Bus Interface</a>
    <a href="pipeline-delays.html" title="Next document" class="next">SPI Engine Pipeline Delays</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-showsidebar" for="input-showsidebar"></label>
  <label id="cancel-area-showonthispage" for="input-showonthispage"></label>

  
  <form action="" method="get" class="search-area">
    <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
    <button value="search"></button>
    <span id="search-progress"></span>
  </form>
  
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>