{"version":3,"file":"app.umd.js","sources":["../scripts/state.js","../scripts/toolbox.js","../scripts/dom.js","../scripts/fetch.js","../scripts/navigation.js","../scripts/app.js"],"sourcesContent":["\"use strict\";\n\n/**\n * version: v0.0.1, main, staging/new_feature\n * path: \"v0.0.1\", \"\", \"prs/staging/new_feature\"\n * metadata: fetched by fetch.js\n */\nconst state = {\n  repository: undefined,\n  version: undefined,\n  offline: undefined,\n  theme: undefined,\n  content_root: undefined,\n  sub_hosted: undefined,\n  path: undefined,\n  reloaded: undefined,\n  metadata: undefined\n}\n\nexport class State {\n  constructor (app) {\n    this.init_state(state)\n\n    this.parent = app\n    app.state = state\n  }\n  /**\n   * Get repository name, e.g.\n   * doctools, hdl, pyadi-iio\n   */\n  repository () {\n    let dom = document.querySelector('meta[name=\"repository\"]')\n    return dom ? dom.content : ''\n  }\n  /**\n   * Get version of doc, e.g.\n   * main, v0.2.2, staging/new_feature\n   */\n  version () {\n    let dom = document.querySelector('meta[name=\"version\"]')\n    if (dom !== null) {\n      let tag_ = dom.content\n      return tag_\n    }\n  }\n  /**\n   * Get relative path to the root.\n   * Dual fallback to support multiple Sphinx versions.\n   */\n  content_root () {\n    let content_root\n    let dom = document.querySelector('script#documentation_options')\n    if (dom !== null)\n      content_root = dom.dataset['url_root'];\n    if (content_root == undefined)\n      content_root = document.querySelector('html').dataset['content_root']\n    if (content_root == undefined) {\n      dom =  document.querySelector('.repotoc-tree .current')\n      if (dom !== null)\n        content_root = dom.getAttribute('href').replace('index.html', '')\n    }\n    if (content_root == undefined) {\n      console.warn(\"Failed to get content root.\")\n      content_root = ''\n    }\n    return content_root\n  }\n  /**\n   * Checks if doc is in a path beyond the server root,\n   * e.g.\n   * true: doctools, doctools/v0.2.2\n   * false: / , /v0.2.2\n   */\n  sub_hosted (content_root, repository) {\n    let url = new URL(content_root, location).href,\n        org = new URL(repository, location.origin).href\n    return url.startsWith(org)\n  }\n  /**\n   * Extract path of versioned version, without repository name\n   * /doctools -> \"\"\n   * / -> \"\"\n   * /doctools/v1.1.1 -> \"v1.1.1\"\n   * /v1.1.1 -> \"v1.1.1\"\n   */\n  path (content_root, repository, sub_hosted) {\n    if (!sub_hosted)\n      repository = \"\"\n\n    let url = new URL(content_root, location).href,\n        org = new URL(repository, location.origin).href\n    if (!url.startsWith(org))\n      return \"\"\n    else\n      return url.replace(org, \"\").replace(/^\\/|\\/$/g, \"\")\n  }\n  /**\n   * Detects if the page was reloaded by the user.\n   * This information is to use to force reload of cached content.\n   */\n  reloaded () {\n    if (!window.performance)\n      return false\n\n    return performance.navigation.type === performance.navigation.TYPE_RELOAD\n  }\n  /**\n   * Init app state object.\n   */\n  init_state (state) {\n    state.repository = this.repository()\n    state.version = this.version()\n    state.offline = 'file:' == window.location.protocol\n    state.theme = localStorage.getItem('theme')\n    state.content_root = this.content_root()\n    state.sub_hosted = this.sub_hosted(state.content_root, state.repository)\n    state.path = this.path(state.content_root, state.repository, state.sub_hosted)\n    state.reloaded = this.reloaded()\n  }\n}\n","\"use strict\";\n\nexport {Toolbox}\n\n/**\n * Provides useful generic functions.\n */\nclass Toolbox {\n  /**\n   * Get random char.\n   */\n  static randomChar () {\n    const alphabet = \"abcdefghijklmnopqrstuvwxyz\"\n    return alphabet[Math.floor(Math.random() * alphabet.length)]\n  }\n /**\n  * Generate a unique identifier.\n  */\n  static UID () {\n    return this.randomChar() + (+new Date).toString(36) + Math.random().toString(36).substring(3)\n  }\n /**\n  * Generate a small non-timed identifier.\n  */\n  static SID () {\n    return this.randomChar() + (Math.random()).toString(36).substring(3,8)\n  }\n  /**\n   * Return param from url search parami, if unset, return the default.\n   * @param {string} _param - Parameter to search in the array.\n   * @return Requested parameter.\n   */\n  static fromUrl (_param) {\n    let param = new URLSearchParams(document.location.search)\n    return param.get(_param) == null ?\n      this.urlDefaults(_param) : this.urlValidParams(_param, param.get(_param))\n  }\n  /**\n   * Default url parameters values if not set\n   * @param {string} _param - Parameter to return the default.\n   * @return Default parameter.\n   */\n  static urlDefaults (_param) {\n    switch (_param) {\n      case 'theme':\n        return 'light'\n    }\n  }\n  /**\n   * Valid parameters, if a invalid is passed, will return the default.\n   */\n  static urlValidParams (_param, value) {\n    switch (_param) {\n      case 'theme':\n        return ['dark', 'light'].includes(value) ? value : this.urlDefaults(_param)\n    }\n  }\n  static cleanPathname (_pathname) {\n    return _pathname.replace(/([^:]\\/)\\/+/g, \"$1\").replace(/[^:]\\.\\//g, \"$1\")\n  }\n  /**\n   * Get the depth of a path name.\n   */\n  static getDepth (_pathname) {\n    return (_pathname.match(/\\//g)||[]).length\n  }\n  /*\n   *\n   */\n  static cache_check (state, fetch_url, hours, callback) {\n    let json = localStorage.getItem(fetch_url)\n    if (json !== null)\n      json = JSON.parse(json)\n\n    let cache_timeout = new Date(0)\n    cache_timeout.setHours(hours)\n    if (state.reloaded === true || json === null || json['timestamp'] + cache_timeout.valueOf() < Date.now()) {\n      fetch(fetch_url, {\n        method: 'Get',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then((response) => {\n        if (response.ok !== true) {\n          return\n        }\n\n        return response.json()\n      }).then((obj) => {\n        if (!obj)\n          return\n\n        json = {'obj': obj}\n        json['timestamp'] = Date.now()\n        callback(obj)\n        localStorage.setItem(fetch_url, JSON.stringify(json))\n      }).catch((e) => {\n        console.error(`Failed to resolve ${fetch_url}, due to:`, e)\n        return\n      })\n    } else {\n      callback(json['obj'])\n    }\n  }\n}\n","\"use strict\";\nexport {DOM, Animate}\n\n/** Make DOM element*/\nclass DOM {\n  constructor (dom, tags){\n    this.$\n    if (typeof dom != 'string'){\n      this.$ = dom\n      return\n    }\n    this.$ = document.createElement(dom);\n    if (typeof tags == 'object') for (const tag in tags) {\n      if (tag in this.$)\n        this.$[tag] = tags[tag]\n      else\n        this.$.dataset[tag] = tags[tag]\n    }\n  }\n  /**\n   * Clone node\n   * @param {bool} deep - If true, then the node and its whole subtree,\n   * including text that may be in child Text nodes, is also copied.\n   */\n  cloneNode (deep){\n    let node = new DOM(this.$.cloneNode(deep))\n    return node\n  }\n  /**\n   * Set DOM innerText.\n   * @param {string} str - Text to apply.\n   */\n  set innerText(str){\n    this.$.innerText = str\n  }\n  /**\n   * Get DOM innerText.\n   */\n  get innerText(){\n    return this.$.innerText\n  }\n  /** Get DOM offset height */\n  get height (){\n    return this.$.offsetHeight\n  }\n  /** Get DOM offset width */\n  get width (){\n    return this.$.offsetWidth\n  }\n  /** Get DOM id */\n  get id (){\n    return this.$.id\n  }\n  /** Set DOM id */\n  set id (str){\n    this.$.id= str\n  }\n  /** Get DOM value */\n  get value (){\n    return this.$.value\n  }\n  /** Set DOM value */\n  set value (str){\n    this.$.value = str\n  }\n  /** Get DOM src */\n  get src (){\n    return this.$.src\n  }\n  /** Set DOM src */\n  set src (str){\n    this.$.src = str\n  }\n  /**\n   * Focus on DOM.\n   */\n  focus (){\n    this.$.focus()\n  }\n  /** Get DOM classList object. */\n  get classList(){\n    return this.$.classList\n  }\n  /** Get DOM style object. */\n  get style(){\n    return this.$.style\n  }\n  /**\n   * Append a ``onchange`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onchange (self, ev, args){\n    this.$.onchange = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n  return this\n  }\n  /**\n   * Append a ``onclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onclick (self, ev, args){\n    this.$.onclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n  return this\n  }\n  /**\n   * Append a ``mouseup`` and ``touchup`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onup (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Append a ``mousedown`` and ``touchdown`` event.\n   * @param {function} ev - Function to be executed on down.\n   */\n  ondown (self, ev, args){\n    this.$.addEventListener('mousedown', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Append a ``mousemove`` and ``touchmove`` event.\n   * @param {function} ev - Function to be executed on move.\n   */\n  onmove (self, ev, args){\n    this.$.addEventListener('mousemove', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Append a event listener.\n   * @param {string} event - Event listener name.\n   * @param {function} fun - Function to be executed on move.\n   * @param {function} args - Arguments to be applied to the function.\n   */\n  onevent (event, self, fun, args){\n    this.$.addEventListener(event, (e) => {\n      if (typeof args == 'undefined')\n        fun.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        fun.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Appends others :js:func:`DOM`.\n   * @param {Object[]} DOMS - Array of :js:func:`DOM` or/and direct DOM Nodes.\n   */\n  append (DOMS){\n    if (DOMS.constructor != Array)\n      DOMS = [DOMS]\n\n    DOMS.forEach ((item) => {\n      if (/HTML(.*)Element/.test(item.constructor.name))\n        this.$.appendChild(item)\n      else if (typeof item == 'object' &&\n               /HTML(.*)Element/.test(item.$.constructor.name))\n        this.$.appendChild(item.$)\n    })\n\n    return this\n  }\n  /**\n   * Delete object.\n   */\n  delete (){\n    this.$.remove()\n    delete this\n  }\n  /**\n   * Remove childs from :js:func:`DOM` object.\n   */\n  removeChilds (){\n    let child = this.$.lastElementChild\n    while (child) {\n      this.$.removeChild(child)\n      child = this.$.lastElementChild\n    }\n    return this\n  }\n  /**\n   * Get DOM Node element.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Optional parent DOM.\n   */\n  static get (a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'undefined') ? document.querySelector (a) : b.querySelector(a)\n  }\n  /**\n   * Get all DOM Node elements.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Parent DOM.\n   */\n  static getAll(a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'object') ? b.querySelectorAll(a) : get(b).querySelectorAll(a)\n  }\n  /**\n   * Include or remove a class to a DOM.\n   * @param {Object} b - Target DOM.\n   * @param {string} _class - Optional class, defaults to `on`.\n   */\n  static switchState (b, _class){\n    b = b instanceof DOM ? b.$ : b\n    let cn = _class != undefined ? _class : `on`\n    if (b.classList.contains(cn))\n      b.classList.remove(cn)\n    else\n      b.classList.add(cn)\n  }\n  /**\n  * Generate a unique identifier.\n  */\n  static UID (){\n    return (+new Date).toString(36) + Math.random().toString(36).substr(2)\n  }\n  /**\n   * Prototype a DOM composed by details, sumamary and a h2 title with optional\n   * onclick event.\n   * @param {Object} str - id, title and onclick function of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.title - Title of the DOM element.\n   * @param {Object} str.onclick - Onclick function of the DOM element.\n   */\n  static prototypeDetails (str){\n    let summary = new DOM('summary', {innerText:str.innerText})\n    let details = new DOM('details', {id:str.id, name:str.id})\n      .append(summary)\n\n    if (str.onevent != undefined) {\n      str.onevent.forEach(event => {\n        event.args.push(details.$)\n        summary.onevent(\n          event.event,\n          event.self,\n          event.fun,\n          event.args\n        )\n      })\n    }\n    return details\n  }\n  /**\n   * Prototype a DOM composed by input(file type) and label.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   */\n  static prototypeInputFile (str){\n    return new DOM('label', {\n      htmlFor:`${str.id}_input`,\n      id:str.id,\n      className:str.className,\n      innerText:str.innerText\n      }).append(\n        new DOM('input', {id:`${str.id}_input`, type:'file'})\n      )\n  }\n  /**\n   * Prototype a DOM composed by input(checkbox) and label styled as as switch.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   * @returns Array with input and container.\n   */\n  static prototypeCheckSwitch (str){\n    let input = new DOM('input', {\n      id:str.id,\n      name:str.id,\n      className:'checkswitch',\n      type:'checkbox',\n      value:false\n    })\n\n    let container = new DOM('div', {className:str.className})\n      .append([\n        new DOM('div')\n          .append([\n            new DOM('label', {\n                className:'checkswitch',\n                htmlFor:str.id,\n                innerText:str.innerText\n              }).append([\n                input,\n                new DOM('span')\n              ])\n          ])\n      ])\n\n    return [input, container]\n  }\n  /**\n   * Prototype a DOM that allows data to be downloded on its creation.\n   * @param {string} filename - name of the file.\n   * @param {string} file - file content.\n   */\n  static prototypeDownload (filename, file){\n    let data,\n        reg = /.*\\.(py|xml|csv|json|svg|png)$/\n    if (!reg.test(filename))\n      return\n\n    let format = filename.match(reg)[1]\n    filename = filename\n      .replaceAll('/','-')\n      .replaceAll(' ','_')\n      .toLowerCase()\n\n    switch (format) {\n      case 'xml':\n        data = \"data:x-application/xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'py':\n        data = \"data:text/python;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'json':\n        data = \"data:text/json;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'csv':\n        data = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'svg':\n        data = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'png':\n        data = file; // Expect already in blob\n        break\n    }\n    let element = document.createElement('a')\n    element.setAttribute('href', data)\n    element.setAttribute('download', filename)\n    element.style.display = 'none'\n\n    document.body.appendChild(element)\n    element.click ()\n    document.body.removeChild(element)\n  }\n  /**\n   * Set a option of a select list by its innerText.\n   * @param {Object} dom - Node of the select list.\n   * @param {string} value - Inner text of the target option.\n   */\n  static setSelected (dom, value){\n    for (var i = 0; i < dom.$.options.length; i++){\n      if (dom.$.options[i].text == value){\n        dom.$.options[i].selected = true\n        return\n      }\n    }\n  }\n  /**\n   * Updates parameter of children of a DOM.\n   * Lazy because doesn't care is successful or not.\n   * Useful for generic lists, like in searches.\n   * @param {Object} dom - Container of the list.\n   * @param {string} uid - Item to search for.\n   * @param {Object} props - Properties to update, where the key is also the DOM id.\n   * @param {string} param - Parameter to update.\n   */\n  static lazyUpdate (dom, uid, props, param){\n    param = param == undefined ? 'innerText' : param\n    let element = DOM.get(`[data-uid='${uid}']`, dom)\n    for (const key in props){\n      DOM.get(`#${key}`, element)[param] = props[key]\n    }\n  }\n}\n","\"use strict\";\n\nimport {Toolbox} from './toolbox.js'\nimport {DOM} from './dom.js'\n\nexport class Fetch {\n  constructor (app) {\n    let $ = this.$ = {}\n    $.head = new DOM(DOM.get('head'))\n\n    this.parent = app\n\n    this.init()\n  }\n  /**\n   * Updates elements in a reactive manner,\n   * fetching from the main doctools/metadata.js,\n   * that contain the most up-to-date metadata\n   */\n  init () {\n    if (this.parent.state.offline === true) {\n      console.log(\"fetch: dynamic features are not available in offline mode\")\n      return\n    } else if (this.parent.state.sub_hosted === false) {\n      console.log(\"fetch: dynamic features are not available for single repository doc\")\n      return\n    }\n\n    Toolbox.cache_check(this.parent.state, '/doctools/metadata.json', 24,\n                        (obj) => {this.init_metadata(obj)})\n  }\n  /**\n   * Attach metadata to this and call to inject extra modules.\n   */\n  init_metadata (obj) {\n    this.parent.state.metadata = obj\n\n    if ('modules' in obj)\n      this.load_modules(obj['modules'])\n  }\n  /**\n   * Inject any JavaScript and CSS StyleSheet listed on the metadata.\n   * The advantage is to load the latest and greatest scripts, regardless\n   * of the tools' built doc version.\n   */\n  load_modules (obj) {\n    if ('javascript' in obj) {\n      obj['javascript'].forEach((elem) => {\n        let script = new DOM('script', {\n          'src': `/doctools/_static/${elem}`\n        });\n        this.$.head.append(script)\n      })\n    }\n    if ('stylesheet' in obj) {\n      obj['stylesheet'].forEach((elem) => {\n        let style = new DOM('link', {\n          'rel': 'stylesheet',\n          'type': 'text/css',\n          'href': `/doctools/_static/${elem}`\n        });\n        this.$.head.append(style)\n      })\n    }\n  }\n}\n","\"use strict\";\n\nimport {DOM} from './dom.js'\n\n/* Handle navigation, theming, search, shortcuts */\nexport class Navigation {\n  constructor (app) {\n    this.parent = app\n\n    this.portrait = false\n    this.scrollSpy = {\n      localtoc: new Map(),\n      currentLocaltoc: undefined\n    }\n\n    let $ = this.$ = {}\n    $.body = new DOM(DOM.get('body'))\n    $.content = new DOM(DOM.get('.body section'))\n    $.localtoc = new DOM(DOM.get('.tocwrapper > nav > ul > li'))\n    this.scroll_spy()\n\n    if (this.parent.state.theme === null)\n      this.parent.state.theme = this.os_theme()\n    $.body.classList.add('js-on')\n    if (this.parent.state.theme !== this.os_theme())\n      $.body.classList.add(this.parent.state.theme)\n\n\t  $.searchButton = new DOM('button', {\n      id:'search',\n      className:'icon',\n      title:'Search (/)'\n    }).onclick(this, () => {\n      DOM.switchState($.searchArea)\n      DOM.switchState($.searchAreaBg)\n      $.searchInput.focus()\n      $.searchInput.$.select()\n    })\n\t  $.changeTheme = new DOM('button', {\n      className: this.parent.state.theme === 'dark' ? 'icon on' : 'icon',\n      id:'theme',\n      title:'Switch theme'\n    }).onclick(this, () => {\n      $.body.classList.remove(this.parent.state.theme)\n      this.parent.state.theme = this.parent.state.theme === 'dark' ? 'light' : 'dark'\n      if (this.os_theme() == this.parent.state.theme)\n        localStorage.removeItem('theme')\n      else {\n        localStorage.setItem('theme', this.parent.state.theme)\n        $.body.classList.add(this.parent.state.theme)\n      }\n    })\n\n    $.searchAreaBg = new DOM('div', {\n      className:'search-area-bg'\n    }).onclick(this, () => {\n      DOM.switchState($.searchArea)\n      DOM.switchState($.searchAreaBg)\n    })\n    $.searchArea = new DOM(DOM.get('.search-area'))\n    $.searchForm = new DOM(DOM.get('form', $.searchArea))\n    $.searchInput = new DOM(DOM.get('input', $.searchForm))\n    $.searchForm.$['action'] = DOM.get('link[rel=\"search\"]').href\n    $.body.append([$.searchAreaBg])\n\n    $.rightHeader = new DOM(DOM.get('header #right span.reverse')).append([$.changeTheme, $.searchButton])\n\n    $.relatedNext = DOM.get('.related .next')\n    $.relatedPrev = DOM.get('.related .prev')\n\n    this.init()\n\n    app.navigation = this\n  }\n  /*\n   * Initates scroll spy elements.\n   */\n  scroll_spy () {\n    if (this.$.localtoc.$ !== null) {\n      this.prepareLocaltocMap()\n    }\n  }\n  /*\n   * Prepare map for localtoc elements to be used by the scroll spy.\n   */\n  prepareLocaltocMap (){\n    let key = \"\"\n    let lt = this.scrollSpy.localtoc\n    let i = 0\n    DOM.getAll('.reference.internal', this.$.localtoc).forEach((elem) => {\n      key = `${i}_${elem.textContent}`\n      lt.set(key, [elem, undefined])\n      i += 1\n    })\n\n    let entries = []\n    for (let i = 0; i < 7; i++) {\n      entries.push(...DOM.getAll(`section > h${i}`, this.$.content))\n    }\n    // Sort entries in distance to the top\n    entries = entries.sort((a, b) => a.getBoundingClientRect().y - b.getBoundingClientRect().y)\n    i = 0\n    entries.forEach((elem) => {\n      key = elem.textContent\n      key = `${i}_${key}`\n      if (lt.has(key)) {\n        lt.set(key, [lt.get(key)[0], elem])\n        i += 1\n      }\n    })\n    // Remove not found entries\n    lt.forEach((value, key, map) => {\n      if (value[1] === undefined)\n        map.delete(key)\n    })\n  }\n  /* Update GUI based on resize event */\n  handleResize () {\n    this.portrait = window.innerHeight > window.innerWidth ? true : false\n  }\n  /* Update GUI based on scroll event */\n  handleScroll () {\n    if (this.$.localtoc.$ !== null) {\n      // Highlight localtoc entry\n      let key_neg, key_pos, key, dist\n      let dist_pos = Number.MAX_SAFE_INTEGER\n      let dist_neg = Number.MIN_SAFE_INTEGER\n      let lt = this.scrollSpy.localtoc\n      lt.forEach((value, key_, map) => {\n        dist = value[1].getBoundingClientRect().y\n        if (dist <= 0) {\n          if (dist > dist_neg) {\n            dist_neg = dist\n            key_neg  = key_\n          }\n        } else {\n          if (dist < dist_pos) {\n            dist_pos = dist\n            key_pos  = key_\n          }\n        }\n      })\n      if (dist_pos < 5*16)\n        key = key_pos\n      else\n        key = key_neg\n\n      if (key !== undefined) {\n        let clt_key = this.scrollSpy.currentLocaltoc\n        if (key !== clt_key) {\n          lt.get(key)[0].classList.add(\"current\")\n          if (clt_key !== undefined) {\n            lt.get(clt_key)[0].classList.remove(\"current\")\n          }\n          this.scrollSpy.currentLocaltoc = key\n        }\n      }\n    }\n  }\n  /* Search shortcut */\n  search (e) {\n    if (e.key === '/' && !this.$.searchArea.classList.contains('on')) {\n      DOM.switchState(this.$.searchArea)\n      DOM.switchState(this.$.searchAreaBg)\n      this.$.searchInput.focus()\n      this.$.searchInput.$.select()\n    } else if (e.code === 'Escape') {\n      if (this.$.searchArea.classList.contains('on')) {\n        DOM.switchState(this.$.searchArea)\n        DOM.switchState(this.$.searchAreaBg)\n      }\n    }\n  }\n  /* Related shortcut */\n  related (e) {\n    if (!e.altKey || !e.shiftKey)\n      return\n    e.preventDefault()\n\n    /* Try to anchor to same section */\n    let anchor = (e.ctrlKey && location.href.split('#').length > 1) ?\n                 `#${location.href.split('#')[1]}` : \"\"\n\n    if ((e.code == 'ArrowLeft' || e.code == 'KeyA') && this.$.relatedPrev)\n      location.href = this.$.relatedPrev.href + anchor\n    else if ((e.code == 'ArrowRight' || e.code == 'KeyD') && this.$.relatedNext)\n      location.href = this.$.relatedNext.href + anchor\n  }\n\n  keyup (e) {\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'KeyA':\n      case 'KeyD':\n        this.related(e)\n        break\n      case 'IntlRo':\n      case 'Escape':\n        this.search(e)\n        break\n    }\n  }\n  keydown (e) {\n    if (!e.altKey || !e.shiftKey)\n      return\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'KeyA':\n      case 'KeyD':\n        e.preventDefault()\n    }\n  }\n\n  /**\n   * Get OS Theme\n   */\n  os_theme () {\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? 'dark' : 'light'\n  }\n  /**\n   * Init navigation.\n   */\n  init () {\n    onresize = () => {this.handleResize()}\n    onscroll = () => {this.handleScroll()}\n    document.addEventListener('keyup', (e) => {this.keyup(e)}, false);\n    document.addEventListener('keydown', (e) => {this.keydown(e)}, false);\n  }\n}\n","import { State } from './state.js'\nimport { Fetch } from './fetch.js'\nimport { Navigation } from './navigation.js'\n\nexport default function App () {\n  window.app = {}\n\n  new State(app)\n  new Fetch(app)\n  new Navigation(app)\n}\n\nApp()\n"],"names":["state","repository","undefined","version","offline","theme","content_root","sub_hosted","path","reloaded","metadata","State","constructor","app","this","init_state","parent","dom","document","querySelector","content","dataset","getAttribute","replace","console","warn","url","URL","location","href","org","origin","startsWith","window","performance","navigation","type","TYPE_RELOAD","protocol","localStorage","getItem","Toolbox","randomChar","alphabet","Math","floor","random","UID","Date","toString","substring","SID","fromUrl","_param","param","URLSearchParams","search","get","urlDefaults","urlValidParams","value","includes","cleanPathname","_pathname","getDepth","match","length","cache_check","fetch_url","hours","callback","json","JSON","parse","cache_timeout","setHours","valueOf","now","fetch","method","headers","then","response","ok","obj","setItem","stringify","catch","e","error","DOM","tags","$","createElement","tag","cloneNode","deep","innerText","str","height","offsetHeight","width","offsetWidth","id","src","focus","classList","style","onchange","self","ev","args","apply","Array","push","onclick","onup","addEventListener","ondown","onmove","onevent","event","fun","append","DOMS","forEach","item","test","name","appendChild","remove","removeChilds","child","lastElementChild","removeChild","a","b","getAll","querySelectorAll","switchState","_class","cn","contains","add","substr","prototypeDetails","summary","details","prototypeInputFile","htmlFor","className","prototypeCheckSwitch","input","prototypeDownload","filename","file","data","reg","format","replaceAll","toLowerCase","encodeURIComponent","element","setAttribute","display","body","click","setSelected","i","options","text","selected","lazyUpdate","uid","props","key","Fetch","head","init","init_metadata","log","load_modules","elem","script","rel","Navigation","portrait","scrollSpy","localtoc","Map","currentLocaltoc","scroll_spy","os_theme","searchButton","title","searchArea","searchAreaBg","searchInput","select","changeTheme","removeItem","searchForm","rightHeader","relatedNext","relatedPrev","prepareLocaltocMap","lt","textContent","set","entries","sort","getBoundingClientRect","y","has","map","delete","handleResize","innerHeight","innerWidth","handleScroll","key_neg","key_pos","dist","dist_pos","Number","MAX_SAFE_INTEGER","dist_neg","MIN_SAFE_INTEGER","key_","clt_key","code","related","altKey","shiftKey","preventDefault","anchor","ctrlKey","split","keyup","keydown","matchMedia","matches","onresize","onscroll","App"],"mappings":"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"}