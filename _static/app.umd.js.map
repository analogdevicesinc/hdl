{"version":3,"file":"app.umd.js","sources":["../scripts/state.js","../scripts/dom.js","../scripts/fetch.js","../scripts/navigation.js","../scripts/hot_reload.js","../scripts/app.js"],"sourcesContent":["\"use strict\";\n\n/**\n * repository: from html meta tag\n * version: v0.0.1, main, staging/new_feature\n * offline: if no webserver, direct file://\n * theme: dark/light\n * content_root: relative path to reach the current doc root page\n * metadata: fetched by fetch.js\n * subhost: \"/docs/$repository\", \"/$repository\" (github.io) or \"\" (single doc)\n * path: \"v0.0.1\", \"\", \"prs/staging/new_feature\"\n * reloaded: page was reloaded\n * metadata: tags.json, fetched later by fetch.js, if state allows\n * standalone: isolated doc, disable multi-repo integrations\n */\nconst state = {\n  repository: undefined,\n  version: undefined,\n  offline: undefined,\n  theme: undefined,\n  content_root: undefined,\n  subhost: undefined,\n  path: undefined,\n  reloaded: undefined,\n  metadata: undefined,\n  standalone: undefined\n}\n\n/**\n * Creates the common state of the documentation.\n */\nexport class State {\n  constructor (app) {\n    this.init_state(state)\n\n    this.parent = app\n    app.state = state\n  }\n  /**\n   * Get repository name, e.g.\n   * doctools, hdl, pyadi-iio\n   */\n  repository () {\n    let dom = document.querySelector('meta[name=\"repository\"]')\n    return dom ? dom.content : ''\n  }\n  /**\n   * Get meta[name=\"version\"] of doc, e.g.\n   * main, v0.2.2, staging/new_feature\n   * This is the hard-coded value and may be outdated,\n   * so inhering from path has higher precedence.\n   * Should only be used as a fallback.\n   */\n  version () {\n    let dom = document.querySelector('meta[name=\"version\"]')\n    if (dom === null)\n      return \"\"\n\n    return dom.content\n  }\n  /**\n   * Get relative path to the root.\n   * Dual fallback to support multiple Sphinx versions.\n   */\n  static content_root (doc) {\n    let content_root\n    let dom = doc.querySelector('script#documentation_options')\n    if (dom !== null)\n      content_root = dom.dataset['url_root'];\n    if (content_root == undefined)\n      content_root = doc.documentElement.dataset[\"content_root\"]\n    if (content_root == undefined) {\n      dom =  doc.querySelector('.repotoc-tree .current')\n      if (dom !== null)\n        content_root = dom.getAttribute('href').replace('index.html', '')\n    }\n    if (content_root == undefined) {\n      console.warn(\"Failed to get content root.\")\n      content_root = ''\n    }\n    return content_root\n  }\n  /**\n   * Checks if doc is in a path beyond the server root,\n   * e.g.\n   * /docs/doctools, /docs/doctools/v0.2.2 -> /docs/doctools\n   * /doctools, /doctools/v0.2.2 -> /doctools\n   * / , /v0.2.2 -> (empty)\n   * For correctness, the html meta repository tag must match the url repository.\n   */\n  subhost (content_root, repository) {\n    let doc_root   = new URL(content_root, location).href,\n        no_docs    = new URL(repository, location.origin).href,\n        under_docs = new URL(`docs/${repository}`, location.origin).href\n    if (doc_root.startsWith(under_docs))\n      return `/docs/${repository}`\n    else if (doc_root.startsWith(no_docs))\n      return `/${repository}`\n    else\n      return ''\n  }\n  /**\n   * Get absolute path to doc,\n   * e.g.\n   * file://../docs/doctools, file://../docs/doctools/v0.2.2 -> file://../docs/doctools\n   * For correctness, the html meta repository tag must match the url repository.\n   */\n  subhost_offline (content_root, repository) {\n    let doc_root = new URL(content_root, location).href\n    let index = doc_root.search(\"/_build/html\")\n    if (index !== -1)\n      return doc_root.substring(0, index + \"/_build/html\".length)\n    index = doc_root.search(repository)\n    if (index !== -1)\n      return doc_root.substring(0, index + repository.length)\n    return undefined\n  }\n  /**\n   * Extract path of versioned version, without repository name\n   * /doctools -> \"\"\n   * / -> \"\"\n   * /docs/doctools/v1.1.1 -> \"v1.1.1\"\n   * /doctools/v1.1.1 -> \"v1.1.1\"\n   * /v1.1.1 -> \"v1.1.1\"\n   */\n  path (content_root, subhost) {\n    let url = new URL(content_root, location).href,\n        org = new URL(subhost, location.origin).href\n    if (!url.startsWith(org))\n      return \"\"\n    else\n      return url.replace(org, \"\").replace(/^\\/|\\/$/g, \"\")\n  }\n  /**\n   * Extract path of versioned version, without repository name\n   * file://../doctools -> \"\"\n   * file://../doctools/v1.1.1 -> \"v1.1.1\"\n   */\n  path_offline (content_root, subhost) {\n    if (subhost === undefined)\n      return undefined\n    let url = new URL(content_root, location).href,\n        org = subhost\n    if (!url.startsWith(org))\n      return \"\"\n    else\n      return url.replace(org, \"\").replace(/^\\/|\\/$/g, \"\")\n  }\n  /**\n   * Detects if the page was reloaded by the user.\n   * This information is to use to force reload of cached content.\n   */\n  reloaded () {\n    if (!window.performance)\n      return false\n\n    return performance.navigation.type === performance.navigation.TYPE_RELOAD\n  }\n  /**\n   * Disable integrations.\n   */\n  standalone () {\n    return document.querySelector('meta[name=\"standalone\"]') ? true : false\n  }\n  /**\n   * Init app state object.\n   */\n  init_state (state) {\n    state.repository = this.repository()\n    state.version = this.version()\n    state.offline = 'file:' == window.location.protocol\n    state.theme = localStorage.getItem('theme')\n    state.content_root = State.content_root(document)\n    if (!state.offline) {\n      state.subhost = this.subhost(state.content_root, state.repository)\n      state.path = this.path(state.content_root, state.subhost)\n    } else {\n      state.subhost = this.subhost_offline(state.content_root, state.repository)\n      state.path = this.path_offline(state.content_root, state.subhost)\n    }\n    state.reloaded = this.reloaded()\n    state.standalone = this.standalone()\n  }\n}\n","\"use strict\";\nexport {DOM, Animate}\n\n/** Make DOM element*/\nclass DOM {\n  constructor (dom, tags){\n    this.$\n    if (typeof dom != 'string'){\n      this.$ = dom\n      return\n    }\n    this.$ = document.createElement(dom);\n    if (typeof tags == 'object') for (const tag in tags) {\n      if (tag in this.$)\n        this.$[tag] = tags[tag]\n      else\n        this.$.dataset[tag] = tags[tag]\n    }\n  }\n  /**\n   * Clone node\n   * @param {bool} deep - If true, then the node and its whole subtree,\n   * including text that may be in child Text nodes, is also copied.\n   */\n  cloneNode (deep){\n    let node = new DOM(this.$.cloneNode(deep))\n    return node\n  }\n  /**\n   * Set DOM innerText.\n   * @param {string} str - Text to apply.\n   */\n  set innerText(str){\n    this.$.innerText = str\n  }\n  /**\n   * Get DOM innerText.\n   */\n  get innerText(){\n    return this.$.innerText\n  }\n  /** Get DOM offset height */\n  get height (){\n    return this.$.offsetHeight\n  }\n  /** Get DOM offset width */\n  get width (){\n    return this.$.offsetWidth\n  }\n  /** Get DOM id */\n  get id (){\n    return this.$.id\n  }\n  /** Set DOM id */\n  set id (str){\n    this.$.id= str\n  }\n  /** Get DOM value */\n  get value (){\n    return this.$.value\n  }\n  /** Set DOM value */\n  set value (str){\n    this.$.value = str\n  }\n  /** Get DOM src */\n  get src (){\n    return this.$.src\n  }\n  /** Set DOM src */\n  set src (str){\n    this.$.src = str\n  }\n  /**\n   * Get getBoundingClientRect\n   */\n  get rect () {\n    return this.$.getBoundingClientRect()\n  }\n  /**\n   * Focus on DOM.\n   */\n  focus (){\n    this.$.focus()\n  }\n  /** Get DOM classList object. */\n  get classList(){\n    return this.$.classList\n  }\n  /** Get DOM style object. */\n  get style(){\n    return this.$.style\n  }\n  /**\n   * Append a ``onchange`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onchange (self, ev, args){\n    this.$.onchange = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``onclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onclick (self, ev, args){\n    this.$.onclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``onauxclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onauxclick (self, ev, args){\n    this.$.onauxclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``mouseup`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onup (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``onmiddleclick`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onmiddleclick (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if ( e.which !== 2 )\n        return\n\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousedown`` event.\n   * @param {function} ev - Function to be executed on down.\n   */\n  ondown (self, ev, args){\n    this.$.addEventListener('mousedown', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousemove`` and ``touchmove`` event.\n   * @param {function} ev - Function to be executed on move.\n   */\n  onmove (self, ev, args){\n    this.$.addEventListener('mousemove', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a event listener.\n   * @param {string} event - Event listener name.\n   * @param {function} fun - Function to be executed on move.\n   * @param {function} args - Arguments to be applied to the function.\n   */\n  onevent (event, self, fun, args){\n    this.$.addEventListener(event, (e) => {\n      if (typeof args == 'undefined')\n        fun.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        fun.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Appends others :js:func:`DOM`.\n   * @param {Object[]} DOMS - Array of :js:func:`DOM` or/and direct DOM Nodes.\n   */\n  append (DOMS){\n    if (DOMS.constructor != Array)\n      DOMS = [DOMS]\n\n    DOMS.forEach ((item) => {\n      if (/HTML(.*)Element/.test(item.constructor.name))\n        this.$.appendChild(item)\n      else if (typeof item == 'object' &&\n               /HTML(.*)Element/.test(item.$.constructor.name))\n        this.$.appendChild(item.$)\n    })\n\n    return this\n  }\n  /**\n   * Delete object.\n   */\n  delete (){\n    this.$.remove()\n    delete this\n  }\n  /**\n   * Remove childs from :js:func:`DOM` object.\n   */\n  removeChilds (){\n    let child = this.$.lastElementChild\n    while (child) {\n      this.$.removeChild(child)\n      child = this.$.lastElementChild\n    }\n    return this\n  }\n  /**\n   * Get DOM Node element.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Optional parent DOM.\n   */\n  static get (a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'undefined') ? document.querySelector (a) : b.querySelector(a)\n  }\n  /**\n   * Get all DOM Node elements.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Parent DOM.\n   */\n  static getAll(a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'object') ? b.querySelectorAll(a) : get(b).querySelectorAll(a)\n  }\n  /**\n   * Include or remove a class to a DOM.\n   * @param {Object} b - Target DOM.\n   * @param {string} _class - Optional class, defaults to `on`.\n   */\n  static switchState (b, _class){\n    b = b instanceof DOM ? b.$ : b\n    let cn = _class != undefined ? _class : `on`\n    if (b.classList.contains(cn))\n      b.classList.remove(cn)\n    else\n      b.classList.add(cn)\n  }\n  /**\n  * Generate a unique identifier.\n  */\n  static UID (){\n    return (+new Date).toString(36) + Math.random().toString(36).substr(2)\n  }\n  /**\n   * Prototype a DOM composed by details, sumamary and a h2 title with optional\n   * onclick event.\n   * @param {Object} str - id, title and onclick function of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.title - Title of the DOM element.\n   * @param {Object} str.onclick - Onclick function of the DOM element.\n   */\n  static prototypeDetails (str){\n    let summary = new DOM('summary', {innerText:str.innerText})\n    let details = new DOM('details', {id:str.id, name:str.id})\n      .append(summary)\n\n    if (str.onevent != undefined) {\n      str.onevent.forEach(event => {\n        event.args.push(details.$)\n        summary.onevent(\n          event.event,\n          event.self,\n          event.fun,\n          event.args\n        )\n      })\n    }\n    return details\n  }\n  /**\n   * Prototype a DOM composed by input(file type) and label.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   */\n  static prototypeInputFile (str){\n    return new DOM('label', {\n      htmlFor:`${str.id}_input`,\n      id:str.id,\n      className:str.className,\n      innerText:str.innerText\n      }).append(\n        new DOM('input', {id:`${str.id}_input`, type:'file'})\n      )\n  }\n  /**\n   * Prototype a DOM composed by input(checkbox) and label styled as as switch.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   * @returns Array with input and container.\n   */\n  static prototypeCheckSwitch (str){\n    let input = new DOM('input', {\n      id:str.id,\n      name:str.id,\n      className:'checkswitch',\n      type:'checkbox',\n      value:false\n    })\n\n    let container = new DOM('div', {className:str.className})\n      .append([\n        new DOM('div')\n          .append([\n            new DOM('label', {\n                className:'checkswitch',\n                htmlFor:str.id,\n                innerText:str.innerText\n              }).append([\n                input,\n                new DOM('span')\n              ])\n          ])\n      ])\n\n    return [input, container]\n  }\n  /**\n   * Prototype a DOM that allows data to be downloded on its creation.\n   * @param {string} filename - name of the file.\n   * @param {string} file - file content.\n   */\n  static prototypeDownload (filename, file){\n    let data,\n        reg = /.*\\.(py|xml|csv|json|svg|png)$/\n    if (!reg.test(filename))\n      return\n\n    let format = filename.match(reg)[1]\n    filename = filename\n      .replaceAll('/','-')\n      .replaceAll(' ','_')\n      .toLowerCase()\n\n    switch (format) {\n      case 'xml':\n        data = \"data:x-application/xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'py':\n        data = \"data:text/python;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'json':\n        data = \"data:text/json;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'csv':\n        data = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'svg':\n        data = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'png':\n        data = file; // Expect already in blob\n        break\n    }\n    let element = document.createElement('a')\n    element.setAttribute('href', data)\n    element.setAttribute('download', filename)\n    element.style.display = 'none'\n\n    document.body.appendChild(element)\n    element.click ()\n    document.body.removeChild(element)\n  }\n  /**\n   * Set a option of a select list by its innerText.\n   * @param {Object} dom - Node of the select list.\n   * @param {string} value - Inner text of the target option.\n   */\n  static setSelected (dom, value){\n    for (var i = 0; i < dom.$.options.length; i++){\n      if (dom.$.options[i].text == value){\n        dom.$.options[i].selected = true\n        return\n      }\n    }\n  }\n  /**\n   * Updates parameter of children of a DOM.\n   * Lazy because doesn't care is successful or not.\n   * Useful for generic lists, like in searches.\n   * @param {Object} dom - Container of the list.\n   * @param {string} uid - Item to search for.\n   * @param {Object} props - Properties to update, where the key is also the DOM id.\n   * @param {string} param - Parameter to update.\n   */\n  static lazyUpdate (dom, uid, props, param){\n    param = param == undefined ? 'innerText' : param\n    let element = DOM.get(`[data-uid='${uid}']`, dom)\n    for (const key in props){\n      DOM.get(`#${key}`, element)[param] = props[key]\n    }\n  }\n}\n","\"use strict\";\n\nimport {Toolbox} from './toolbox.js'\nimport {DOM} from './dom.js'\n\nexport class Fetch {\n  constructor (app) {\n    let $ = this.$ = {}\n    $.head = new DOM(DOM.get('head'))\n\n    this.parent = app\n    this.callback = []\n\n    this.construct()\n\n    app.fetch = this\n  }\n  /**\n   * Updates elements in a reactive manner,\n   * fetching from the main hosted doctools.\n   * Fetches metadata.json, extra.umd.js, extra.umd.css\n   * After metadata.json is fetched, its file list are also\n   * fetched, if any.\n   * Depending on the context, the origin changes:\n   * - sub_hosted & ip_addr: same origin\n   * - sub_hosted & domain: same origin\n   * - single_hosted | offline: remote origin\n   * That means, sub_hosted locally can be used to mock a\n   * full domain deploy, while single_hosted and offline,\n   * mostly used by user and doc writers, relies on the remote\n   * source.\n   */\n  construct () {\n    let state = this.parent.state\n    const base_url = (state.subhost === '' || state.offline === true) ?\n      new URL('https://analogdevicesinc.github.io/doctools') :\n      new URL('doctools', new URL(state.subhost, location.origin))\n    // Do you want to use single_hosted with same origin? use below:\n    //const base_url =\n    //  new URL(state.subhost, location.origin)\n\n    const response = fetch(\n      new Request(new URL('metadata.json', base_url+'/'))\n    )\n      .then(response => response)\n      .then(response => {\n        if (response.ok === true)\n          return response.json()\n        else\n          throw new Error();\n      })\n      .then(obj => this.init_metadata(obj, base_url))\n      .catch(err => {})\n\n    let script = new DOM('script', {\n      'src': new URL('_static/extra.umd.js', base_url+'/')\n    });\n    this.$.head.append(script)\n    let style = new DOM('link', {\n      'rel': 'stylesheet',\n      'type': 'text/css',\n      'href': new URL('_static/extra.min.css', base_url+'/')\n    });\n    this.$.head.append(style)\n  }\n  /**\n   * Append callbacks to call after metadata.json is loaded.\n   */\n  then (callback) {\n    if (this.parent.state.metadata)\n      callback()\n    else\n      this.callback.push(callback)\n  }\n  /**\n   * Attach metadata to this and call to inject extra modules.\n   */\n  init_metadata (obj, url) {\n    this.parent.state.metadata = obj\n    this.callback.forEach(cb => cb())\n\n    if ('modules' in obj)\n      this.load_modules(obj['modules'], url)\n  }\n  /**\n   * Inject any JavaScript and CSS StyleSheet listed on the metadata.\n   * The advantage is to load the latest and greatest scripts, regardless\n   * of the tools' built doc version.\n   */\n  load_modules (obj, url) {\n    if (!(url instanceof URL)) {\n      console.warn(\"Expected URL, got \", url)\n      return\n    }\n    url = new URL('_static', url+'/')\n\n    if ('javascript' in obj) {\n      obj['javascript'].forEach((elem) => {\n        if (elem === 'extra.umd.js')\n          return\n        let script = new DOM('script', {\n          'src': new URL(elem, url+'/')\n        });\n        this.$.head.append(script)\n      })\n    }\n    if ('stylesheet' in obj) {\n      obj['stylesheet'].forEach((elem) => {\n        if (elem === 'extra.min.css')\n          return\n        let style = new DOM('link', {\n          'rel': 'stylesheet',\n          'type': 'text/css',\n          'href': new URL(elem, url+'/')\n        });\n        this.$.head.append(style)\n      })\n    }\n  }\n}\n","\"use strict\";\n\nimport {DOM} from './dom.js'\n\n/* Handle navigation, theming, search, shortcuts */\nexport class Navigation {\n  constructor (app) {\n    this.parent = app\n\n    this.portrait = false\n    this.scrollSpy = {\n      localtoc: new Map(),\n      currentLocaltoc: undefined\n    }\n\n    let $ = this.$ = {}\n    $.body = new DOM(DOM.get('body'))\n    $.content = new DOM(DOM.get('.documentwrapper .body'))\n    $.localtoc = new DOM(DOM.get('.tocwrapper > nav'))\n\n    if (this.parent.state.theme === null)\n      this.parent.state.theme = this.os_theme()\n    $.body.classList.add('js-on')\n    if (this.parent.state.theme !== this.os_theme())\n      $.body.classList.add(this.parent.state.theme)\n\n\t  $.changeTheme = new DOM('button', {\n      className: this.parent.state.theme === 'dark' ? 'icon on' : 'icon',\n      id:'theme',\n      title:'Switch theme'\n    }).onclick(this, () => {\n      $.body.classList.remove(this.parent.state.theme)\n      this.parent.state.theme = this.parent.state.theme === 'dark' ? 'light' : 'dark'\n      if (this.os_theme() == this.parent.state.theme)\n        localStorage.removeItem('theme')\n      else {\n        localStorage.setItem('theme', this.parent.state.theme)\n        $.body.classList.add(this.parent.state.theme)\n      }\n    })\n\n    $.preserve_scroll = {}\n    $.preserve_scroll['sphinxsidebarwrapper'] = new DOM(DOM.get('.sphinxsidebarwrapper'))\n\n    $.rightHeader = new DOM(DOM.get('header #right span.reverse')).append([$.changeTheme])\n\n    $.related = new DOM(DOM.get('.related'))\n\n    this.construct()\n\n    app.navigation = this\n  }\n  /*\n   * Initiates scroll spy elements.\n   */\n  init_scroll_spy () {\n    if (this.$.localtoc.$ !== null) {\n      this.prepareLocaltocMap()\n    }\n  }\n  /*\n   * De-init scroll spy elements.\n   */\n  deinit_scroll_spy () {\n    this.scrollSpy.localtoc.clear()\n    this.scrollSpy.currentLocaltoc = undefined\n  }\n  /*\n   * Prepare map for localtoc elements to be used by the scroll spy.\n   */\n  prepareLocaltocMap (){\n    let key = \"\"\n    let lt = this.scrollSpy.localtoc\n    DOM.getAll('.reference.internal', this.$.localtoc).forEach((elem) => {\n      key = elem.getAttribute(\"href\").substring(1)\n      lt.set(key, [elem, undefined])\n    })\n\n    let entries = []\n    // references\n    for (let i = 0; i < 7; i++) {\n      entries.push(...DOM.getAll(`section > h${i}`, this.$.content))\n    }\n    // document- links from singlehtml\n    entries.push(...Array.from(\n      DOM.getAll('div.toctree-wrapper.compound > span', this.$.content))\n        .filter(span => span.id.startsWith('document-')))\n    // Sort entries in distance to the top\n    entries = entries.sort((a, b) => a.getBoundingClientRect().y - b.getBoundingClientRect().y)\n    entries.forEach((elem) => {\n      key = elem.id || elem.parentNode.id\n      if (lt.has(key)) {\n        lt.set(key, [lt.get(key)[0], elem])\n      }\n    })\n    // Remove not found entries\n    lt.forEach((value, key, map) => {\n      if (value[1] === undefined)\n        map.delete(key)\n    })\n  }\n  /* Update GUI based on resize event */\n  handleResize () {\n    const em = 16,\n          ss = [40, 65, 80, 105],\n          iw = window.innerWidth\n\n    this.portrait = window.innerHeight > window.innerWidth ? true : false\n\n    this.previous_size = this.current_size\n    for (let i = 0; i < ss.length; i++) {\n      if (iw < (ss[i] * em))\n        break\n      this.current_size = i\n    }\n    if (this.previous_size === this.current_size)\n      return\n\n    if (this.current_size === 3 || this.previous_size === 3) {\n      let event = new Event('change');\n      this.$.show_localtoc.$.checked = iw < (ss[3] * em) ? false : true;\n      this.$.show_localtoc.$.dispatchEvent(event)\n    }\n  }\n  /* Update GUI based on scroll event */\n  handleScroll () {\n    if (this.$.localtoc.$ !== null) {\n      // Highlight localtoc entry\n      let key_neg, key_pos, key, dist\n      let dist_pos = Number.MAX_SAFE_INTEGER\n      let dist_neg = Number.MIN_SAFE_INTEGER\n      let lt = this.scrollSpy.localtoc\n      lt.forEach((value, key_, map) => {\n        dist = value[1].getBoundingClientRect().y\n        if (dist <= 0) {\n          if (dist > dist_neg) {\n            dist_neg = dist\n            key_neg  = key_\n          }\n        } else {\n          if (dist < dist_pos) {\n            dist_pos = dist\n            key_pos  = key_\n          }\n        }\n      })\n      if (dist_pos < 5*16)\n        key = key_pos\n      else\n        key = key_neg\n\n      if (key !== undefined) {\n        let clt_key = this.scrollSpy.currentLocaltoc\n        if (key !== clt_key) {\n          lt.get(key)[0].classList.add(\"current\")\n          if (clt_key !== undefined) {\n            lt.get(clt_key)[0].classList.remove(\"current\")\n          }\n          this.scrollSpy.currentLocaltoc = key\n        }\n      }\n    }\n  }\n  /* Related shortcut */\n  related (e) {\n    if (!e.altKey || !e.shiftKey)\n      return\n    e.preventDefault()\n\n    /* Try to anchor to same section */\n    let anchor = (e.ctrlKey && location.hash.length > 0) ? location.hash : \"\"\n\n    let dom\n    if ((e.code == 'ArrowLeft' || e.code == 'KeyA'))\n      dom = DOM.get('.prev', this.$.related)\n    else if ((e.code == 'ArrowRight' || e.code == 'KeyD'))\n      dom = DOM.get('.next', this.$.related)\n    if (!dom)\n      return\n\n    if (anchor !== \"\") {\n      let href_ = new URL(dom.href)\n      href_.hash = anchor\n      dom.href = href_\n    }\n    dom.dispatchEvent(new Event('click'))\n  }\n  keyup (e) {\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'KeyA':\n      case 'KeyD':\n        this.related(e)\n        break\n    }\n  }\n  keydown (e) {\n    if (!e.altKey || !e.shiftKey)\n      return\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'KeyA':\n      case 'KeyD':\n        if (e.altKey && e.shiftKey)\n          e.preventDefault()\n        return\n    }\n  }\n  /**\n   * Get OS Theme\n   */\n  os_theme () {\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? 'dark' : 'light'\n  }\n  /*\n   * Save current scroll position of DOM elements, to restore after load.\n   */\n  scroll_save () {\n    let positions = {}\n\n    for (const [key, dom] of Object.entries(this.$.preserve_scroll)) {\n      positions[key] = dom.$.scrollTop\n    }\n\n    localStorage.setItem(\"scroll_position\", JSON.stringify(positions))\n  }\n  /*\n   * Restore previous scroll position of DOM elements.\n   */\n  scroll_restore (e) {\n    let positions = localStorage.getItem(\"scroll_position\")\n    if (!positions)\n      return\n\n    positions = JSON.parse(positions)\n    for (const [key, value] of Object.entries(positions)) {\n      if (key in this.$.preserve_scroll)\n        this.$.preserve_scroll[key].$.scrollTop = value\n    }\n  }\n  renew_index(nodes, ev) {\n    nodes.forEach(node => {\n      node.tabIndex = ev.target.checked ? 0 : -1;\n    })\n  }\n  /**\n   * When elements are not visible, it is ideal to make them\n   * not tab selectable.\n   * Add listeners to check changes and update the tab index accordingly.\n   */\n  check_to_tabindex () {\n    let $ = this.$\n    $.show_localtoc = new DOM(\n      DOM.get('#input-show-localtoc')\n    ).onchange(this, this.renew_index, [$.localtoc.$.querySelectorAll('a')])\n    let event = new Event('change');\n    $.show_localtoc.$.dispatchEvent(event)\n  }\n  /**\n   * Pre-init navigation.\n   */\n  construct () {\n    onresize = () => {this.handleResize()}\n    onscroll = () => {this.handleScroll()}\n    document.addEventListener('keyup', (e) => {this.keyup(e)}, false);\n    document.addEventListener('keydown', (e) => {this.keydown(e)}, false);\n\n    this.check_to_tabindex();\n    this.handleResize()\n    this.scroll_restore();\n    addEventListener('beforeunload', (e) => {this.scroll_save(e)}, false);\n\n    this.init()\n  }\n  /**\n   * Init navigation.\n   */\n  init () {\n    this.init_scroll_spy()\n  }\n  /**\n   * De-init navigation.\n   */\n  deinit () {\n    this.deinit_scroll_spy()\n  }\n}\n","\"use strict\";\n\nimport {Toolbox} from './toolbox.js'\nimport {State} from './state.js'\nimport {DOM} from './dom.js'\n\nexport class HotReload {\n  constructor (app) {\n    this.parent = app\n    if (this.parent.state.offline === true)\n      return\n    let $ = this.$ = {}\n    $.toctree = new DOM(DOM.get('.sphinxsidebar .toc-tree'))\n    $.documentwrapper = new DOM(DOM.get('.documentwrapper'))\n    $.bodywrapper = new DOM(DOM.get('.documentwrapper .bodywrapper'))\n    $.content = new DOM(DOM.get('.documentwrapper .body'))\n    $.localtoc = new DOM(DOM.get('.localtoc nav'))\n    $.tocwrapper = new DOM(DOM.get('.localtoc .tocwrapper'))\n    $.related = new DOM(DOM.get('.documentwrapper .related'))\n    $.breadcrumb = DOM.get('.bodywrapper .body-header .breadcrumb')\n\n    this.toctree = new Map()\n    this.location_href\n\n    this.construct()\n  }\n  regen_breadcrumb (dom) {\n    let node = dom.parentElement.parentElement\n    let arr = []\n    while (node && node !== this.$.toctree.$) {\n      node = node.parentElement\n      if (node.tagName == 'LI') {\n        if (node.childNodes[1]) {\n          let elem = node.childNodes[1].childNodes[0]\n          arr.push(elem)\n        }\n      }\n    }\n    let ol = this.$.breadcrumb.firstElementChild\n    ol.innerHTML = ''\n    if (arr.length === 0)\n      this.$.breadcrumb.classList.add('empty')\n    else\n      this.$.breadcrumb.classList.remove('empty')\n    arr.reverse().forEach((elem) => {\n      ol.appendChild(new DOM('li').append(\n        new DOM('a', {\n          'href': elem.href,\n          'innerText': elem.innerText\n        })\n      ).$)\n    })\n  }\n  hot_links () {\n    let attach_load = (elem) => {\n      let url = new URL(elem)\n      url.hash = ''\n      let dom = this.toctree.get(url.href)\n      if (dom === undefined)\n        return\n\n      elem.onclick = (ev) => {\n        ev.preventDefault()\n        this.load(dom, elem.href, true)\n      }\n    }\n    DOM.getAll('a[href]', this.$.related).forEach(attach_load)\n    DOM.getAll('.reference.internal', this.$.content).forEach(attach_load)\n    DOM.getAll('a[href]', this.$.breadcrumb).forEach(attach_load)\n  }\n  replace (dom, url, txt) {\n\n    const parser = new DOMParser()\n    const doc = parser.parseFromString(txt, 'text/html');\n\n    const content = doc.querySelector('.documentwrapper .body');\n    const localtoc = doc.querySelector('.localtoc nav');\n    const related = doc.querySelector('.documentwrapper .related')\n\n    if (!content || !localtoc) {\n      console.warn(\"page: failed to get elements for \", url)\n      return\n    }\n\n    let child, node = dom\n    while (node && node !== this.$.toctree.$) {\n      // if li child is input\n      node.classList.add('current')\n      child = node.firstElementChild\n      if (child !== null && child.type === \"checkbox\")\n        child.checked = true\n      node = node.parentElement\n    }\n\n    this.parent.state.content_root = State.content_root(doc)\n    this.$.content.$.innerHTML = content.innerHTML\n    this.$.localtoc.$.innerHTML = localtoc.innerHTML\n    this.$.related.$.innerHTML = related.innerHTML\n\n    this.regen_breadcrumb(dom)\n    for (const key in this.parent) {\n      if (\"init\" in this.parent[key])\n        this.parent[key].init()\n    }\n    this.$.bodywrapper.classList.remove('fetch')\n    this.$.tocwrapper.classList.remove('fetch')\n    this.$.loader.classList.remove('fetch')\n\n    if (url.hash)\n      document.querySelector(`${url.hash}`)?.scrollIntoView({ behavior: 'auto' })\n    else\n      window.scrollTo({ top: 0, left: 0, behavior: \"instant\" })\n\n    this.hot_links()\n  }\n  load (dom, pathname, new_state) {\n    if (pathname === '#')\n      return\n\n    let current_url = new URL(this.location_href)\n    let request_url = new URL(pathname, current_url)\n    this.location_href = request_url.href\n    if (current_url.pathname === request_url.pathname &&\n        current_url.origin === request_url.origin) {\n      const hash = request_url.hash === '' ? '#top-anchor': request_url.hash\n      if (new_state) {\n        location.hash = hash\n      } else {\n        const dom_ = document.querySelector(hash)\n        if (dom_)\n          dom_.scrollIntoView()\n        history.replaceState(null, \"\", hash)\n      }\n      return\n    }\n    // Push even before fething, so in case of failure the user can easily\n    // reload the page\n    if (new_state)\n      history.pushState(request_url.href, '', request_url.href)\n\n    this.$.tocwrapper.classList.add('fetch')\n    this.$.bodywrapper.classList.add('fetch')\n    const loader_= setTimeout(() => {\n      this.$.loader.classList.add('fetch')\n    }, 500)\n    if (this.$.loader.classList.contains('fail')) {\n      this.$.loader.classList.add('fetch')\n      this.$.loader.classList.remove('fail')\n    }\n\n    setTimeout(() =>  {\n      const keys = Object.keys(this.parent).reverse()\n      keys.forEach(key => {\n        if (\"deinit\" in this.parent[key])\n          this.parent[key].deinit()\n      })\n    }, 120)\n\n    DOM.getAll('.current', this.$.toctree).forEach((elem) => {\n      elem.classList.remove('current')\n    })\n\n    const time_ = Date.now()\n    const response = fetch(\n      new Request(request_url)\n    )\n      .then(response => response)\n      .then(response => response.text())\n      .then(txt => {\n        const timeout = 125 - (Date.now() - time_)\n        const body_= setTimeout(() => {\n          this.replace(dom, request_url, txt)\n        }, timeout)\n      })\n      .catch(error => {\n        this.$.loader.classList.add('fail')\n      })\n      .finally(() => {\n        clearTimeout(loader_)\n      })\n  }\n  init_toctree () {\n    DOM.getAll('.reference.internal', this.$.toctree).forEach((elem) => {\n      elem.href = elem.href.replace(/#$/, '') // Make absolute and strip trailling #\n      this.toctree.set(elem.href, elem)\n\n      elem.onclick = (ev) => {\n        ev.preventDefault()\n        this.load(elem, elem.href, true)\n      }\n    })\n  }\n  init_others () {\n    let logo = DOM.get('.sphinxsidebarwrapper > a')\n    logo.href = logo.href.replace(/#$/, '')\n    logo = DOM.get('header a#logo')\n    logo.href = logo.href.replace(/#$/, '')\n  }\n  init_loader() {\n    let sides = []\n    for (let j = 0; j < 2; j++) {\n      const side = new DOM('div', {\n        'className': `wave-spinner-${j}`\n      });\n      let bars = []\n      for (let i = 0; i < 7; i++) {\n        const bar = new DOM('span');\n        bar.style.animationDelay = `${i * 0.1}s`;\n        bars.push(bar);\n      }\n      side.append(bars)\n      sides.push(side)\n    }\n    sides.push(new DOM('div', {\n      'className': 'text'\n    }))\n    sides.push(new DOM('div', {\n      'className': 'subtext'\n    }))\n\n    this.$.loader = new DOM('div', {\n      'id': 'loader'\n    }).append(sides)\n    this.$.documentwrapper.append(this.$.loader)\n  }\n  popstate (ev) {\n    let url = new URL(location.href)\n    url.hash = ''\n    let dom = this.toctree.get(url.href)\n    if (dom !== undefined)\n      this.load(dom, location.href, false)\n    else // Fallback\n      location.href = location.href\n  }\n  construct () {\n    this.location_href = location.href\n\n    this.init_toctree()\n    this.init_others()\n    this.init_loader()\n    this.hot_links()\n    onpopstate = (ev) => {this.popstate(ev)}\n  }\n}\n","import { State } from './state.js'\nimport { Fetch } from './fetch.js'\nimport { Navigation } from './navigation.js'\nimport { HotReload } from './hot_reload.js'\n\nexport default function App () {\n  window.app = {}\n\n  new State(app)\n  let on_visible = () => {\n    new Fetch(app)\n    new Navigation(app)\n    new HotReload(app)\n  }\n\n  if (document.visibilityState === 'visible')\n    on_visible()\n  else\n    window.addEventListener('focus', on_visible, { once: true })\n}\n\nApp()\n"],"names":["state","repository","undefined","version","offline","theme","content_root","subhost","path","reloaded","metadata","standalone","State","constructor","app","this","init_state","parent","dom","document","querySelector","content","doc","dataset","documentElement","getAttribute","replace","console","warn","doc_root","URL","location","href","no_docs","origin","under_docs","startsWith","subhost_offline","index","search","substring","length","url","org","path_offline","window","performance","navigation","type","TYPE_RELOAD","protocol","localStorage","getItem","DOM","tags","$","createElement","tag","cloneNode","deep","innerText","str","height","offsetHeight","width","offsetWidth","id","value","src","rect","getBoundingClientRect","focus","classList","style","onchange","self","ev","args","e","apply","Array","push","onclick","onauxclick","onup","addEventListener","onmiddleclick","which","ondown","onmove","onevent","event","fun","append","DOMS","forEach","item","test","name","appendChild","remove","removeChilds","child","lastElementChild","removeChild","get","a","b","getAll","querySelectorAll","switchState","_class","cn","contains","add","UID","Date","toString","Math","random","substr","prototypeDetails","summary","details","prototypeInputFile","htmlFor","className","prototypeCheckSwitch","input","prototypeDownload","filename","file","data","reg","format","match","replaceAll","toLowerCase","encodeURIComponent","element","setAttribute","display","body","click","setSelected","i","options","text","selected","lazyUpdate","uid","props","param","key","Fetch","head","callback","construct","fetch","base_url","Request","then","response","ok","json","Error","obj","init_metadata","catch","err","script","rel","cb","load_modules","elem","Navigation","portrait","scrollSpy","localtoc","Map","currentLocaltoc","os_theme","changeTheme","title","removeItem","setItem","preserve_scroll","rightHeader","related","init_scroll_spy","prepareLocaltocMap","deinit_scroll_spy","clear","lt","set","entries","from","filter","span","sort","y","parentNode","has","map","delete","handleResize","ss","iw","innerWidth","innerHeight","previous_size","current_size","Event","show_localtoc","checked","dispatchEvent","handleScroll","key_neg","key_pos","dist","dist_pos","Number","MAX_SAFE_INTEGER","dist_neg","MIN_SAFE_INTEGER","key_","clt_key","altKey","shiftKey","preventDefault","anchor","ctrlKey","hash","code","href_","keyup","keydown","matchMedia","matches","scroll_save","positions","Object","scrollTop","JSON","stringify","scroll_restore","parse","renew_index","nodes","node","tabIndex","target","check_to_tabindex","onresize","onscroll","init","deinit","HotReload","toctree","documentwrapper","bodywrapper","tocwrapper","breadcrumb","location_href","regen_breadcrumb","parentElement","arr","tagName","childNodes","ol","firstElementChild","innerHTML","reverse","hot_links","attach_load","load","txt","DOMParser","parseFromString","loader","scrollIntoView","behavior","scrollTo","top","left","pathname","new_state","current_url","request_url","dom_","history","replaceState","pushState","loader_","setTimeout","keys","time_","now","timeout","error","finally","clearTimeout","init_toctree","init_others","logo","init_loader","sides","j","side","bars","bar","animationDelay","popstate","onpopstate","App","on_visible","visibilityState","once"],"mappings":"mOAeA,MAAMA,EAAQ,CACZC,gBAAYC,EACZC,aAASD,EACTE,aAASF,EACTG,WAAOH,EACPI,kBAAcJ,EACdK,aAASL,EACTM,UAAMN,EACNO,cAAUP,EACVQ,cAAUR,EACVS,gBAAYT,GAMP,MAAMU,EACX,WAAAC,CAAaC,GACXC,KAAKC,WAAWhB,GAEhBe,KAAKE,OAASH,EACdA,EAAId,MAAQA,CACd,CAKA,UAAAC,GACE,IAAIiB,EAAMC,SAASC,cAAc,2BACjC,OAAOF,EAAMA,EAAIG,QAAU,EAC7B,CAQA,OAAAlB,GACE,IAAIe,EAAMC,SAASC,cAAc,wBACjC,OAAY,OAARF,EACK,GAEFA,EAAIG,OACb,CAKA,mBAAOf,CAAcgB,GACnB,IAAIhB,EACAY,EAAMI,EAAIF,cAAc,gCAc5B,OAbY,OAARF,IACFZ,EAAeY,EAAIK,QAAkB,UACnBrB,MAAhBI,IACFA,EAAegB,EAAIE,gBAAgBD,QAAsB,cACvCrB,MAAhBI,IACFY,EAAOI,EAAIF,cAAc,0BACb,OAARF,IACFZ,EAAeY,EAAIO,aAAa,QAAQC,QAAQ,aAAc,MAE9CxB,MAAhBI,IACFqB,QAAQC,KAAK,+BACbtB,EAAe,IAEVA,CACT,CASA,OAAAC,CAASD,EAAcL,GACrB,IAAI4B,EAAa,IAAIC,IAAIxB,EAAcyB,UAAUC,KAC7CC,EAAa,IAAIH,IAAI7B,EAAY8B,SAASG,QAAQF,KAClDG,EAAa,IAAIL,IAAI,QAAQ7B,IAAc8B,SAASG,QAAQF,KAChE,OAAIH,EAASO,WAAWD,GACf,SAASlC,IACT4B,EAASO,WAAWH,GACpB,IAAIhC,IAEJ,EACX,CAOA,eAAAoC,CAAiB/B,EAAcL,GAC7B,IAAI4B,EAAW,IAAIC,IAAIxB,EAAcyB,UAAUC,KAC3CM,EAAQT,EAASU,OAAO,gBAC5B,OAAc,IAAVD,EACKT,EAASW,UAAU,EAAGF,EAAQ,KACvCA,EAAQT,EAASU,OAAOtC,IACV,IAAVqC,EACKT,EAASW,UAAU,EAAGF,EAAQrC,EAAWwC,aADlD,EAGF,CASA,IAAAjC,CAAMF,EAAcC,GAClB,IAAImC,EAAM,IAAIZ,IAAIxB,EAAcyB,UAAUC,KACtCW,EAAM,IAAIb,IAAIvB,EAASwB,SAASG,QAAQF,KAC5C,OAAKU,EAAIN,WAAWO,GAGXD,EAAIhB,QAAQiB,EAAK,IAAIjB,QAAQ,WAAY,IAFzC,EAGX,CAMA,YAAAkB,CAActC,EAAcC,GAC1B,QAAgBL,IAAZK,EACF,OACF,IAAImC,EAAM,IAAIZ,IAAIxB,EAAcyB,UAAUC,KACtCW,EAAMpC,EACV,OAAKmC,EAAIN,WAAWO,GAGXD,EAAIhB,QAAQiB,EAAK,IAAIjB,QAAQ,WAAY,IAFzC,EAGX,CAKA,QAAAjB,GACE,QAAKoC,OAAOC,aAGLA,YAAYC,WAAWC,OAASF,YAAYC,WAAWE,WAChE,CAIA,UAAAtC,GACE,QAAOQ,SAASC,cAAc,0BAChC,CAIA,UAAAJ,CAAYhB,GACVA,EAAMC,WAAac,KAAKd,aACxBD,EAAMG,QAAUY,KAAKZ,UACrBH,EAAMI,QAAU,SAAWyC,OAAOd,SAASmB,SAC3ClD,EAAMK,MAAQ8C,aAAaC,QAAQ,SACnCpD,EAAMM,aAAeM,EAAMN,aAAaa,UACnCnB,EAAMI,SAITJ,EAAMO,QAAUQ,KAAKsB,gBAAgBrC,EAAMM,aAAcN,EAAMC,YAC/DD,EAAMQ,KAAOO,KAAK6B,aAAa5C,EAAMM,aAAcN,EAAMO,WAJzDP,EAAMO,QAAUQ,KAAKR,QAAQP,EAAMM,aAAcN,EAAMC,YACvDD,EAAMQ,KAAOO,KAAKP,KAAKR,EAAMM,aAAcN,EAAMO,UAKnDP,EAAMS,SAAWM,KAAKN,WACtBT,EAAMW,WAAaI,KAAKJ,YAC1B,EClLF,MAAM0C,EACJ,WAAAxC,CAAaK,EAAKoC,GAEhB,GADAvC,KAAKwC,EACa,iBAAPrC,GAKX,GADAH,KAAKwC,EAAIpC,SAASqC,cAActC,GACb,iBAARoC,EAAkB,IAAK,MAAMG,KAAOH,EACzCG,KAAO1C,KAAKwC,EACdxC,KAAKwC,EAAEE,GAAOH,EAAKG,GAEnB1C,KAAKwC,EAAEhC,QAAQkC,GAAOH,EAAKG,QAR7B1C,KAAKwC,EAAIrC,CAUb,CAMA,SAAAwC,CAAWC,GAET,OADW,IAAIN,EAAItC,KAAKwC,EAAEG,UAAUC,GAEtC,CAKA,aAAIC,CAAUC,GACZ9C,KAAKwC,EAAEK,UAAYC,CACrB,CAIA,aAAID,GACF,OAAO7C,KAAKwC,EAAEK,SAChB,CAEA,UAAIE,GACF,OAAO/C,KAAKwC,EAAEQ,YAChB,CAEA,SAAIC,GACF,OAAOjD,KAAKwC,EAAEU,WAChB,CAEA,MAAIC,GACF,OAAOnD,KAAKwC,EAAEW,EAChB,CAEA,MAAIA,CAAIL,GACN9C,KAAKwC,EAAEW,GAAIL,CACb,CAEA,SAAIM,GACF,OAAOpD,KAAKwC,EAAEY,KAChB,CAEA,SAAIA,CAAON,GACT9C,KAAKwC,EAAEY,MAAQN,CACjB,CAEA,OAAIO,GACF,OAAOrD,KAAKwC,EAAEa,GAChB,CAEA,OAAIA,CAAKP,GACP9C,KAAKwC,EAAEa,IAAMP,CACf,CAIA,QAAIQ,GACF,OAAOtD,KAAKwC,EAAEe,uBAChB,CAIA,KAAAC,GACExD,KAAKwC,EAAEgB,OACT,CAEA,aAAIC,GACF,OAAOzD,KAAKwC,EAAEiB,SAChB,CAEA,SAAIC,GACF,OAAO1D,KAAKwC,EAAEkB,KAChB,CAKA,QAAAC,CAAUC,EAAMC,EAAIC,GASlB,OARA9D,KAAKwC,EAAEmB,SAAYI,SACE,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,KAGZ9D,IACT,CAKA,OAAAmE,CAASP,EAAMC,EAAIC,GASjB,OARA9D,KAAKwC,EAAE2B,QAAWJ,SACG,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,KAGZ9D,IACT,CAKA,UAAAoE,CAAYR,EAAMC,EAAIC,GASpB,OARA9D,KAAKwC,EAAE4B,WAAcL,SACA,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,KAGZ9D,IACT,CAKA,IAAAqE,CAAMT,EAAMC,EAAIC,GASd,OARA9D,KAAKwC,EAAE8B,iBAAiB,UAAYP,SACf,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,MAGZ9D,IACT,CAKA,aAAAuE,CAAeX,EAAMC,EAAIC,GAYvB,OAXA9D,KAAKwC,EAAE8B,iBAAiB,UAAYP,IACjB,IAAZA,EAAES,aAGY,IAARV,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,OAGZ9D,IACT,CAKA,MAAAyE,CAAQb,EAAMC,EAAIC,GAShB,OARA9D,KAAKwC,EAAE8B,iBAAiB,YAAcP,SACjB,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,MAGZ9D,IACT,CAKA,MAAA0E,CAAQd,EAAMC,EAAIC,GAShB,OARA9D,KAAKwC,EAAE8B,iBAAiB,YAAcP,SACjB,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,MAGZ9D,IACT,CAOA,OAAA2E,CAASC,EAAOhB,EAAMiB,EAAKf,GASzB,OARA9D,KAAKwC,EAAE8B,iBAAiBM,EAAQb,SACX,IAARD,EACTe,EAAIb,MAAMJ,EAAM,CAACG,IACVD,EAAKhE,aAAemE,QAC3BH,EAAKI,KAAKH,GACVc,EAAIb,MAAMJ,EAAME,MAGb9D,IACT,CAKA,MAAA8E,CAAQC,GAYN,OAXIA,EAAKjF,aAAemE,QACtBc,EAAO,CAACA,IAEVA,EAAKC,QAAUC,IACT,kBAAkBC,KAAKD,EAAKnF,YAAYqF,MAC1CnF,KAAKwC,EAAE4C,YAAYH,GACG,iBAARA,GACP,kBAAkBC,KAAKD,EAAKzC,EAAE1C,YAAYqF,OACjDnF,KAAKwC,EAAE4C,YAAYH,EAAKzC,KAGrBxC,IACT,CAIA,SACEA,KAAKwC,EAAE6C,QAET,CAIA,YAAAC,GACE,IAAIC,EAAQvF,KAAKwC,EAAEgD,iBACnB,KAAOD,GACLvF,KAAKwC,EAAEiD,YAAYF,GACnBA,EAAQvF,KAAKwC,EAAEgD,iBAEjB,OAAOxF,IACT,CAMA,UAAO0F,CAAKC,EAAGC,GAEb,YAAoB,KADpBA,EAAIA,aAAatD,EAAMsD,EAAEpD,EAAIoD,GACMxF,SAASC,cAAesF,GAAKC,EAAEvF,cAAcsF,EAClF,CAMA,aAAOE,CAAOF,EAAGC,GAEf,MAAoB,iBADpBA,EAAIA,aAAatD,EAAMsD,EAAEpD,EAAIoD,GACGA,EAAEE,iBAAiBH,GAAKD,IAAIE,GAAGE,iBAAiBH,EAClF,CAMA,kBAAOI,CAAaH,EAAGI,GAErB,IAAIC,EAAe9G,MAAV6G,EAAsBA,EAAS,MADxCJ,EAAIA,aAAatD,EAAMsD,EAAEpD,EAAIoD,GAEvBnC,UAAUyC,SAASD,GACvBL,EAAEnC,UAAU4B,OAAOY,GAEnBL,EAAEnC,UAAU0C,IAAIF,EACpB,CAIA,UAAOG,GACL,QAAS,IAAIC,MAAMC,SAAS,IAAMC,KAAKC,SAASF,SAAS,IAAIG,OAAO,EACtE,CASA,uBAAOC,CAAkB5D,GACvB,IAAI6D,EAAU,IAAIrE,EAAI,UAAW,CAACO,UAAUC,EAAID,YAC5C+D,EAAU,IAAItE,EAAI,UAAW,CAACa,GAAGL,EAAIK,GAAIgC,KAAKrC,EAAIK,KACnD2B,OAAO6B,GAaV,OAXmBxH,MAAf2D,EAAI6B,SACN7B,EAAI6B,QAAQK,QAAQJ,IAClBA,EAAMd,KAAKI,KAAK0C,EAAQpE,GACxBmE,EAAQhC,QACNC,EAAMA,MACNA,EAAMhB,KACNgB,EAAMC,IACND,EAAMd,QAIL8C,CACT,CAQA,yBAAOC,CAAoB/D,GACzB,OAAO,IAAIR,EAAI,QAAS,CACtBwE,QAAQ,GAAGhE,EAAIK,WACfA,GAAGL,EAAIK,GACP4D,UAAUjE,EAAIiE,UACdlE,UAAUC,EAAID,YACXiC,OACD,IAAIxC,EAAI,QAAS,CAACa,GAAG,GAAGL,EAAIK,WAAYlB,KAAK,SAEnD,CASA,2BAAO+E,CAAsBlE,GAC3B,IAAImE,EAAQ,IAAI3E,EAAI,QAAS,CAC3Ba,GAAGL,EAAIK,GACPgC,KAAKrC,EAAIK,GACT4D,UAAU,cACV9E,KAAK,WACLmB,OAAM,IAkBR,MAAO,CAAC6D,EAfQ,IAAI3E,EAAI,MAAO,CAACyE,UAAUjE,EAAIiE,YAC3CjC,OAAO,CACN,IAAIxC,EAAI,OACLwC,OAAO,CACN,IAAIxC,EAAI,QAAS,CACbyE,UAAU,cACVD,QAAQhE,EAAIK,GACZN,UAAUC,EAAID,YACbiC,OAAO,CACRmC,EACA,IAAI3E,EAAI,cAMtB,CAMA,wBAAO4E,CAAmBC,EAAUC,GAClC,IAAIC,EACAC,EAAM,iCACV,IAAKA,EAAIpC,KAAKiC,GACZ,OAEF,IAAII,EAASJ,EAASK,MAAMF,GAAK,GAMjC,OALAH,EAAWA,EACRM,WAAW,IAAI,KACfA,WAAW,IAAI,KACfC,cAEKH,GACN,IAAK,MACHF,EAAO,wCAA0CM,mBAAmBP,GACpE,MACF,IAAK,KACHC,EAAO,kCAAoCM,mBAAmBP,GAC9D,MACF,IAAK,OACHC,EAAO,gCAAkCM,mBAAmBP,GAC5D,MACF,IAAK,MACHC,EAAO,+BAAiCM,mBAAmBP,GAC3D,MACF,IAAK,MACHC,EAAO,oCAAsCM,mBAAmBP,GAChE,MACF,IAAK,MACHC,EAAOD,EAGX,IAAIQ,EAAUxH,SAASqC,cAAc,KACrCmF,EAAQC,aAAa,OAAQR,GAC7BO,EAAQC,aAAa,WAAYV,GACjCS,EAAQlE,MAAMoE,QAAU,OAExB1H,SAAS2H,KAAK3C,YAAYwC,GAC1BA,EAAQI,QACR5H,SAAS2H,KAAKtC,YAAYmC,EAC5B,CAMA,kBAAOK,CAAa9H,EAAKiD,GACvB,IAAK,IAAI8E,EAAI,EAAGA,EAAI/H,EAAIqC,EAAE2F,QAAQzG,OAAQwG,IACxC,GAAI/H,EAAIqC,EAAE2F,QAAQD,GAAGE,MAAQhF,EAE3B,YADAjD,EAAIqC,EAAE2F,QAAQD,GAAGG,UAAW,EAIlC,CAUA,iBAAOC,CAAYnI,EAAKoI,EAAKC,EAAOC,GAClCA,EAAiBtJ,MAATsJ,EAAqB,YAAcA,EAC3C,IAAIb,EAAUtF,EAAIoD,IAAI,cAAc6C,MAASpI,GAC7C,IAAK,MAAMuI,KAAOF,EAChBlG,EAAIoD,IAAI,IAAIgD,IAAOd,GAASa,GAASD,EAAME,EAE/C,ECrbK,MAAMC,EACX,WAAA7I,CAAaC,IACHC,KAAKwC,EAAI,CAAA,GACfoG,KAAO,IAAItG,EAAIA,EAAIoD,IAAI,SAEzB1F,KAAKE,OAASH,EACdC,KAAK6I,SAAW,GAEhB7I,KAAK8I,YAEL/I,EAAIgJ,MAAQ/I,IACd,CAgBA,SAAA8I,GACE,IAAI7J,EAAQe,KAAKE,OAAOjB,MACxB,MAAM+J,EAA8B,KAAlB/J,EAAMO,UAAoC,IAAlBP,EAAMI,QAC9C,IAAI0B,IAAI,+CACR,IAAIA,IAAI,WAAY,IAAIA,IAAI9B,EAAMO,QAASwB,SAASG,SAKrC4H,MACf,IAAIE,QAAQ,IAAIlI,IAAI,gBAAiBiI,EAAS,OAE7CE,KAAKC,GAAYA,GACjBD,KAAKC,IACJ,IAAoB,IAAhBA,EAASC,GACX,OAAOD,EAASE,OAEhB,MAAM,IAAIC,QAEbJ,KAAKK,GAAOvJ,KAAKwJ,cAAcD,EAAKP,IACpCS,MAAMC,OAET,IAAIC,EAAS,IAAIrH,EAAI,SAAU,CAC7Be,IAAO,IAAItC,IAAI,uBAAwBiI,EAAS,OAElDhJ,KAAKwC,EAAEoG,KAAK9D,OAAO6E,GACnB,IAAIjG,EAAQ,IAAIpB,EAAI,OAAQ,CAC1BsH,IAAO,aACP3H,KAAQ,WACRhB,KAAQ,IAAIF,IAAI,wBAAyBiI,EAAS,OAEpDhJ,KAAKwC,EAAEoG,KAAK9D,OAAOpB,EACrB,CAIA,IAAAwF,CAAML,GACA7I,KAAKE,OAAOjB,MAAMU,SACpBkJ,IAEA7I,KAAK6I,SAAS3E,KAAK2E,EACvB,CAIA,aAAAW,CAAeD,EAAK5H,GAClB3B,KAAKE,OAAOjB,MAAMU,SAAW4J,EAC7BvJ,KAAK6I,SAAS7D,QAAQ6E,GAAMA,KAExB,YAAaN,GACfvJ,KAAK8J,aAAaP,EAAa,QAAG5H,EACtC,CAMA,YAAAmI,CAAcP,EAAK5H,GACXA,aAAeZ,KAIrBY,EAAM,IAAIZ,IAAI,UAAWY,EAAI,KAEzB,eAAgB4H,GAClBA,EAAgB,WAAEvE,QAAS+E,IACzB,GAAa,iBAATA,EACF,OACF,IAAIJ,EAAS,IAAIrH,EAAI,SAAU,CAC7Be,IAAO,IAAItC,IAAIgJ,EAAMpI,EAAI,OAE3B3B,KAAKwC,EAAEoG,KAAK9D,OAAO6E,KAGnB,eAAgBJ,GAClBA,EAAgB,WAAEvE,QAAS+E,IACzB,GAAa,kBAATA,EACF,OACF,IAAIrG,EAAQ,IAAIpB,EAAI,OAAQ,CAC1BsH,IAAO,aACP3H,KAAQ,WACRhB,KAAQ,IAAIF,IAAIgJ,EAAMpI,EAAI,OAE5B3B,KAAKwC,EAAEoG,KAAK9D,OAAOpB,MAxBrB9C,QAAQC,KAAK,qBAAsBc,EA2BvC,ECjHK,MAAMqI,EACX,WAAAlK,CAAaC,GACXC,KAAKE,OAASH,EAEdC,KAAKiK,UAAW,EAChBjK,KAAKkK,UAAY,CACfC,SAAU,IAAIC,IACdC,qBAAiBlL,GAGnB,IAAIqD,EAAIxC,KAAKwC,EAAI,CAAA,EACjBA,EAAEuF,KAAO,IAAIzF,EAAIA,EAAIoD,IAAI,SACzBlD,EAAElC,QAAU,IAAIgC,EAAIA,EAAIoD,IAAI,2BAC5BlD,EAAE2H,SAAW,IAAI7H,EAAIA,EAAIoD,IAAI,sBAEG,OAA5B1F,KAAKE,OAAOjB,MAAMK,QACpBU,KAAKE,OAAOjB,MAAMK,MAAQU,KAAKsK,YACjC9H,EAAEuF,KAAKtE,UAAU0C,IAAI,SACjBnG,KAAKE,OAAOjB,MAAMK,QAAUU,KAAKsK,YACnC9H,EAAEuF,KAAKtE,UAAU0C,IAAInG,KAAKE,OAAOjB,MAAMK,OAE1CkD,EAAE+H,YAAc,IAAIjI,EAAI,SAAU,CAC/ByE,UAAuC,SAA5B/G,KAAKE,OAAOjB,MAAMK,MAAmB,UAAY,OAC5D6D,GAAG,QACHqH,MAAM,iBACLrG,QAAQnE,KAAM,KACfwC,EAAEuF,KAAKtE,UAAU4B,OAAOrF,KAAKE,OAAOjB,MAAMK,OAC1CU,KAAKE,OAAOjB,MAAMK,MAAoC,SAA5BU,KAAKE,OAAOjB,MAAMK,MAAmB,QAAU,OACrEU,KAAKsK,YAActK,KAAKE,OAAOjB,MAAMK,MACvC8C,aAAaqI,WAAW,UAExBrI,aAAasI,QAAQ,QAAS1K,KAAKE,OAAOjB,MAAMK,OAChDkD,EAAEuF,KAAKtE,UAAU0C,IAAInG,KAAKE,OAAOjB,MAAMK,UAI3CkD,EAAEmI,gBAAkB,CAAA,EACpBnI,EAAEmI,gBAAsC,qBAAI,IAAIrI,EAAIA,EAAIoD,IAAI,0BAE5DlD,EAAEoI,YAAc,IAAItI,EAAIA,EAAIoD,IAAI,+BAA+BZ,OAAO,CAACtC,EAAE+H,cAEzE/H,EAAEqI,QAAU,IAAIvI,EAAIA,EAAIoD,IAAI,aAE5B1F,KAAK8I,YAEL/I,EAAIiC,WAAahC,IACnB,CAIA,eAAA8K,GAC4B,OAAtB9K,KAAKwC,EAAE2H,SAAS3H,GAClBxC,KAAK+K,oBAET,CAIA,iBAAAC,GACEhL,KAAKkK,UAAUC,SAASc,QACxBjL,KAAKkK,UAAUG,qBAAkBlL,CACnC,CAIA,kBAAA4L,GACE,IAAIrC,EAAM,GACNwC,EAAKlL,KAAKkK,UAAUC,SACxB7H,EAAIuD,OAAO,sBAAuB7F,KAAKwC,EAAE2H,UAAUnF,QAAS+E,IAC1DrB,EAAMqB,EAAKrJ,aAAa,QAAQe,UAAU,GAC1CyJ,EAAGC,IAAIzC,EAAK,CAACqB,OAAM5K,MAGrB,IAAIiM,EAAU,GAEd,IAAK,IAAIlD,EAAI,EAAGA,EAAI,EAAGA,IACrBkD,EAAQlH,QAAQ5B,EAAIuD,OAAO,cAAcqC,IAAKlI,KAAKwC,EAAElC,UAGvD8K,EAAQlH,QAAQD,MAAMoH,KACpB/I,EAAIuD,OAAO,sCAAuC7F,KAAKwC,EAAElC,UACtDgL,OAAOC,GAAQA,EAAKpI,GAAG9B,WAAW,eAEvC+J,EAAUA,EAAQI,KAAK,CAAC7F,EAAGC,IAAMD,EAAEpC,wBAAwBkI,EAAI7F,EAAErC,wBAAwBkI,GACzFL,EAAQpG,QAAS+E,IACfrB,EAAMqB,EAAK5G,IAAM4G,EAAK2B,WAAWvI,GAC7B+H,EAAGS,IAAIjD,IACTwC,EAAGC,IAAIzC,EAAK,CAACwC,EAAGxF,IAAIgD,GAAK,GAAIqB,MAIjCmB,EAAGlG,QAAQ,CAAC5B,EAAOsF,EAAKkD,UACLzM,IAAbiE,EAAM,IACRwI,EAAIC,OAAOnD,IAEjB,CAEA,YAAAoD,GACE,MACMC,EAAK,CAAC,GAAI,GAAI,GAAI,KAClBC,EAAKlK,OAAOmK,WAElBjM,KAAKiK,SAAWnI,OAAOoK,YAAcpK,OAAOmK,WAE5CjM,KAAKmM,cAAgBnM,KAAKoM,aAC1B,IAAK,IAAIlE,EAAI,EAAGA,EAAI6D,EAAGrK,UACjBsK,EARK,GAQCD,EAAG7D,IADgBA,IAG7BlI,KAAKoM,aAAelE,EAEtB,GAAIlI,KAAKmM,gBAAkBnM,KAAKoM,eAGN,IAAtBpM,KAAKoM,cAA6C,IAAvBpM,KAAKmM,eAAqB,CACvD,IAAIvH,EAAQ,IAAIyH,MAAM,UACtBrM,KAAKwC,EAAE8J,cAAc9J,EAAE+J,UAAUP,EAjBxB,GAiB8BD,EAAG,IAC1C/L,KAAKwC,EAAE8J,cAAc9J,EAAEgK,cAAc5H,EACvC,CACF,CAEA,YAAA6H,GACE,GAA0B,OAAtBzM,KAAKwC,EAAE2H,SAAS3H,EAAY,CAE9B,IAAIkK,EAASC,EAASjE,EAAKkE,EACvBC,EAAWC,OAAOC,iBAClBC,EAAWF,OAAOG,iBAClB/B,EAAKlL,KAAKkK,UAAUC,SAoBxB,GAnBAe,EAAGlG,QAAQ,CAAC5B,EAAO8J,EAAMtB,KACvBgB,EAAOxJ,EAAM,GAAGG,wBAAwBkI,EACpCmB,GAAQ,EACNA,EAAOI,IACTA,EAAWJ,EACXF,EAAWQ,GAGTN,EAAOC,IACTA,EAAWD,EACXD,EAAWO,KAKfxE,EADEmE,EAAW,GACPF,EAEAD,OAEIvN,IAARuJ,EAAmB,CACrB,IAAIyE,EAAUnN,KAAKkK,UAAUG,gBACzB3B,IAAQyE,IACVjC,EAAGxF,IAAIgD,GAAK,GAAGjF,UAAU0C,IAAI,gBACbhH,IAAZgO,GACFjC,EAAGxF,IAAIyH,GAAS,GAAG1J,UAAU4B,OAAO,WAEtCrF,KAAKkK,UAAUG,gBAAkB3B,EAErC,CACF,CACF,CAEA,OAAAmC,CAAS9G,GACP,IAAKA,EAAEqJ,SAAWrJ,EAAEsJ,SAClB,OACFtJ,EAAEuJ,iBAGF,IAEInN,EAFAoN,EAAUxJ,EAAEyJ,SAAWxM,SAASyM,KAAK/L,OAAS,EAAKV,SAASyM,KAAO,GAOvE,GAJe,aAAV1J,EAAE2J,MAAiC,QAAV3J,EAAE2J,KAC9BvN,EAAMmC,EAAIoD,IAAI,QAAS1F,KAAKwC,EAAEqI,SACZ,cAAV9G,EAAE2J,MAAkC,QAAV3J,EAAE2J,OACpCvN,EAAMmC,EAAIoD,IAAI,QAAS1F,KAAKwC,EAAEqI,UAC3B1K,EAAL,CAGA,GAAe,KAAXoN,EAAe,CACjB,IAAII,EAAQ,IAAI5M,IAAIZ,EAAIc,MACxB0M,EAAMF,KAAOF,EACbpN,EAAIc,KAAO0M,CACb,CACAxN,EAAIqM,cAAc,IAAIH,MAAM,SAP1B,CAQJ,CACA,KAAAuB,CAAO7J,GACL,OAAQA,EAAE2J,MACR,IAAK,YACL,IAAK,aACL,IAAK,OACL,IAAK,OACH1N,KAAK6K,QAAQ9G,GAGnB,CACA,OAAA8J,CAAS9J,GACP,GAAKA,EAAEqJ,QAAWrJ,EAAEsJ,SAEpB,OAAQtJ,EAAE2J,MACR,IAAK,YACL,IAAK,aACL,IAAK,OACL,IAAK,OAGH,YAFI3J,EAAEqJ,QAAUrJ,EAAEsJ,UAChBtJ,EAAEuJ,kBAGV,CAIA,QAAAhD,GACE,OAAOxI,OAAOgM,WAAW,gCAAgCC,QAAU,OAAS,OAC9E,CAIA,WAAAC,GACE,IAAIC,EAAY,CAAA,EAEhB,IAAK,MAAOvF,EAAKvI,KAAQ+N,OAAO9C,QAAQpL,KAAKwC,EAAEmI,iBAC7CsD,EAAUvF,GAAOvI,EAAIqC,EAAE2L,UAGzB/L,aAAasI,QAAQ,kBAAmB0D,KAAKC,UAAUJ,GACzD,CAIA,cAAAK,CAAgBvK,GACd,IAAIkK,EAAY7L,aAAaC,QAAQ,mBACrC,GAAK4L,EAAL,CAGAA,EAAYG,KAAKG,MAAMN,GACvB,IAAK,MAAOvF,EAAKtF,KAAU8K,OAAO9C,QAAQ6C,GACpCvF,KAAO1I,KAAKwC,EAAEmI,kBAChB3K,KAAKwC,EAAEmI,gBAAgBjC,GAAKlG,EAAE2L,UAAY/K,EAL5C,CAOJ,CACA,WAAAoL,CAAYC,EAAO5K,GACjB4K,EAAMzJ,QAAQ0J,IACZA,EAAKC,SAAW9K,EAAG+K,OAAOrC,QAAU,GAAI,GAE5C,CAMA,iBAAAsC,GACE,IAAIrM,EAAIxC,KAAKwC,EACbA,EAAE8J,cAAgB,IAAIhK,EACpBA,EAAIoD,IAAI,yBACR/B,SAAS3D,KAAMA,KAAKwO,YAAa,CAAChM,EAAE2H,SAAS3H,EAAEsD,iBAAiB,OAClE,IAAIlB,EAAQ,IAAIyH,MAAM,UACtB7J,EAAE8J,cAAc9J,EAAEgK,cAAc5H,EAClC,CAIA,SAAAkE,GACEgG,SAAW,KAAO9O,KAAK8L,gBACvBiD,SAAW,KAAO/O,KAAKyM,gBACvBrM,SAASkE,iBAAiB,QAAUP,IAAO/D,KAAK4N,MAAM7J,KAAK,GAC3D3D,SAASkE,iBAAiB,UAAYP,IAAO/D,KAAK6N,QAAQ9J,KAAK,GAE/D/D,KAAK6O,oBACL7O,KAAK8L,eACL9L,KAAKsO,iBACLhK,iBAAiB,eAAiBP,IAAO/D,KAAKgO,YAAYjK,KAAK,GAE/D/D,KAAKgP,MACP,CAIA,IAAAA,GACEhP,KAAK8K,iBACP,CAIA,MAAAmE,GACEjP,KAAKgL,mBACP,ECzRK,MAAMkE,EACX,WAAApP,CAAaC,GAEX,GADAC,KAAKE,OAASH,GACoB,IAA9BC,KAAKE,OAAOjB,MAAMI,QACpB,OACF,IAAImD,EAAIxC,KAAKwC,EAAI,CAAA,EACjBA,EAAE2M,QAAU,IAAI7M,EAAIA,EAAIoD,IAAI,6BAC5BlD,EAAE4M,gBAAkB,IAAI9M,EAAIA,EAAIoD,IAAI,qBACpClD,EAAE6M,YAAc,IAAI/M,EAAIA,EAAIoD,IAAI,kCAChClD,EAAElC,QAAU,IAAIgC,EAAIA,EAAIoD,IAAI,2BAC5BlD,EAAE2H,SAAW,IAAI7H,EAAIA,EAAIoD,IAAI,kBAC7BlD,EAAE8M,WAAa,IAAIhN,EAAIA,EAAIoD,IAAI,0BAC/BlD,EAAEqI,QAAU,IAAIvI,EAAIA,EAAIoD,IAAI,8BAC5BlD,EAAE+M,WAAajN,EAAIoD,IAAI,yCAEvB1F,KAAKmP,QAAU,IAAI/E,IACnBpK,KAAKwP,cAELxP,KAAK8I,WACP,CACA,gBAAA2G,CAAkBtP,GAChB,IAAIuO,EAAOvO,EAAIuP,cAAcA,cACzBC,EAAM,GACV,KAAOjB,GAAQA,IAAS1O,KAAKwC,EAAE2M,QAAQ3M,GAErC,GADAkM,EAAOA,EAAKgB,cACQ,MAAhBhB,EAAKkB,SACHlB,EAAKmB,WAAW,GAAI,CACtB,IAAI9F,EAAO2E,EAAKmB,WAAW,GAAGA,WAAW,GACzCF,EAAIzL,KAAK6F,EACX,CAGJ,IAAI+F,EAAK9P,KAAKwC,EAAE+M,WAAWQ,kBAC3BD,EAAGE,UAAY,GACI,IAAfL,EAAIjO,OACN1B,KAAKwC,EAAE+M,WAAW9L,UAAU0C,IAAI,SAEhCnG,KAAKwC,EAAE+M,WAAW9L,UAAU4B,OAAO,SACrCsK,EAAIM,UAAUjL,QAAS+E,IACrB+F,EAAG1K,YAAY,IAAI9C,EAAI,MAAMwC,OAC3B,IAAIxC,EAAI,IAAK,CACXrB,KAAQ8I,EAAK9I,KACb4B,UAAakH,EAAKlH,aAEpBL,IAEN,CACA,SAAA0N,GACE,IAAIC,EAAepG,IACjB,IAAIpI,EAAM,IAAIZ,IAAIgJ,GAClBpI,EAAI8L,KAAO,GACX,IAAItN,EAAMH,KAAKmP,QAAQzJ,IAAI/D,EAAIV,WACnB9B,IAARgB,IAGJ4J,EAAK5F,QAAWN,IACdA,EAAGyJ,iBACHtN,KAAKoQ,KAAKjQ,EAAK4J,EAAK9I,MAAM,MAG9BqB,EAAIuD,OAAO,UAAW7F,KAAKwC,EAAEqI,SAAS7F,QAAQmL,GAC9C7N,EAAIuD,OAAO,sBAAuB7F,KAAKwC,EAAElC,SAAS0E,QAAQmL,GAC1D7N,EAAIuD,OAAO,UAAW7F,KAAKwC,EAAE+M,YAAYvK,QAAQmL,EACnD,CACA,OAAAxP,CAASR,EAAKwB,EAAK0O,GAEjB,MACM9P,GADS,IAAI+P,WACAC,gBAAgBF,EAAK,aAElC/P,EAAUC,EAAIF,cAAc,0BAC5B8J,EAAW5J,EAAIF,cAAc,iBAC7BwK,EAAUtK,EAAIF,cAAc,6BAElC,IAAKC,IAAY6J,EAEf,YADAvJ,QAAQC,KAAK,oCAAqCc,GAIpD,IAAI4D,EAAOmJ,EAAOvO,EAClB,KAAOuO,GAAQA,IAAS1O,KAAKwC,EAAE2M,QAAQ3M,GAErCkM,EAAKjL,UAAU0C,IAAI,WACnBZ,EAAQmJ,EAAKqB,kBACC,OAAVxK,GAAiC,aAAfA,EAAMtD,OAC1BsD,EAAMgH,SAAU,GAClBmC,EAAOA,EAAKgB,cAGd1P,KAAKE,OAAOjB,MAAMM,aAAeM,EAAMN,aAAagB,GACpDP,KAAKwC,EAAElC,QAAQkC,EAAEwN,UAAY1P,EAAQ0P,UACrChQ,KAAKwC,EAAE2H,SAAS3H,EAAEwN,UAAY7F,EAAS6F,UACvChQ,KAAKwC,EAAEqI,QAAQrI,EAAEwN,UAAYnF,EAAQmF,UAErChQ,KAAKyP,iBAAiBtP,GACtB,IAAK,MAAMuI,KAAO1I,KAAKE,OACjB,SAAUF,KAAKE,OAAOwI,IACxB1I,KAAKE,OAAOwI,GAAKsG,OAErBhP,KAAKwC,EAAE6M,YAAY5L,UAAU4B,OAAO,SACpCrF,KAAKwC,EAAE8M,WAAW7L,UAAU4B,OAAO,SACnCrF,KAAKwC,EAAEgO,OAAO/M,UAAU4B,OAAO,SAE3B1D,EAAI8L,KACNrN,SAASC,cAAc,GAAGsB,EAAI8L,SAASgD,eAAe,CAAEC,SAAU,SAElE5O,OAAO6O,SAAS,CAAEC,IAAK,EAAGC,KAAM,EAAGH,SAAU,YAE/C1Q,KAAKkQ,WACP,CACA,IAAAE,CAAMjQ,EAAK2Q,EAAUC,GACnB,GAAiB,MAAbD,EACF,OAEF,IAAIE,EAAc,IAAIjQ,IAAIf,KAAKwP,eAC3ByB,EAAc,IAAIlQ,IAAI+P,EAAUE,GAEpC,GADAhR,KAAKwP,cAAgByB,EAAYhQ,KAC7B+P,EAAYF,WAAaG,EAAYH,UACrCE,EAAY7P,SAAW8P,EAAY9P,OAAQ,CAC7C,MAAMsM,EAA4B,KAArBwD,EAAYxD,KAAc,cAAewD,EAAYxD,KAClE,GAAIsD,EACF/P,SAASyM,KAAOA,MACX,CACL,MAAMyD,EAAO9Q,SAASC,cAAcoN,GAChCyD,GACFA,EAAKT,iBACPU,QAAQC,aAAa,KAAM,GAAI3D,EACjC,CACA,MACF,CAGIsD,GACFI,QAAQE,UAAUJ,EAAYhQ,KAAM,GAAIgQ,EAAYhQ,MAEtDjB,KAAKwC,EAAE8M,WAAW7L,UAAU0C,IAAI,SAChCnG,KAAKwC,EAAE6M,YAAY5L,UAAU0C,IAAI,SACjC,MAAMmL,EAASC,WAAW,KACxBvR,KAAKwC,EAAEgO,OAAO/M,UAAU0C,IAAI,UAC3B,KACCnG,KAAKwC,EAAEgO,OAAO/M,UAAUyC,SAAS,UACnClG,KAAKwC,EAAEgO,OAAO/M,UAAU0C,IAAI,SAC5BnG,KAAKwC,EAAEgO,OAAO/M,UAAU4B,OAAO,SAGjCkM,WAAW,KACIrD,OAAOsD,KAAKxR,KAAKE,QAAQ+P,UACjCjL,QAAQ0D,IACP,WAAY1I,KAAKE,OAAOwI,IAC1B1I,KAAKE,OAAOwI,GAAKuG,YAEpB,KAEH3M,EAAIuD,OAAO,WAAY7F,KAAKwC,EAAE2M,SAASnK,QAAS+E,IAC9CA,EAAKtG,UAAU4B,OAAO,aAGxB,MAAMoM,EAAQpL,KAAKqL,MACF3I,MACf,IAAIE,QAAQgI,IAEX/H,KAAKC,GAAYA,GACjBD,KAAKC,GAAYA,EAASf,QAC1Bc,KAAKmH,IACJ,MAAMsB,EAAU,KAAOtL,KAAKqL,MAAQD,GACvBF,WAAW,KACtBvR,KAAKW,QAAQR,EAAK8Q,EAAaZ,IAC9BsB,KAEJlI,MAAMmI,IACL5R,KAAKwC,EAAEgO,OAAO/M,UAAU0C,IAAI,UAE7B0L,QAAQ,KACPC,aAAaR,IAEnB,CACA,YAAAS,GACEzP,EAAIuD,OAAO,sBAAuB7F,KAAKwC,EAAE2M,SAASnK,QAAS+E,IACzDA,EAAK9I,KAAO8I,EAAK9I,KAAKN,QAAQ,KAAM,IACpCX,KAAKmP,QAAQhE,IAAIpB,EAAK9I,KAAM8I,GAE5BA,EAAK5F,QAAWN,IACdA,EAAGyJ,iBACHtN,KAAKoQ,KAAKrG,EAAMA,EAAK9I,MAAM,KAGjC,CACA,WAAA+Q,GACE,IAAIC,EAAO3P,EAAIoD,IAAI,6BACnBuM,EAAKhR,KAAOgR,EAAKhR,KAAKN,QAAQ,KAAM,IACpCsR,EAAO3P,EAAIoD,IAAI,iBACfuM,EAAKhR,KAAOgR,EAAKhR,KAAKN,QAAQ,KAAM,GACtC,CACA,WAAAuR,GACE,IAAIC,EAAQ,GACZ,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMC,EAAO,IAAI/P,EAAI,MAAO,CAC1ByE,UAAa,gBAAgBqL,MAE/B,IAAIE,EAAO,GACX,IAAK,IAAIpK,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMqK,EAAM,IAAIjQ,EAAI,QACpBiQ,EAAI7O,MAAM8O,eAAwB,GAAJtK,EAAH,IAC3BoK,EAAKpO,KAAKqO,EACZ,CACAF,EAAKvN,OAAOwN,GACZH,EAAMjO,KAAKmO,EACb,CACAF,EAAMjO,KAAK,IAAI5B,EAAI,MAAO,CACxByE,UAAa,UAEfoL,EAAMjO,KAAK,IAAI5B,EAAI,MAAO,CACxByE,UAAa,aAGf/G,KAAKwC,EAAEgO,OAAS,IAAIlO,EAAI,MAAO,CAC7Ba,GAAM,WACL2B,OAAOqN,GACVnS,KAAKwC,EAAE4M,gBAAgBtK,OAAO9E,KAAKwC,EAAEgO,OACvC,CACA,QAAAiC,CAAU5O,GACR,IAAIlC,EAAM,IAAIZ,IAAIC,SAASC,MAC3BU,EAAI8L,KAAO,GACX,IAAItN,EAAMH,KAAKmP,QAAQzJ,IAAI/D,EAAIV,WACnB9B,IAARgB,EACFH,KAAKoQ,KAAKjQ,EAAKa,SAASC,MAAM,GAE9BD,SAASC,KAAOD,SAASC,IAC7B,CACA,SAAA6H,GACE9I,KAAKwP,cAAgBxO,SAASC,KAE9BjB,KAAK+R,eACL/R,KAAKgS,cACLhS,KAAKkS,cACLlS,KAAKkQ,YACLwC,WAAc7O,IAAQ7D,KAAKyS,SAAS5O,GACtC,EC7Oa,SAAS8O,IACtB7Q,OAAO/B,IAAM,CAAA,EAEb,IAAIF,EAAME,KACV,IAAI6S,EAAa,KACf,IAAIjK,EAAM5I,KACV,IAAIiK,EAAWjK,KACf,IAAImP,EAAUnP,MAGiB,YAA7BK,SAASyS,gBACXD,IAEA9Q,OAAOwC,iBAAiB,QAASsO,EAAY,CAAEE,MAAM,GACzD,QAEAH"}