{"version":3,"file":"app.umd.js","sources":["../scripts/state.js","../scripts/toolbox.js","../scripts/dom.js","../scripts/fetch.js","../scripts/navigation.js","../scripts/app.js"],"sourcesContent":["\"use strict\";\n\n/**\n * version: v0.0.1, main, staging/new_feature\n * offline: if no webserver, direct file://\n * theme: dark/light\n * content_root: relative path to reach the current doc root page\n * metadata: fetched by fetch.js\n * subhost: \"docs/$repository\", \"$repository\" (github.io) or \"\" (single doc)\n * path: \"v0.0.1\", \"\", \"prs/staging/new_feature\"\n * reloaded: page was reloaded\n * metadata: tags.json, fetched later by fetch.js, if state allows\n */\nconst state = {\n  repository: undefined,\n  version: undefined,\n  offline: undefined,\n  theme: undefined,\n  content_root: undefined,\n  subhost: undefined,\n  path: undefined,\n  reloaded: undefined,\n  metadata: undefined\n}\n\n/**\n * Creates the common state of the documentation.\n */\nexport class State {\n  constructor (app) {\n    this.init_state(state)\n\n    this.parent = app\n    app.state = state\n  }\n  /**\n   * Get repository name, e.g.\n   * doctools, hdl, pyadi-iio\n   */\n  repository () {\n    let dom = document.querySelector('meta[name=\"repository\"]')\n    return dom ? dom.content : ''\n  }\n  /**\n   * Get meta[name=\"version\"] of doc, e.g.\n   * main, v0.2.2, staging/new_feature\n   * This is the hard-coded value and may be outdated,\n   * so inhering from path has higher precedence.\n   * Should only be used as a fallback.\n   */\n  version () {\n    let dom = document.querySelector('meta[name=\"version\"]')\n    if (dom === null)\n      return \"\"\n\n    return dom.content\n  }\n  /**\n   * Get relative path to the root.\n   * Dual fallback to support multiple Sphinx versions.\n   */\n  content_root () {\n    let content_root\n    let dom = document.querySelector('script#documentation_options')\n    if (dom !== null)\n      content_root = dom.dataset['url_root'];\n    if (content_root == undefined)\n      content_root = document.documentElement.dataset[\"content_root\"]\n    if (content_root == undefined) {\n      dom =  document.querySelector('.repotoc-tree .current')\n      if (dom !== null)\n        content_root = dom.getAttribute('href').replace('index.html', '')\n    }\n    if (content_root == undefined) {\n      console.warn(\"Failed to get content root.\")\n      content_root = ''\n    }\n    return content_root\n  }\n  /**\n   * Checks if doc is in a path beyond the server root,\n   * e.g.\n   * /docs/doctools, /docs/doctools/v0.2.2 -> /docs/doctools\n   * /doctools, /doctools/v0.2.2 -> /doctools\n   * / , /v0.2.2 -> (empty)\n   * For correctness, the html meta repository tag must match the url repository.\n   */\n  subhost (content_root, repository) {\n    let doc_root   = new URL(content_root, location).href,\n        no_docs    = new URL(repository, location.origin).href,\n        under_docs = new URL(`docs/${repository}`, location.origin).href\n    if (doc_root.startsWith(under_docs))\n      return `/docs/${repository}`\n    else if (doc_root.startsWith(no_docs))\n      return `/${repository}`\n    else\n      return ''\n  }\n  /**\n   * Get absolute path to doc,\n   * e.g.\n   * file://../docs/doctools, file://../docs/doctools/v0.2.2 -> file://../docs/doctools\n   * For correctness, the html meta repository tag must match the url repository.\n   */\n  subhost_offline (content_root, repository) {\n    let doc_root = new URL(content_root, location).href\n    let index = doc_root.search(\"/_build/html\")\n    if (index !== -1)\n      return doc_root.substring(0, index + \"/_build/html\".length)\n    index = doc_root.search(repository)\n    if (index !== -1)\n      return doc_root.substring(0, index + repository.length)\n    return undefined\n  }\n  /**\n   * Extract path of versioned version, without repository name\n   * /doctools -> \"\"\n   * / -> \"\"\n   * /docs/doctools/v1.1.1 -> \"v1.1.1\"\n   * /doctools/v1.1.1 -> \"v1.1.1\"\n   * /v1.1.1 -> \"v1.1.1\"\n   */\n  path (content_root, subhost) {\n    let url = new URL(content_root, location).href,\n        org = new URL(subhost, location.origin).href\n    if (!url.startsWith(org))\n      return \"\"\n    else\n      return url.replace(org, \"\").replace(/^\\/|\\/$/g, \"\")\n  }\n  /**\n   * Extract path of versioned version, without repository name\n   * file://../doctools -> \"\"\n   * file://../doctools/v1.1.1 -> \"v1.1.1\"\n   */\n  path_offline (content_root, subhost) {\n    if (subhost === undefined)\n      return undefined\n    let url = new URL(content_root, location).href,\n        org = subhost\n    if (!url.startsWith(org))\n      return \"\"\n    else\n      return url.replace(org, \"\").replace(/^\\/|\\/$/g, \"\")\n  }\n  /**\n   * Detects if the page was reloaded by the user.\n   * This information is to use to force reload of cached content.\n   */\n  reloaded () {\n    if (!window.performance)\n      return false\n\n    return performance.navigation.type === performance.navigation.TYPE_RELOAD\n  }\n  /**\n   * Init app state object.\n   */\n  init_state (state) {\n    state.repository = this.repository()\n    state.version = this.version()\n    state.offline = 'file:' == window.location.protocol\n    state.theme = localStorage.getItem('theme')\n    state.content_root = this.content_root()\n    if (!state.offline) {\n      state.subhost = this.subhost(state.content_root, state.repository)\n      state.path = this.path(state.content_root, state.subhost)\n    } else {\n      state.subhost = this.subhost_offline(state.content_root, state.repository)\n      state.path = this.path_offline(state.content_root, state.subhost)\n    }\n    state.reloaded = this.reloaded()\n  }\n}\n","\"use strict\";\n\nexport {Toolbox}\n\n/**\n * Provides useful generic functions.\n */\nclass Toolbox {\n  /**\n   * Get random char.\n   */\n  static randomChar () {\n    const alphabet = \"abcdefghijklmnopqrstuvwxyz\"\n    return alphabet[Math.floor(Math.random() * alphabet.length)]\n  }\n /**\n  * Generate a unique identifier.\n  */\n  static UID () {\n    return this.randomChar() + (+new Date).toString(36) + Math.random().toString(36).substring(3)\n  }\n /**\n  * Generate a small non-timed identifier.\n  */\n  static SID () {\n    return this.randomChar() + (Math.random()).toString(36).substring(3,8)\n  }\n  /**\n   * Return param from url search parami, if unset, return the default.\n   * @param {string} _param - Parameter to search in the array.\n   * @return Requested parameter.\n   */\n  static fromUrl (_param) {\n    let param = new URLSearchParams(document.location.search)\n    return param.get(_param) == null ?\n      this.urlDefaults(_param) : this.urlValidParams(_param, param.get(_param))\n  }\n  /**\n   * Default url parameters values if not set\n   * @param {string} _param - Parameter to return the default.\n   * @return Default parameter.\n   */\n  static urlDefaults (_param) {\n    switch (_param) {\n      case 'theme':\n        return 'light'\n    }\n  }\n  /**\n   * Valid parameters, if a invalid is passed, will return the default.\n   */\n  static urlValidParams (_param, value) {\n    switch (_param) {\n      case 'theme':\n        return ['dark', 'light'].includes(value) ? value : this.urlDefaults(_param)\n    }\n  }\n  static cleanPathname (_pathname) {\n    return _pathname.replace(/([^:]\\/)\\/+/g, \"$1\").replace(/[^:]\\.\\//g, \"$1\")\n  }\n  /**\n   * Get the depth of a path name.\n   */\n  static getDepth (_pathname) {\n    return (_pathname.match(/\\//g)||[]).length\n  }\n  /*\n   * Check if link exists, if not, redirect to second option.\n   */\n  static async try_redirect (url, fallback_url, new_tab) {\n    let url_\n    try {\n      const response = await fetch(url, {\n        method: 'HEAD'\n      })\n\n      if (response.status === 404)\n        url_ = fallback_url\n      else\n        url_ = url\n    } catch (e) {\n      url_ = fallback_url\n    }\n    if (new_tab)\n      window.open(url_, '_blank').focus()\n    else\n      location.href = url_\n  }\n  /*\n   * Check if the raw content is only a include directive.\n   * If yes, resolve its path and redirect to it.\n   */\n  static async try_include (url_raw, url, new_tab) {\n    let fallback = (error) => {\n      if (new_tab)\n        window.open(url, '_blank').focus()\n      else\n        location.href = url\n    }\n    const request = new Request(url_raw)\n    await fetch (request)\n      .then(\n        (response) => {\n          if (!response.ok)\n            throw new Error(response.status)\n          return response.text()\n        })\n      .then((text) => {\n        text = text.replace(/\\n+$/, \"\")\n        if (text.startsWith(\".. include:: \") && text.split(/\\n/).length == 1) {\n          text = text.substring(13)\n          if (new_tab)\n            window.open(new URL(text, url).href, '_blank').focus()\n          else\n            location.href = new URL(text, url).href\n        } else {\n          fallback()\n        }\n      })\n      .catch(fallback)\n    return\n  }\n  /*\n   * Try to fetch every item in array.\n   */\n  static async fetch_each (urls) {\n    for (let url of urls) {\n      try {\n        const request = new Request(url)\n        const response = await fetch(request)\n\n        if (response.ok === true) {\n          return {'obj': await response.json(), 'url': url}\n        }\n        else if (response.status !== 404)\n          return {'error': response, 'url': url}\n      } catch (error) {\n        return {'error': error, 'url': url}\n      }\n    }\n    return {'error': `No url returned a valid JSON, urls: ${urls}`}\n  }\n  static cache_check (state, fetch_url, hours, callback) {\n    if (!Array.isArray(fetch_url))\n      fetch_url = [fetch_url]\n\n    let cache_key = fetch_url[0]\n    let json = localStorage.getItem(cache_key)\n    if (json !== null)\n      json = JSON.parse(json)\n\n    let cache_timeout = new Date(0)\n    cache_timeout.setHours(hours)\n    if (state.reloaded === true || json === null || json['timestamp'] + cache_timeout.valueOf() < Date.now()) {\n      Toolbox.fetch_each(fetch_url).then((json) => {\n        if ('error' in json) {\n          console.error(`Failed to fetch resource, due to:`, json['error'])\n          return\n        }\n\n        json['timestamp'] = Date.now()\n        callback(json)\n        localStorage.setItem(cache_key, JSON.stringify(json))\n      })\n    } else {\n      callback(json)\n    }\n  }\n  /*\n   * Return alphanumeric sequence. Can be us used for shortcuts.\n   */\n  static get_alphanumeric () {\n    const numbers = [...Array(9).keys(), -1].map(n => (n + 1).toString())\n    const alphabet = [...Array(25).keys()].map(n => String.fromCharCode(98 + n))\n    return numbers.concat(alphabet)\n  }\n  /*\n   * Lazy method to await condition,\n   * useful for:\n   *   await waitUntil(() => this.parent.state.metadata !== undefined)\n   * When testing parts of extra.js temporally under app.js\n   */\n  static waitUntil = (condition, checkInterval=100) => {\n    return new Promise(resolve => {\n      let interval = setInterval(() => {\n        if (!condition()) return;\n        clearInterval(interval);\n        resolve();\n      }, checkInterval)\n    })\n  }\n}\n","\"use strict\";\nexport {DOM, Animate}\n\n/** Make DOM element*/\nclass DOM {\n  constructor (dom, tags){\n    this.$\n    if (typeof dom != 'string'){\n      this.$ = dom\n      return\n    }\n    this.$ = document.createElement(dom);\n    if (typeof tags == 'object') for (const tag in tags) {\n      if (tag in this.$)\n        this.$[tag] = tags[tag]\n      else\n        this.$.dataset[tag] = tags[tag]\n    }\n  }\n  /**\n   * Clone node\n   * @param {bool} deep - If true, then the node and its whole subtree,\n   * including text that may be in child Text nodes, is also copied.\n   */\n  cloneNode (deep){\n    let node = new DOM(this.$.cloneNode(deep))\n    return node\n  }\n  /**\n   * Set DOM innerText.\n   * @param {string} str - Text to apply.\n   */\n  set innerText(str){\n    this.$.innerText = str\n  }\n  /**\n   * Get DOM innerText.\n   */\n  get innerText(){\n    return this.$.innerText\n  }\n  /** Get DOM offset height */\n  get height (){\n    return this.$.offsetHeight\n  }\n  /** Get DOM offset width */\n  get width (){\n    return this.$.offsetWidth\n  }\n  /** Get DOM id */\n  get id (){\n    return this.$.id\n  }\n  /** Set DOM id */\n  set id (str){\n    this.$.id= str\n  }\n  /** Get DOM value */\n  get value (){\n    return this.$.value\n  }\n  /** Set DOM value */\n  set value (str){\n    this.$.value = str\n  }\n  /** Get DOM src */\n  get src (){\n    return this.$.src\n  }\n  /** Set DOM src */\n  set src (str){\n    this.$.src = str\n  }\n  /**\n   * Focus on DOM.\n   */\n  focus (){\n    this.$.focus()\n  }\n  /** Get DOM classList object. */\n  get classList(){\n    return this.$.classList\n  }\n  /** Get DOM style object. */\n  get style(){\n    return this.$.style\n  }\n  /**\n   * Append a ``onchange`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onchange (self, ev, args){\n    this.$.onchange = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``onclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onclick (self, ev, args){\n    this.$.onclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``onauxclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onauxclick (self, ev, args){\n    this.$.onauxclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n    return this\n  }\n  /**\n   * Append a ``mouseup`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onup (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousedown`` event.\n   * @param {function} ev - Function to be executed on down.\n   */\n  ondown (self, ev, args){\n    this.$.addEventListener('mousedown', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a ``mousemove`` and ``touchmove`` event.\n   * @param {function} ev - Function to be executed on move.\n   */\n  onmove (self, ev, args){\n    this.$.addEventListener('mousemove', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Append a event listener.\n   * @param {string} event - Event listener name.\n   * @param {function} fun - Function to be executed on move.\n   * @param {function} args - Arguments to be applied to the function.\n   */\n  onevent (event, self, fun, args){\n    this.$.addEventListener(event, (e) => {\n      if (typeof args == 'undefined')\n        fun.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        fun.apply(self, args)\n      }\n    })\n    return this\n  }\n  /**\n   * Appends others :js:func:`DOM`.\n   * @param {Object[]} DOMS - Array of :js:func:`DOM` or/and direct DOM Nodes.\n   */\n  append (DOMS){\n    if (DOMS.constructor != Array)\n      DOMS = [DOMS]\n\n    DOMS.forEach ((item) => {\n      if (/HTML(.*)Element/.test(item.constructor.name))\n        this.$.appendChild(item)\n      else if (typeof item == 'object' &&\n               /HTML(.*)Element/.test(item.$.constructor.name))\n        this.$.appendChild(item.$)\n    })\n\n    return this\n  }\n  /**\n   * Delete object.\n   */\n  delete (){\n    this.$.remove()\n    delete this\n  }\n  /**\n   * Remove childs from :js:func:`DOM` object.\n   */\n  removeChilds (){\n    let child = this.$.lastElementChild\n    while (child) {\n      this.$.removeChild(child)\n      child = this.$.lastElementChild\n    }\n    return this\n  }\n  /**\n   * Get DOM Node element.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Optional parent DOM.\n   */\n  static get (a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'undefined') ? document.querySelector (a) : b.querySelector(a)\n  }\n  /**\n   * Get all DOM Node elements.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Parent DOM.\n   */\n  static getAll(a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'object') ? b.querySelectorAll(a) : get(b).querySelectorAll(a)\n  }\n  /**\n   * Include or remove a class to a DOM.\n   * @param {Object} b - Target DOM.\n   * @param {string} _class - Optional class, defaults to `on`.\n   */\n  static switchState (b, _class){\n    b = b instanceof DOM ? b.$ : b\n    let cn = _class != undefined ? _class : `on`\n    if (b.classList.contains(cn))\n      b.classList.remove(cn)\n    else\n      b.classList.add(cn)\n  }\n  /**\n  * Generate a unique identifier.\n  */\n  static UID (){\n    return (+new Date).toString(36) + Math.random().toString(36).substr(2)\n  }\n  /**\n   * Prototype a DOM composed by details, sumamary and a h2 title with optional\n   * onclick event.\n   * @param {Object} str - id, title and onclick function of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.title - Title of the DOM element.\n   * @param {Object} str.onclick - Onclick function of the DOM element.\n   */\n  static prototypeDetails (str){\n    let summary = new DOM('summary', {innerText:str.innerText})\n    let details = new DOM('details', {id:str.id, name:str.id})\n      .append(summary)\n\n    if (str.onevent != undefined) {\n      str.onevent.forEach(event => {\n        event.args.push(details.$)\n        summary.onevent(\n          event.event,\n          event.self,\n          event.fun,\n          event.args\n        )\n      })\n    }\n    return details\n  }\n  /**\n   * Prototype a DOM composed by input(file type) and label.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   */\n  static prototypeInputFile (str){\n    return new DOM('label', {\n      htmlFor:`${str.id}_input`,\n      id:str.id,\n      className:str.className,\n      innerText:str.innerText\n      }).append(\n        new DOM('input', {id:`${str.id}_input`, type:'file'})\n      )\n  }\n  /**\n   * Prototype a DOM composed by input(checkbox) and label styled as as switch.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   * @returns Array with input and container.\n   */\n  static prototypeCheckSwitch (str){\n    let input = new DOM('input', {\n      id:str.id,\n      name:str.id,\n      className:'checkswitch',\n      type:'checkbox',\n      value:false\n    })\n\n    let container = new DOM('div', {className:str.className})\n      .append([\n        new DOM('div')\n          .append([\n            new DOM('label', {\n                className:'checkswitch',\n                htmlFor:str.id,\n                innerText:str.innerText\n              }).append([\n                input,\n                new DOM('span')\n              ])\n          ])\n      ])\n\n    return [input, container]\n  }\n  /**\n   * Prototype a DOM that allows data to be downloded on its creation.\n   * @param {string} filename - name of the file.\n   * @param {string} file - file content.\n   */\n  static prototypeDownload (filename, file){\n    let data,\n        reg = /.*\\.(py|xml|csv|json|svg|png)$/\n    if (!reg.test(filename))\n      return\n\n    let format = filename.match(reg)[1]\n    filename = filename\n      .replaceAll('/','-')\n      .replaceAll(' ','_')\n      .toLowerCase()\n\n    switch (format) {\n      case 'xml':\n        data = \"data:x-application/xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'py':\n        data = \"data:text/python;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'json':\n        data = \"data:text/json;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'csv':\n        data = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'svg':\n        data = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'png':\n        data = file; // Expect already in blob\n        break\n    }\n    let element = document.createElement('a')\n    element.setAttribute('href', data)\n    element.setAttribute('download', filename)\n    element.style.display = 'none'\n\n    document.body.appendChild(element)\n    element.click ()\n    document.body.removeChild(element)\n  }\n  /**\n   * Set a option of a select list by its innerText.\n   * @param {Object} dom - Node of the select list.\n   * @param {string} value - Inner text of the target option.\n   */\n  static setSelected (dom, value){\n    for (var i = 0; i < dom.$.options.length; i++){\n      if (dom.$.options[i].text == value){\n        dom.$.options[i].selected = true\n        return\n      }\n    }\n  }\n  /**\n   * Updates parameter of children of a DOM.\n   * Lazy because doesn't care is successful or not.\n   * Useful for generic lists, like in searches.\n   * @param {Object} dom - Container of the list.\n   * @param {string} uid - Item to search for.\n   * @param {Object} props - Properties to update, where the key is also the DOM id.\n   * @param {string} param - Parameter to update.\n   */\n  static lazyUpdate (dom, uid, props, param){\n    param = param == undefined ? 'innerText' : param\n    let element = DOM.get(`[data-uid='${uid}']`, dom)\n    for (const key in props){\n      DOM.get(`#${key}`, element)[param] = props[key]\n    }\n  }\n}\n","\"use strict\";\n\nimport {Toolbox} from './toolbox.js'\nimport {DOM} from './dom.js'\n\nexport class Fetch {\n  constructor (app) {\n    let $ = this.$ = {}\n    $.head = new DOM(DOM.get('head'))\n\n    this.parent = app\n\n    this.init()\n  }\n  /**\n   * Updates elements in a reactive manner,\n   * fetching from the main doctools/metadata.js,\n   * that contain the most up-to-date metadata\n   */\n  init () {\n    let urls = [\n      'https://analogdevicesinc.github.io/doctools/metadata.json'\n    ]\n    if (Object.hasOwn(this.parent.state, 'sub_hosted')) {\n      if (this.parent.state.offline === false)\n        urls.unshift('/metadata.json', '/doctools/metadata.json', '/docs/doctools/metadata.json')\n    } else {\n      if (this.parent.state.offline === false) {\n        urls.unshift(new URL(`${this.parent.state.subhost}/../doctools/metadata.json`, location).href)\n        urls.unshift('/metadata.json')\n      }\n    }\n    Toolbox.cache_check(this.parent.state,\n                        urls, 24, (obj) => {this.init_metadata(obj)})\n  }\n  /**\n   * Attach metadata to this and call to inject extra modules.\n   */\n  init_metadata (obj) {\n    this.parent.state.metadata = obj['obj']\n\n    if ('modules' in obj['obj'])\n      this.load_modules(obj['obj']['modules'], obj['url'])\n  }\n  /**\n   * Inject any JavaScript and CSS StyleSheet listed on the metadata.\n   * The advantage is to load the latest and greatest scripts, regardless\n   * of the tools' built doc version.\n   */\n  load_modules (obj, url) {\n    if (typeof url !== 'string') {\n      console.warn(\"Expected string with url, got \", url)\n      return\n    }\n\n    if (!url.startsWith(\"https://\") && !url.startsWith(\"http://\"))\n      url = new URL(url, location.origin)\n    url = new URL('.', url)\n\n    let url_ = `${url}_static/`\n\n    if ('javascript' in obj) {\n      obj['javascript'].forEach((elem) => {\n        let script = new DOM('script', {\n          'src': `${url_}${elem}`\n        });\n        this.$.head.append(script)\n      })\n    }\n    if ('stylesheet' in obj) {\n      obj['stylesheet'].forEach((elem) => {\n        let style = new DOM('link', {\n          'rel': 'stylesheet',\n          'type': 'text/css',\n          'href': `${url_}${elem}`\n        });\n        this.$.head.append(style)\n      })\n    }\n  }\n}\n","\"use strict\";\n\nimport {DOM} from './dom.js'\n\n/* Handle navigation, theming, search, shortcuts */\nexport class Navigation {\n  constructor (app) {\n    this.parent = app\n\n    this.portrait = false\n    this.scrollSpy = {\n      localtoc: new Map(),\n      currentLocaltoc: undefined\n    }\n\n    let $ = this.$ = {}\n    $.body = new DOM(DOM.get('body'))\n    $.content = new DOM(DOM.get('.body section'))\n    $.localtoc = new DOM(DOM.get('.tocwrapper > nav > ul > li'))\n    this.scroll_spy()\n\n    if (this.parent.state.theme === null)\n      this.parent.state.theme = this.os_theme()\n    $.body.classList.add('js-on')\n    if (this.parent.state.theme !== this.os_theme())\n      $.body.classList.add(this.parent.state.theme)\n\n\t  $.changeTheme = new DOM('button', {\n      className: this.parent.state.theme === 'dark' ? 'icon on' : 'icon',\n      id:'theme',\n      title:'Switch theme'\n    }).onclick(this, () => {\n      $.body.classList.remove(this.parent.state.theme)\n      this.parent.state.theme = this.parent.state.theme === 'dark' ? 'light' : 'dark'\n      if (this.os_theme() == this.parent.state.theme)\n        localStorage.removeItem('theme')\n      else {\n        localStorage.setItem('theme', this.parent.state.theme)\n        $.body.classList.add(this.parent.state.theme)\n      }\n    })\n\n    $.preserve_scroll = {}\n    $.preserve_scroll['sphinxsidebarwrapper'] = new DOM(DOM.get('.sphinxsidebarwrapper'))\n\n    $.rightHeader = new DOM(DOM.get('header #right span.reverse')).append([$.changeTheme])\n\n    $.relatedNext = DOM.get('.related .next')\n    $.relatedPrev = DOM.get('.related .prev')\n\n    this.init()\n\n    app.navigation = this\n  }\n  /*\n   * Initiates scroll spy elements.\n   */\n  scroll_spy () {\n    if (this.$.localtoc.$ !== null) {\n      this.prepareLocaltocMap()\n    }\n  }\n  /*\n   * Prepare map for localtoc elements to be used by the scroll spy.\n   */\n  prepareLocaltocMap (){\n    let key = \"\"\n    let lt = this.scrollSpy.localtoc\n    let i = 0\n    DOM.getAll('.reference.internal', this.$.localtoc).forEach((elem) => {\n      key = `${i}_${elem.textContent}`\n      lt.set(key, [elem, undefined])\n      i += 1\n    })\n\n    let entries = []\n    for (let i = 0; i < 7; i++) {\n      entries.push(...DOM.getAll(`section > h${i}`, this.$.content))\n    }\n    // Sort entries in distance to the top\n    entries = entries.sort((a, b) => a.getBoundingClientRect().y - b.getBoundingClientRect().y)\n    i = 0\n    entries.forEach((elem) => {\n      key = elem.textContent\n      key = `${i}_${key}`\n      if (lt.has(key)) {\n        lt.set(key, [lt.get(key)[0], elem])\n        i += 1\n      }\n    })\n    // Remove not found entries\n    lt.forEach((value, key, map) => {\n      if (value[1] === undefined)\n        map.delete(key)\n    })\n  }\n  /* Update GUI based on resize event */\n  handleResize () {\n    const em = 16,\n          ss = [40, 65, 80, 105],\n          iw = window.innerWidth\n\n    this.portrait = window.innerHeight > window.innerWidth ? true : false\n\n    this.previous_size = this.current_size\n    for (let i = 0; i < ss.length; i++) {\n      if (iw < (ss[i] * em))\n        break\n      this.current_size = i\n    }\n    if (this.previous_size === this.current_size)\n      return\n\n    if (this.current_size === 3 || this.previous_size === 3) {\n      let event = new Event('change');\n      this.$.show_localtoc.$.checked = iw < (ss[3] * em) ? false : true;\n      this.$.show_localtoc.$.dispatchEvent(event)\n    }\n  }\n  /* Update GUI based on scroll event */\n  handleScroll () {\n    if (this.$.localtoc.$ !== null) {\n      // Highlight localtoc entry\n      let key_neg, key_pos, key, dist\n      let dist_pos = Number.MAX_SAFE_INTEGER\n      let dist_neg = Number.MIN_SAFE_INTEGER\n      let lt = this.scrollSpy.localtoc\n      lt.forEach((value, key_, map) => {\n        dist = value[1].getBoundingClientRect().y\n        if (dist <= 0) {\n          if (dist > dist_neg) {\n            dist_neg = dist\n            key_neg  = key_\n          }\n        } else {\n          if (dist < dist_pos) {\n            dist_pos = dist\n            key_pos  = key_\n          }\n        }\n      })\n      if (dist_pos < 5*16)\n        key = key_pos\n      else\n        key = key_neg\n\n      if (key !== undefined) {\n        let clt_key = this.scrollSpy.currentLocaltoc\n        if (key !== clt_key) {\n          lt.get(key)[0].classList.add(\"current\")\n          if (clt_key !== undefined) {\n            lt.get(clt_key)[0].classList.remove(\"current\")\n          }\n          this.scrollSpy.currentLocaltoc = key\n        }\n      }\n    }\n  }\n  /* Related shortcut */\n  related (e) {\n    if (!e.altKey || !e.shiftKey)\n      return\n    e.preventDefault()\n\n    /* Try to anchor to same section */\n    let anchor = (e.ctrlKey && location.hash.length > 0) ? location.hash : \"\"\n\n    if ((e.code == 'ArrowLeft' || e.code == 'KeyA') && this.$.relatedPrev)\n      location.href = this.$.relatedPrev.href + anchor\n    else if ((e.code == 'ArrowRight' || e.code == 'KeyD') && this.$.relatedNext)\n      location.href = this.$.relatedNext.href + anchor\n  }\n  keyup (e) {\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'KeyA':\n      case 'KeyD':\n        this.related(e)\n        break\n    }\n  }\n  keydown (e) {\n    if (!e.altKey || !e.shiftKey)\n      return\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n      case 'KeyA':\n      case 'KeyD':\n        if (e.altKey && e.shiftKey)\n          e.preventDefault()\n        return\n    }\n  }\n  /**\n   * Get OS Theme\n   */\n  os_theme () {\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? 'dark' : 'light'\n  }\n  /*\n   * Save current scroll position of DOM elements, to restore after load.\n   */\n  scroll_save () {\n    let positions = {}\n\n    for (const [key, dom] of Object.entries(this.$.preserve_scroll)) {\n      positions[key] = dom.$.scrollTop\n    }\n\n    localStorage.setItem(\"scroll_position\", JSON.stringify(positions))\n  }\n  /*\n   * Restore previous scroll position of DOM elements.\n   */\n  scroll_restore (e) {\n    let positions = localStorage.getItem(\"scroll_position\")\n    if (!positions)\n      return\n\n    positions = JSON.parse(positions)\n    for (const [key, value] of Object.entries(positions)) {\n      if (key in this.$.preserve_scroll)\n        this.$.preserve_scroll[key].$.scrollTop = value\n    }\n  }\n  renew_index(nodes, ev) {\n    nodes.forEach(node => {\n      node.tabIndex = ev.target.checked ? 0 : -1;\n    })\n  }\n  /**\n   * When elements are not visible, it is ideal to make them\n   * not tab selectable.\n   * Add listeners to check changes and update the tab index accordingly.\n   */\n  check_to_tabindex () {\n    let $ = this.$\n    $.show_localtoc = new DOM(\n      DOM.get('#input-show-localtoc')\n    ).onchange(this, this.renew_index, [$.localtoc.$.querySelectorAll('a')])\n    let event = new Event('change');\n    $.show_localtoc.$.dispatchEvent(event)\n  }\n  /**\n   * Init navigation.\n   */\n  init () {\n    onresize = () => {this.handleResize()}\n    onscroll = () => {this.handleScroll()}\n    document.addEventListener('keyup', (e) => {this.keyup(e)}, false);\n    document.addEventListener('keydown', (e) => {this.keydown(e)}, false);\n\n    this.check_to_tabindex();\n    this.handleResize()\n    this.scroll_restore();\n    addEventListener('beforeunload', (e) => {this.scroll_save(e)}, false);\n  }\n}\n","import { State } from './state.js'\nimport { Fetch } from './fetch.js'\nimport { Navigation } from './navigation.js'\n\nexport default function App () {\n  window.app = {}\n\n  new State(app)\n  new Fetch(app)\n  new Navigation(app)\n}\n\nApp()\n"],"names":["state","repository","undefined","version","offline","theme","content_root","subhost","path","reloaded","metadata","State","constructor","app","this","init_state","parent","dom","document","querySelector","content","dataset","documentElement","getAttribute","replace","console","warn","doc_root","URL","location","href","no_docs","origin","under_docs","startsWith","subhost_offline","index","search","substring","length","url","org","path_offline","window","performance","navigation","type","TYPE_RELOAD","protocol","localStorage","getItem","Toolbox","randomChar","alphabet","Math","floor","random","UID","Date","toString","SID","fromUrl","_param","param","URLSearchParams","get","urlDefaults","urlValidParams","value","includes","cleanPathname","_pathname","getDepth","match","try_redirect","fallback_url","new_tab","url_","fetch","method","status","e","open","focus","try_include","url_raw","fallback","error","request","Request","then","response","ok","Error","text","split","catch","fetch_each","urls","obj","json","cache_check","fetch_url","hours","callback","Array","isArray","cache_key","JSON","parse","cache_timeout","setHours","valueOf","now","setItem","stringify","get_alphanumeric","numbers","keys","map","n","String","fromCharCode","concat","static","condition","checkInterval","Promise","resolve","interval","setInterval","clearInterval","DOM","tags","$","createElement","tag","cloneNode","deep","innerText","str","height","offsetHeight","width","offsetWidth","id","src","classList","style","onchange","self","ev","args","apply","push","onclick","onauxclick","onup","addEventListener","ondown","onmove","onevent","event","fun","append","DOMS","forEach","item","test","name","appendChild","remove","removeChilds","child","lastElementChild","removeChild","a","b","getAll","querySelectorAll","switchState","_class","cn","contains","add","substr","prototypeDetails","summary","details","prototypeInputFile","htmlFor","className","prototypeCheckSwitch","input","prototypeDownload","filename","file","data","reg","format","replaceAll","toLowerCase","encodeURIComponent","element","setAttribute","display","body","click","setSelected","i","options","selected","lazyUpdate","uid","props","key","Fetch","head","init","Object","hasOwn","unshift","init_metadata","load_modules","elem","script","rel","Navigation","portrait","scrollSpy","localtoc","Map","currentLocaltoc","scroll_spy","os_theme","changeTheme","title","removeItem","preserve_scroll","rightHeader","relatedNext","relatedPrev","prepareLocaltocMap","lt","textContent","set","entries","sort","getBoundingClientRect","y","has","delete","handleResize","ss","iw","innerWidth","innerHeight","previous_size","current_size","Event","show_localtoc","checked","dispatchEvent","handleScroll","key_neg","key_pos","dist","dist_pos","Number","MAX_SAFE_INTEGER","dist_neg","MIN_SAFE_INTEGER","key_","clt_key","related","altKey","shiftKey","preventDefault","anchor","ctrlKey","hash","code","keyup","keydown","matchMedia","matches","scroll_save","positions","scrollTop","scroll_restore","renew_index","nodes","node","tabIndex","target","check_to_tabindex","onresize","onscroll","App"],"mappings":"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"}