!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Extra=t()}(this,function(){"use strict";class e{constructor(e,t){if(this.$,"string"==typeof e){if(this.$=document.createElement(e),"object"==typeof t)for(const e in t)e in this.$?this.$[e]=t[e]:this.$.dataset[e]=t[e]}else this.$=e}cloneNode(t){return new e(this.$.cloneNode(t))}set innerText(e){this.$.innerText=e}get innerText(){return this.$.innerText}get height(){return this.$.offsetHeight}get width(){return this.$.offsetWidth}get id(){return this.$.id}set id(e){this.$.id=e}get value(){return this.$.value}set value(e){this.$.value=e}get src(){return this.$.src}set src(e){this.$.src=e}focus(){this.$.focus()}get classList(){return this.$.classList}get style(){return this.$.style}onchange(e,t,s){return this.$.onchange=r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))},this}onclick(e,t,s){return this.$.onclick=r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))},this}onauxclick(e,t,s){return this.$.onauxclick=r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))},this}onup(e,t,s){return this.$.addEventListener("mouseup",r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))}),this}ondown(e,t,s){return this.$.addEventListener("mousedown",r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))}),this}onmove(e,t,s){return this.$.addEventListener("mousemove",r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))}),this}onevent(e,t,s,r){return this.$.addEventListener(e,e=>{void 0===r?s.apply(t,[e]):r.constructor==Array&&(r.push(e),s.apply(t,r))}),this}append(e){return e.constructor!=Array&&(e=[e]),e.forEach(e=>{/HTML(.*)Element/.test(e.constructor.name)?this.$.appendChild(e):"object"==typeof e&&/HTML(.*)Element/.test(e.$.constructor.name)&&this.$.appendChild(e.$)}),this}delete(){this.$.remove()}removeChilds(){let e=this.$.lastElementChild;for(;e;)this.$.removeChild(e),e=this.$.lastElementChild;return this}static get(t,s){return void 0===(s=s instanceof e?s.$:s)?document.querySelector(t):s.querySelector(t)}static getAll(t,s){return"object"==typeof(s=s instanceof e?s.$:s)?s.querySelectorAll(t):get(s).querySelectorAll(t)}static switchState(t,s){let r=null!=s?s:"on";(t=t instanceof e?t.$:t).classList.contains(r)?t.classList.remove(r):t.classList.add(r)}static UID(){return(+new Date).toString(36)+Math.random().toString(36).substr(2)}static prototypeDetails(t){let s=new e("summary",{innerText:t.innerText}),r=new e("details",{id:t.id,name:t.id}).append(s);return null!=t.onevent&&t.onevent.forEach(e=>{e.args.push(r.$),s.onevent(e.event,e.self,e.fun,e.args)}),r}static prototypeInputFile(t){return new e("label",{htmlFor:`${t.id}_input`,id:t.id,className:t.className,innerText:t.innerText}).append(new e("input",{id:`${t.id}_input`,type:"file"}))}static prototypeCheckSwitch(t){let s=new e("input",{id:t.id,name:t.id,className:"checkswitch",type:"checkbox",value:!1});return[s,new e("div",{className:t.className}).append([new e("div").append([new e("label",{className:"checkswitch",htmlFor:t.id,innerText:t.innerText}).append([s,new e("span")])])])]}static prototypeDownload(e,t){let s,r=/.*\.(py|xml|csv|json|svg|png)$/;if(!r.test(e))return;let n=e.match(r)[1];switch(e=e.replaceAll("/","-").replaceAll(" ","_").toLowerCase(),n){case"xml":s="data:x-application/xml;charset=utf-8,"+encodeURIComponent(t);break;case"py":s="data:text/python;charset=utf-8,"+encodeURIComponent(t);break;case"json":s="data:text/json;charset=utf-8,"+encodeURIComponent(t);break;case"csv":s="data:text/csv;charset=utf-8,"+encodeURIComponent(t);break;case"svg":s="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t);break;case"png":s=t}let a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}static setSelected(e,t){for(var s=0;s<e.$.options.length;s++)if(e.$.options[s].text==t)return void(e.$.options[s].selected=!0)}static lazyUpdate(t,s,r,n){n=null==n?"innerText":n;let a=e.get(`[data-uid='${s}']`,t);for(const t in r)e.get(`#${t}`,a)[n]=r[t]}}class t{static randomChar(){const e="abcdefghijklmnopqrstuvwxyz";return e[Math.floor(26*Math.random())]}static UID(){return this.randomChar()+(+new Date).toString(36)+Math.random().toString(36).substring(3)}static SID(){return this.randomChar()+Math.random().toString(36).substring(3,8)}static fromUrl(e){let t=new URLSearchParams(document.location.search);return null==t.get(e)?this.urlDefaults(e):this.urlValidParams(e,t.get(e))}static urlDefaults(e){if("theme"===e)return"light"}static urlValidParams(e,t){if("theme"===e)return["dark","light"].includes(t)?t:this.urlDefaults(e)}static cleanPathname(e){return e.replace(/([^:]\/)\/+/g,"$1").replace(/[^:]\.\//g,"$1")}static getDepth(e){return(e.match(/\//g)||[]).length}static async try_redirect(e,t,s){let r;try{r=404===(await fetch(e,{method:"HEAD"})).status?t:e}catch(e){r=t}s?window.open(r,"_blank").focus():location.href=r}static async try_include(e,t,s){let r=e=>{s?window.open(t,"_blank").focus():location.href=t};const n=new Request(e);await fetch(n).then(e=>{if(!e.ok)throw new Error(e.status);return e.text()}).then(e=>{(e=e.replace(/\n+$/,"")).startsWith(".. include:: ")&&1==e.split(/\n/).length?(e=e.substring(13),s?window.open(new URL(e,t).href,"_blank").focus():location.href=new URL(e,t).href):r()}).catch(r)}static async fetch_each(e){Array.isArray(e)||(e=[e]);for(let t of e)try{const e=new Request(t),s=await fetch(e);if(!0===s.ok)return{obj:await s.json(),url:t};if(404!==s.status)return{error:s,url:t}}catch(e){return{error:e,url:t}}return{error:`No url returned a valid JSON, urls: ${e}`}}static get_alphanumeric(){const e=[...Array(9).keys(),-1].map(e=>(e+1).toString()),t=[...Array(25).keys()].map(e=>String.fromCharCode(98+e));return e.concat(t)}static waitUntil=(e,t=100)=>new Promise(s=>{let r=setInterval(()=>{e()&&(clearInterval(r),s())},t)})}class s{constructor(t){this.$={},this.$.show_repotoc=new e(e.get("#input-show-repotoc")).onchange(this,this.renew_index),this.set_doms(),this.parent=t,"object"==typeof this.parent.fetch?this.parent.fetch.then(this.init.bind(this)):this.init()}init(){let e=this.parent.state.metadata;"repotoc"in e&&this.update_repotoc(e.repotoc),"banner"in e&&this.update_banner(e.banner)}set_doms(){let t=this.$;t.repotocTreeOverlay=new e(e.get(".repotoc-tree.overlay root")),t.repotocTreeSidebar=new e(e.get(".sphinxsidebar .repotoc-tree root")),t.banner=new e("div",{className:"banner"}),e.get("body").prepend(t.banner.$)}renew_index(e){this.$.linksSidebar.forEach(t=>{t.$.tabIndex=e.target.checked?0:-1}),this.$.linksOverlay.forEach(t=>{t.$.tabIndex=e.target.checked?0:-1})}update_repotoc(t){let s=this.$,r="";r=Object.hasOwn(this.parent.state,"sub_hosted")?!0===this.parent.state.sub_hosted?"/":this.parent.state.metadata.remote_doc:""===this.parent.state.subhost||void 0===this.parent.state.subhost?this.parent.state.metadata.remote_doc:this.parent.state.subhost.startsWith("/docs")?"/docs/":"/";this.$.linksOverlay=[],this.$.linksSidebar=[];for(const[s,n]of Object.entries(t)){if(!("name"in n))continue;let t=s==this.parent.state.repository?this.parent.state.content_root:`${r}${s}/`;this.$.linksSidebar.push(new e("a",{href:`${t}index.html`,className:this.parent.state.repository===s?"current":"",innerText:n.name}))}this.$.linksSidebar.forEach(e=>{this.$.linksOverlay.push(e.cloneNode(!0))}),s.repotocTreeOverlay.$&&(s.repotocTreeOverlay.removeChilds(),s.repotocTreeOverlay.append(this.$.linksOverlay)),s.repotocTreeSidebar.$&&(s.repotocTreeSidebar.removeChilds(),s.repotocTreeSidebar.append(this.$.linksSidebar));let n=new Event("change");this.$.show_repotoc.$.dispatchEvent(n)}update_banner(t){let s=this.$;"msg"in t&&s.banner.append(new e("span",{innerText:t.msg})),"a_href"in t&&"a_text"in t&&s.banner.append(new e("a",{href:t.a_href,innerText:t.a_text,target:"_blank"}))}}class n{constructor(e){this.$={},this.parent=e,"object"==typeof this.parent.fetch?this.parent.fetch.then(this.init.bind(this)):this.init()}page_source_sanity(e,t){return e.hasOwnProperty("source_hostname")?e.repotoc.hasOwnProperty(t)?e.repotoc[t].hasOwnProperty("pathname")?e.repotoc[t].hasOwnProperty("branch")?void 0:(console.warn(`edit_source: 'branch' missing from entry '${t}'`),!0):(console.warn(`edit_source: 'pathname' missing from entry '${t}'`),!0):(console.warn(`edit_source: repository '${t}' not in the metadata`),!0):(console.warn("edit_source: 'source_hostname' missing from the metadata",e),!0)}page_source_ignore(){return null!==document.querySelector("#search-documentation")}draw_page_source(s,r){let n=new e("div",{className:"page-actions"}),a=new e("a",{className:"edit-source",title:"See and edit this page source",href:s,target:"blank"});a.onclick(this,(e,s,r)=>{r.preventDefault(),t.try_include(s,e.$.href,!0)},[a,r]),a.onauxclick(this,(e,s,r)=>{r.preventDefault(),t.try_include(s,e.$.href,!0)},[a,r]),n.append(a.$);let i=e.get(".bodywrapper .body-header");null===i?(i=e.get(".bodywrapper .body"),i.insertAdjacentElement("afterbegin",n.$)):i.insertAdjacentElement("beforeend",n.$)}page_source(){let e=this.parent.state.metadata,t=this.parent.state.repository;if(this.page_source_sanity(e,t))return;if(this.page_source_ignore())return;let s=(()=>{let e=document.querySelector('meta[name="page_source_suffix"]');return null===e?".rst":e.content})(),r=s=>s.replace("{repository}",t).replace("{branch}",e.repotoc[t].branch).replace("{pathname}",e.repotoc[t].pathname),n=r(e.source_hostname),a=r(e.source_hostname_raw),i="";i=this.parent.state.offline?new URL("file://"+location.pathname).href:new URL(location.pathname,location.origin).href;let o=new URL(this.parent.state.content_root,i).href,c=i.substring(o.length);c=c.endsWith(".html")?c.replace(/\.html$/i,s):c.concat(`index${s}`),n=n.concat("/",c),a=a.concat("/",c),this.draw_page_source(n,a)}init(){this.page_source()}}class a{constructor(e){this.parent=e,this.parent.state.offline||(this.$={},Object.hasOwn(this.parent.state,"sub_hosted")?this.prefix=!0===this.parent.state.sub_hosted?this.parent.state.repository:"":this.prefix=this.parent.state.subhost,this.prefix=new URL(this.prefix,location.origin).href,this.prefix.endsWith("/")&&(this.prefix=this.prefix.slice(0,-1)),this.init())}init(){fetch(new Request(new URL("tags.json",this.prefix+"/"))).then(e=>e).then(e=>e.json()).then(e=>this.render(e)).catch(e=>{console.log("version_dropdown: no tags.json to fill dropdown")})}static assert(e){if(Array.isArray(e))return e.every(e=>"string"==typeof e)?"string-array":(console.warn("version_dropdown: expected array of strings, got ",e),!0);if("[object Object]"===Object.prototype.toString.call(e)){for(let t in e){if(!Array.isArray(e[t]))return console.warn("version_dropdown: expected array, got ",e[t]),!0;if(2!==e[t].length)return console.warn(`version_dropdown: expected two items, got ${e[t].length}`,e[t]),!0}return"fine-grained"}return console.warn("version_dropdown: expected object of arrays or array of strings, got ",e),!0}static object_to_string_array(e){let t=[];for(const s in e)t.push(s);return t}static string_array_to_object(e){let t={};e.forEach(e=>{t[e]=[e,""]}),""in t&&(t[""]=["main","unstable"]);for(const e in t){t[e]=[t[e][0],"latest"];break}return t}render(s){let r=this.parent.state.version,n=this.parent.state.path,i="",o=a.assert(s);if(!0===o)return;"string-array"==o&&(s=a.string_array_to_object(s));let c=e.get(".sphinxsidebarwrapper .toc-tree"),h=e.get("header #right .reverse"),l=e.get("body"),d=Object.keys(s).length>10?4:2,p=" auto".repeat(d),u=new e("div",{className:"version-dropdown-list",style:`grid-template-columns:${p}`});s.hasOwnProperty(n)?(i=s[n][1],r=s[n][0]):console.warn(`version_dropdown: current path ${n} is not in the tags.json. Hard-coded meta[name="version"] will be used.`,s);for(let r in s){let n=new e("a",{href:r.length>0?this.prefix+"/"+r:this.prefix}),a=(e,s,r)=>{r.preventDefault();let n=app.state.path.length>0?this.prefix+"/"+app.state.path:this.prefix;if(location.href.startsWith(n)){let r=location.href.substring(n.length+1);"/"!==e.$.href.slice(-1)&&(r="/"+r);let a=new URL(e.$.href+r);a.hash=location.hash,t.try_redirect(a,e.$.href,s)}else s?window.open(e.$.url,"_blank").focus():location.href=e.$.url};n.onclick(this,a,[n,!1]),n.onauxclick(this,a,[n,!0]);let i=new e("div"),o=new e("div");i.innerText=s[r][0];let c=new e("span",{className:""===s[r][1]?"":"label"});c.innerText=s[r][1],o.append(c),n.append(i),n.append(o),u.append(n)}let f=new e("dev",{id:"cancel-area-show-version-dropdown"});l.append(f.$),l.append(u.$);let m=new e("div",{className:"version-dropdown",title:"Change version"});m.innerText=r;let $=new e("span",{className:""===i?"":"label"});$.innerText=i,m.append($),c.insertAdjacentElement("afterbegin",m.$);let g=new e(m.$.cloneNode(!0));m.onclick(this,this.show,[!0]),g.onclick(this,this.show,[!0]),f.onclick(this,this.show,[!0]),h.append(g.$),this.$.list=u,this.$.cancel=f}show(t){e.switchState(this.$.cancel),e.switchState(this.$.list)}}if(void 0===i)var i={objNameMatch:11,objPartialMatch:6,objPrio:{0:15,1:5,2:-5},objPrioDefault:0,title:15,partialTitle:7,term:5,partialTerm:2};class o{constructor(t){this.parent=t,this.index={},this.index_state={},this.key_prefix={};let s=this.$={};s.keyCheckbox={},s.searchUL={},s.searchLI={},s.body=new e(e.get("body")),s.searchAreaBg=new e(e.get(".search-area-bg")),null===s.searchAreaBg.$&&(s.searchAreaBg=new e("div",{className:"search-area-bg"}),s.body.append([s.searchAreaBg])),s.searchAreaBg.onclick(this,this.cancel_search),s.searchArea=new e(e.get(".search-area")),s.searchForm=new e(e.get("form",s.searchArea)).onevent("submit",this,e=>{e.preventDefault()}),s.searchFormButton=new e(e.get("button",s.searchForm)).onclick(this,this.cancel_search),s.searchInput=new e(e.get("input",s.searchForm)),s.searchTags=new e("span",{className:"search-filter",tabIndex:"-1"}).append([new e("div",{className:"title",innerText:"Search on"}).append([new e("code",{className:"literal",innerText:"Ctrl +"})])]),s.searchResults=new e("ul",{className:"search-results",tabIndex:"-1"}),s.searchContainer=new e("span",{className:"search-container"}).onclick(this,e=>{e.target===s.searchContainer.$&&this.cancel_search()}),this.$.searchContainer.append([this.$.searchTags,this.$.searchResults]),this.$.searchArea.append([this.$.searchContainer]),s.searchForm.$.action=e.get('link[rel="search"]').href,s.searchButton=new e(e.get("header button#search")),null===s.searchButton.$&&(s.searchButton=new e("button",{id:"search",className:"icon",title:"Search (/)"}),this.parent.navigation.$.rightHeader.append([s.searchButton])),s.searchButton.onclick(this,()=>{s.searchArea.classList.add("on"),s.searchAreaBg.classList.add("on"),s.searchInput.focus(),s.searchInput.$.select(),this.$.body.classList.add("overflow-hidden"),this.set_default()}),"object"==typeof this.parent.fetch?this.parent.fetch.then(this.init.bind(this)):this.init(),t.search=this}split_query(e){return e.split(/[^\p{Letter}\p{Number}_\p{Emoji_Presentation}]+/gu).filter(e=>e)}cancel_search(){this.$.searchArea.classList.remove("on"),this.$.searchAreaBg.classList.remove("on"),this.$.body.classList.remove("overflow-hidden");let e=new URL(location);e.searchParams.delete("q"),e.searchParams.delete("r"),history.replaceState({},null,e)}_orderResultsByScoreThenName=(e,t)=>{const s=e[4],r=t[4];if(s===r){const s=e[1].toLowerCase(),r=t[1].toLowerCase();return s===r?0:s>r?-1:1}return s>r?1:-1};async get_default_searchindex(e,s){const r=s&&"local"===e?location.origin:`${this.parent.state.metadata.remote_doc}${e}`;return await t.fetch_each(`${r}/tags.json`).then(t=>(this.key_prefix[e]=(e=>{let t="";if(!("error"in e)){let s=a.assert(e.obj);if(!0===s)return r;"fine-grained"==s&&(e.obj=a.object_to_string_array(e.obj));let n=e.obj;t=n.includes("")?"":n.includes("main")?"main/":n.some(e=>e.includes("adi_meta"))?`${n.find(e=>e.includes("adi_meta"))}/`:`${n.at(0)}/`}return`${r}/${t}`})(t),`${this.key_prefix[e]}searchindex.js`))}check_toc(e,t){if(t.target.checked){if(!1===this.index_state[e].requested){let t;return t=Object.hasOwn(this.parent.state,"sub_hosted")?!this.parent.state.sub_hosted:""===this.parent.state.subhost||void 0===this.parent.state.subhost,void this.get_default_searchindex(e,t).then(t=>{let s=new URL(t);this.load_index(s.href,e),this.index_state[e].requested=!0,this.$.keyCheckbox[e].classList.add("requested"),this.$.keyCheckbox[e].classList.remove("failed"),this.renew_search()})}this.query(this.$.searchInput.$.value)}else this.get_tags_and_update_url(this.$.searchInput.$.value);this.renew_search()}renew_search(){let t=[];for(const[s,r]of Object.entries(this.index_state))!0===this.$.keyCheckbox[s].$.checked&&!0===this.index_state[s].ready?(s in this.$.searchUL||(this.$.searchUL[s]=new e("ul"),this.$.searchLI[s]=new e("li").append([new e("div",{innerText:this.$.keyCheckbox[s].$.name}),this.$.searchUL[s]]),t.push(this.$.searchLI[s])),this.$.searchLI[s].classList.add("on")):s in this.$.searchUL&&this.$.searchLI[s].classList.remove("on");this.$.searchResults.append(t)}set_default(){for(const[e,t]of Object.entries(this.$.keyCheckbox))if(t.$.checked)return;let e="";e=Object.hasOwn(this.parent.state,"sub_hosted")?this.parent.state.sub_hosted?this.parent.state.repository:"local":""===this.parent.state.subhost||void 0===this.parent.state.subhost?"local":this.parent.state.repository;let t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))}search_shortcut(e){"IntlRo"!==e.code&&"Slash"!==e.code&&("KeyK"!==e.code||!e.ctrlKey&&!e.altKey)||this.$.searchArea.classList.contains("on")?"Escape"===e.code&&this.$.searchArea.classList.contains("on")&&this.cancel_search():(this.$.searchArea.classList.add("on"),this.$.searchAreaBg.classList.add("on"),this.$.body.classList.add("overflow-hidden"),this.$.searchInput.focus(),this.$.searchInput.$.select(),this.set_default())}load_index=(e,t)=>{let s=e=>{console.warn(e),this.index_state[t].requested=!1,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("failed"),this.$.keyCheckbox[t].$.checked=!1};const r=new Request(e);fetch(r).then(e=>e.text()).then(e=>{try{if("Search.setIndex("!=e.substring(0,16)||")"!=e.substring(e.length-1))throw new Error(`Search index of key '${t}' is impropetly formatted`);this.index[t]=JSON.parse(e.substring(16,e.length-1)),this.index_state[t].ready=!0,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("ready"),this.query(this.$.searchInput.$.value)}catch(e){s(e)}}).catch(s)};perform_object_search(e,t,s){const r=this.index[s].filenames,n=this.index[s].docnames,a=this.index[s].objects,o=this.index[s].objnames,c=this.index[s].titles,h=[];return Object.keys(a).forEach(s=>a[s].forEach(a=>((s,a)=>{const l=a[4],d=(s?s+".":"")+l,p=d.toLowerCase();if(p.indexOf(e)<0)return;let u=0;const f=p.split(".");p===e||f.slice(-1)[0]===e?u+=i.objNameMatch:f.slice(-1)[0].indexOf(e)>-1&&(u+=i.objPartialMatch);const m=o[a[1]][2],$=c[a[0]],g=new Set(t);if(g.delete(e),g.size>0){const e=`${s} ${l} ${m} ${$}`.toLowerCase();if([...g].some(t=>e.indexOf(t)<0))return}let y=a[3];""===y?y=d:"-"===y&&(y=o[a[1]][1]+"-"+d);const w=m+", in "+$;i.objPrio.hasOwnProperty(a[2])?u+=i.objPrio[a[2]]:u+=i.objPrioDefault,h.push([n[a[0]],d,"#"+y,w,u,r[a[0]],"object"])})(s,a))),h}perform_terms_search(e,t,s){const r=this.index[s].terms,n=this.index[s].titleterms,a=this.index[s].filenames,o=this.index[s].docnames,c=this.index[s].titles,h=new Map,l=new Map;e.forEach(e=>{const t=[],s=[{files:r.hasOwnProperty(e)?r[e]:void 0,score:i.term},{files:n.hasOwnProperty(e)?n[e]:void 0,score:i.title}];if(e.length>2){const t=e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");r.hasOwnProperty(e)||Object.keys(r).forEach(e=>{e.match(t)&&s.push({files:r[e],score:i.partialTerm})}),n.hasOwnProperty(e)||Object.keys(n).forEach(e=>{e.match(t)&&s.push({files:n[e],score:i.partialTitle})})}s.every(e=>void 0===e.files)||(s.forEach(s=>{if(void 0===s.files)return;let r=s.files;void 0===r.length&&(r=[r]),t.push(...r),r.forEach(t=>{h.has(t)||h.set(t,new Map);h.get(t).set(e,s.score)})}),t.forEach(t=>{l.has(t)?-1===l.get(t).indexOf(e)&&l.get(t).push(e):l.set(t,[e])}))});const d=[];for(const[s,i]of l){const l=[...e].filter(e=>e.length>2).length;if(i.length!==e.size&&i.length!==l)continue;if([...t].some(e=>r[e]===s||n[e]===s||(r[e]||[]).includes(s)||(n[e]||[]).includes(s)))break;const p=Math.max(...i.map(e=>h.get(s).get(e)));d.push([o[s],c[s],"",null,p,a[s],"text"])}return d}perform_search(e,t,s,r,n,a){const o=this.index[a].filenames,c=this.index[a].docnames,h=this.index[a].titles,l=this.index[a].alltitles,d=this.index[a].indexentries,p=[],u=[],f=e.toLowerCase().trim();for(const[e,t]of Object.entries(l))if(e.toLowerCase().trim().includes(f)&&f.length>=e.length/2)for(const[s,r]of t){const t=Math.round(i.title*f.length/e.length),n=h[s]===e?1:0;p.push([c[s],h[s]!==e?`${h[s]} > ${e}`:e,null!==r?"#"+r:"",null,t+n,o[s],"title"])}for(const[e,t]of Object.entries(d))if(e.includes(f)&&f.length>=e.length/2)for(const[s,r,n]of t){const t=Math.round(100*f.length/e.length),a=[c[s],h[s],r?"#"+r:"",null,t,o[s],"index"];n?p.push(a):u.push(a)}n.forEach(e=>p.push(...this.perform_object_search(e,n,a))),p.push(...this.perform_terms_search(t,s,a)),i.score&&(p.forEach(e=>e[4]=i.score(e)),u.forEach(e=>e[4]=i.score(e))),p.sort(this._orderResultsByScoreThenName),u.sort(this._orderResultsByScoreThenName);let m=[...u,...p],$=new Set;return m=m.reverse().reduce((e,t)=>{let s=t.slice(0,4).concat([t[5]]).map(e=>String(e)).join(",");return $.has(s)||(e.push(t),$.add(s)),e},[]),m.reverse()}get_tags_and_update_url(e){const t=[];for(const[e,s]of Object.entries(this.index_state))!0===this.$.keyCheckbox[e].$.checked&&void 0!==this.index[e]&&t.push(e);let s=new URL(location);return e.length>0?(s.searchParams.set("q",e),s.searchParams.set("r",t)):(s.searchParams.delete("q"),s.searchParams.delete("r")),history.replaceState({},null,s),t}html_to_text(e,t){const s=(new DOMParser).parseFromString(e,"text/html");for(const e of[".headerlink","script","style"])s.querySelectorAll(e).forEach(e=>{e.remove()});if(t){const e=s.querySelector(`[role="main"] ${t}`);if(e)return e.textContent;console.warn(`Anchored content block '[role=main] ${t}' not found.`)}const r=s.querySelector('[role="main"]');return r?r.textContent:(console.warn(`Anchored content block '[role=main] ${t}' not found.`),"")}get_summary(e,t,s,r){const n=this.html_to_text(e,s);if(""===n)return;const a=n.toLowerCase(),i=[...t].map(e=>a.indexOf(e.toLowerCase())).filter(e=>e>-1).slice(-1)[0],o=Math.max(i-120,0),c=0===o?"":"...",h=o+240<n.length?"...":"";r.$.textContent=c+n.substr(o,240).trim()+h,r.$.classList.remove("loading")}query(t){if("undefined"==typeof Stemmer)return;const[s,r,n,a,i]=this.parse_query(t);this.renew_search(),this.get_tags_and_update_url(t).forEach(t=>{const o=this.perform_search(s,r,n,a,i,t);for(;this.$.searchUL[t].$.firstChild;)this.$.searchUL[t].$.removeChild(this.$.searchUL[t].$.lastChild);let c=[];o.reverse(),o.forEach(s=>{const[n,a,i,o,h,l,d]=s;let p=`${this.key_prefix[t]}${n}.html${i}`,u=new e("li").append(new e("a",{href:p,innerText:a}));if(o)u.append(new e("span",{innerText:`(${o})`}));else{let t=new e("p",{className:"context"});const s=setTimeout(()=>{t.classList.add("loading")},50);u.append(t),fetch(p).then(e=>e.text()).then(e=>{e&&this.get_summary(e,r,i,t)}).finally(()=>{clearTimeout(s)})}c.push(u)}),this.$.searchUL[t].append(c),0===o.length?this.$.searchLI[t].classList.add("empty"):this.$.searchLI[t].classList.remove("empty")})}parse_query(e){const t=new Stemmer,s=new Set,r=new Set,n=new Set,a=new Set(this.split_query(e.toLowerCase().trim()));return this.split_query(e.trim()).forEach(e=>{const a=e.toLowerCase();if(-1!==stopwords.indexOf(a)||e.match(/^\d+$/))return;let i=t.stemWord(a);"-"===i[0]?r.add(i.substr(1)):(s.add(i),n.add(a))}),localStorage.setItem("sphinx_highlight_terms",[...n].join(" ")),[e,s,r,n,a]}select_filter_tags(e){this.$.searchArea.classList.contains("on")&&this.$.searchTags.classList.contains("on")&&Object.values(this.$.keyCheckbox).forEach(t=>{if(t.$.dataset.shortcut==e.key){e.preventDefault();let s=new Event("change");t.$.checked=!t.$.checked,t.$.dispatchEvent(s)}})}keyup(e){switch(e.code){case"IntlRo":case"Slash":case"Escape":case"KeyK":this.search_shortcut(e);break;case"ControlLeft":case"ControlRight":this.$.searchTags.classList.remove("on")}}keydown(e){switch(e.code){case"IntlRo":case"Slash":e.preventDefault();break;case"KeyK":e.ctrlKey&&e.altKey&&e.preventDefault();break;case"ControlLeft":case"ControlRight":this.$.searchTags.classList.add("on")}this.select_filter_tags(e)}focus(e){this.$.searchTags.classList.contains("on")&&this.$.searchTags.classList.remove("on")}include_item(t,s,r){this.index_state[t]={ready:!1,requested:!1};let n=new e("input",{id:`tag-${t}`,type:"checkbox",name:s,shortcut:r}).onchange(this,this.check_toc,[t]);this.$.searchTags.append([new e("span").append([n,new e("label",{htmlFor:`tag-${t}`}).append([new e("span",{innerText:r,className:"checkbox"}),new e("span",{innerText:s})])])]),this.$.keyCheckbox[t]=n}init(){let s,r=t.get_alphanumeric(),n=new URL(`${this.parent.state.content_root}_static/language_data.js`,location);this.$.language_data=new e("script",{src:n.href,async:!0}).onevent("load",this,e=>{this.$.searchForm.$.action=""}),this.$.body.append([this.$.language_data]);for(const[e,t]of Object.entries(this.parent.state.metadata.repotoc))this.include_item(e,t.name,r.shift());if(s=Object.hasOwn(this.parent.state,"sub_hosted")?this.parent.state.sub_hosted:""!==this.parent.state.subhost&&void 0!==this.parent.state.subhost,!s){let e=this.parent.state.repository in this.parent.state.metadata.repotoc?this.parent.state.metadata.repotoc[this.parent.state.repository].name:this.parent.state.repository;this.include_item("local",`${e} (local build)`,r.shift())}this.$.searchInput.$.oninput=e=>{this.query(e.target.value)};let a=new URL(location),i=a.searchParams.get("q"),o=a.searchParams.get("r");if(null!==i){null!==o&&(o=o.split(","),o.forEach(e=>{let t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))})),this.$.searchInput.$.value=i;let e=new Event("click");this.$.searchButton.$.dispatchEvent(e)}document.addEventListener("keyup",e=>{this.keyup(e)},!1),document.addEventListener("keydown",e=>{this.keydown(e)},!1),document.addEventListener("focus",e=>{this.focus(e)})}}class c{constructor(e){this.$={},this.parent=e,this.init()}draw_page_source(s,r){let n=new e("div",{className:"page-actions"}),a=new e("a",{className:"edit-source",title:"See and edit this page source",href:s,target:"blank"});a.onclick(this,(e,s,r)=>{r.preventDefault(),t.try_include(s,e.$.href,!0)},[a,r]),a.onauxclick(this,(e,s,r)=>{r.preventDefault(),t.try_include(s,e.$.href,!0)},[a,r]),n.append(a.$);let i=e.get(".bodywrapper .body-header");null===i?(i=e.get(".bodywrapper .body"),i.insertAdjacentElement("afterbegin",n.$)):i.insertAdjacentElement("beforeend",n.$)}copy_button(){let t=new e(e.get(".bodywrapper .body"));e.getAll("div.highlight pre",t.$).forEach(t=>{if(t.parentNode.parentNode.classList.contains("no-select"))return;if(2===t.children.length&&t.children[1].classList.contains("c1"))return;let s=t.textContent.replaceAll("\n","");s.length>20&&(s=s.slice(0,20)+"...");let r=new e("button",{className:"icon copy",title:`Copy "${s}"`}).onclick(this,(e,t)=>{navigator.clipboard.writeText(e.textContent).then(()=>{}).catch(e=>{console.error(e)})},[t]);t.insertAdjacentElement("afterend",r.$)})}unused(){let e=(()=>{let e=document.querySelector('meta[name="page_source_suffix"]');return null===e?".rst":e.content})(),t=e=>e.replace("{repository}",r).replace("{branch}",m.repotoc[r].branch).replace("{pathname}",m.repotoc[r].pathname),s=t(m.source_hostname),n=t(m.source_hostname_raw),a="";a=this.parent.state.offline?new URL("file://"+location.pathname).href:new URL(location.pathname,location.origin).href;let i=new URL(this.parent.state.content_root,a).href,o=a.substring(i.length);o=o.endsWith(".html")?o.replace(/\.html$/i,e):o.concat(`index${e}`),s=s.concat("/",o),n=n.concat("/",o),this.draw_page_source(s,n)}init(){document.querySelector('script[src*="_static/copybutton.js"]')?console.log("copy_button: sphinx-copy-button extension is present, skipping"):this.copy_button()}}function h(){new s(app),new n(app),new o(app),new a(app),new c(app)}return h(),h});
//# sourceMappingURL=extra.umd.js.map
