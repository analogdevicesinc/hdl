!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Extra=t()}(this,(function(){"use strict";class e{constructor(e,t){if(this.$,"string"==typeof e){if(this.$=document.createElement(e),"object"==typeof t)for(const e in t)e in this.$?this.$[e]=t[e]:this.$.dataset[e]=t[e]}else this.$=e}cloneNode(t){return new e(this.$.cloneNode(t))}set innerText(e){this.$.innerText=e}get innerText(){return this.$.innerText}get height(){return this.$.offsetHeight}get width(){return this.$.offsetWidth}get id(){return this.$.id}set id(e){this.$.id=e}get value(){return this.$.value}set value(e){this.$.value=e}get src(){return this.$.src}set src(e){this.$.src=e}focus(){this.$.focus()}get classList(){return this.$.classList}get style(){return this.$.style}onchange(e,t,s){return this.$.onchange=r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))},this}onclick(e,t,s){return this.$.onclick=r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))},this}onup(e,t,s){return this.$.addEventListener("mouseup",(r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))})),this}ondown(e,t,s){return this.$.addEventListener("mousedown",(r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))})),this}onmove(e,t,s){return this.$.addEventListener("mousemove",(r=>{void 0===s?t.apply(e,[r]):s.constructor==Array&&(s.push(r),t.apply(e,s))})),this}onevent(e,t,s,r){return this.$.addEventListener(e,(e=>{void 0===r?s.apply(t,[e]):r.constructor==Array&&(r.push(e),s.apply(t,r))})),this}append(e){return e.constructor!=Array&&(e=[e]),e.forEach((e=>{/HTML(.*)Element/.test(e.constructor.name)?this.$.appendChild(e):"object"==typeof e&&/HTML(.*)Element/.test(e.$.constructor.name)&&this.$.appendChild(e.$)})),this}delete(){this.$.remove()}removeChilds(){let e=this.$.lastElementChild;for(;e;)this.$.removeChild(e),e=this.$.lastElementChild;return this}static get(t,s){return void 0===(s=s instanceof e?s.$:s)?document.querySelector(t):s.querySelector(t)}static getAll(t,s){return"object"==typeof(s=s instanceof e?s.$:s)?s.querySelectorAll(t):get(s).querySelectorAll(t)}static switchState(t,s){let r=null!=s?s:"on";(t=t instanceof e?t.$:t).classList.contains(r)?t.classList.remove(r):t.classList.add(r)}static UID(){return(+new Date).toString(36)+Math.random().toString(36).substr(2)}static prototypeDetails(t){let s=new e("summary",{innerText:t.innerText}),r=new e("details",{id:t.id,name:t.id}).append(s);return null!=t.onevent&&t.onevent.forEach((e=>{e.args.push(r.$),s.onevent(e.event,e.self,e.fun,e.args)})),r}static prototypeInputFile(t){return new e("label",{htmlFor:`${t.id}_input`,id:t.id,className:t.className,innerText:t.innerText}).append(new e("input",{id:`${t.id}_input`,type:"file"}))}static prototypeCheckSwitch(t){let s=new e("input",{id:t.id,name:t.id,className:"checkswitch",type:"checkbox",value:!1});return[s,new e("div",{className:t.className}).append([new e("div").append([new e("label",{className:"checkswitch",htmlFor:t.id,innerText:t.innerText}).append([s,new e("span")])])])]}static prototypeDownload(e,t){let s,r=/.*\.(py|xml|csv|json|svg|png)$/;if(!r.test(e))return;let a=e.match(r)[1];switch(e=e.replaceAll("/","-").replaceAll(" ","_").toLowerCase(),a){case"xml":s="data:x-application/xml;charset=utf-8,"+encodeURIComponent(t);break;case"py":s="data:text/python;charset=utf-8,"+encodeURIComponent(t);break;case"json":s="data:text/json;charset=utf-8,"+encodeURIComponent(t);break;case"csv":s="data:text/csv;charset=utf-8,"+encodeURIComponent(t);break;case"svg":s="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t);break;case"png":s=t}let n=document.createElement("a");n.setAttribute("href",s),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}static setSelected(e,t){for(var s=0;s<e.$.options.length;s++)if(e.$.options[s].text==t)return void(e.$.options[s].selected=!0)}static lazyUpdate(t,s,r,a){a=null==a?"innerText":a;let n=e.get(`[data-uid='${s}']`,t);for(const t in r)e.get(`#${t}`,n)[a]=r[t]}}class t{static randomChar(){const e="abcdefghijklmnopqrstuvwxyz";return e[Math.floor(26*Math.random())]}static UID(){return this.randomChar()+(+new Date).toString(36)+Math.random().toString(36).substring(3)}static SID(){return this.randomChar()+Math.random().toString(36).substring(3,8)}static fromUrl(e){let t=new URLSearchParams(document.location.search);return null==t.get(e)?this.urlDefaults(e):this.urlValidParams(e,t.get(e))}static urlDefaults(e){if("theme"===e)return"light"}static urlValidParams(e,t){if("theme"===e)return["dark","light"].includes(t)?t:this.urlDefaults(e)}static cleanPathname(e){return e.replace(/([^:]\/)\/+/g,"$1").replace(/[^:]\.\//g,"$1")}static getDepth(e){return(e.match(/\//g)||[]).length}static async try_redirect(e,t){try{404===(await fetch(e,{method:"HEAD"})).status?location.href=t:location.href=e}catch(e){location.href=t}}static async fetch_each(e){for(let t of e)try{const e=new Request(t),s=await fetch(e);if(!0===s.ok)return{obj:await s.json(),url:t};if(404!==s.status)return{error:s,url:t}}catch(e){return{error:e,url:t}}return{error:`No url returned a valid JSON, urls: ${e}`}}static cache_check(e,s,r,a){Array.isArray(s)||(s=[s]);let n=s[0],i=localStorage.getItem(n);null!==i&&(i=JSON.parse(i));let o=new Date(0);o.setHours(r),!0===e.reloaded||null===i||i.timestamp+o.valueOf()<Date.now()?t.fetch_each(s).then((e=>{"error"in e?console.error("Failed to fetch resource, due to:",e.error):(e.timestamp=Date.now(),a(e),localStorage.setItem(n,JSON.stringify(e)))})):a(i)}}class s{constructor(e){this.$={},this.parent=e,this.prefix=this.parent.state.sub_hosted?`/${this.parent.state.repository}`:"",this.init()}init(){this.parent.state.offline||t.cache_check(this.parent.state,`${this.prefix}/tags.json`,2,(e=>{this.render(e.obj)}))}assert(e){if(Array.isArray(e))return e.every((e=>"string"==typeof e))?"string-array":(console.warn("version_dropdown: expected array of strings, got ",e),!0);if("[object Object]"===Object.prototype.toString.call(e)){for(let t in e){if(!Array.isArray(e[t]))return console.warn("version_dropdown: expected array, got ",e[t]),!0;if(2!==e[t].length)return console.warn(`version_dropdown: expected two items, got ${e[t].length}`,e[t]),!0}return"fine-grained"}return console.warn("version_dropdown: expected object of arrays or array of strings, got ",e),!0}string_array_to_object(e){let t={};e.forEach((e=>{t[e]=[e,""]})),""in t&&(t[""]=["main","unstable"]);for(const e in t){t[e]=[t[e][0],"latest"];break}return t}render(s){let r=this.parent.state.version,a=this.parent.state.path,n="",i=this.assert(s);if(!0===i)return;"string-array"==i&&(s=this.string_array_to_object(s));let o=e.get(".sphinxsidebarwrapper .toc-tree"),c=e.get("header #right .reverse"),h=e.get("body"),l=Object.keys(s).length>10?4:2,d=" auto".repeat(l),p=new e("div",{className:"version-dropdown-list",style:`grid-template-columns:${d}`});s.hasOwnProperty(a)?(n=s[a][1],r=s[a][0]):console.warn(`version_dropdown: current path ${a} is not in the tags.json. Hard-coded meta[name="version"] will be used.`,s);for(let r in s){let a=new e("a",{href:r.length>0?`${this.prefix}/${r}`:`${this.prefix}`});a.onclick(this,((e,s)=>{s.preventDefault();let r=app.state.path.length>0?`${this.prefix}/${app.state.path}`:`${this.prefix}`,a=location.pathname+location.hash;if(a.startsWith(r)){let s=e.$.href+a.substring(r.length);t.try_redirect(s,e.$.href)}else location.url(e.$.url)}),[a]);let n=new e("div"),i=new e("div");n.innerText=s[r][0];let o=new e("span",{className:""===s[r][1]?"":"label"});o.innerText=s[r][1],i.append(o),a.append(n),a.append(i),p.append(a)}let u=new e("dev",{id:"cancel-area-show-version-dropdown"});h.append(u.$),h.append(p.$);let m=new e("div",{className:"version-dropdown",title:"Change version"});m.innerText=r;let f=new e("span",{className:""===n?"":"label"});f.innerText=n,m.append(f),o.insertAdjacentElement("afterbegin",m.$);let $=new e(m.$.cloneNode(!0));m.onclick(this,this.show,[!0]),$.onclick(this,this.show,[!0]),u.onclick(this,this.show,[!0]),c.append($.$),this.$.list=p,this.$.cancel=u}show(t){e.switchState(this.$.cancel),e.switchState(this.$.list)}}class r{constructor(t){this.$={},this.$.show_repotoc=new e(e.get("#input-show-repotoc")).onchange(this,this.renew_index),this.set_doms(),this.parent=t;let s=t.state.metadata;"repotoc"in s&&this.update_repotoc(s.repotoc),"banner"in s&&this.update_banner(s.banner)}set_doms(){let t=this.$;t.repotocTreeOverlay=new e(e.get(".repotoc-tree.overlay root")),t.repotocTreeSidebar=new e(e.get(".sphinxsidebar .repotoc-tree root")),t.banner=new e("div",{className:"banner"}),e.get("body").prepend(t.banner.$)}renew_index(e){this.$.linksSidebar.forEach((t=>{t.$.tabIndex=e.target.checked?0:-1})),this.$.linksOverlay.forEach((t=>{t.$.tabIndex=e.target.checked?0:-1}))}update_repotoc(t){let s=this.$,r=!0===this.parent.state.sub_hosted?"/":this.parent.state.metadata.remote_doc;this.$.linksOverlay=[],this.$.linksSidebar=[];for(const[s,a]of Object.entries(t)){if(!("name"in a))continue;let t=s==this.parent.state.repository?this.parent.state.content_root:`${r}${s}/`;this.$.linksSidebar.push(new e("a",{href:`${t}index.html`,className:this.parent.state.repository===s?"current":"",innerText:a.name}))}this.$.linksSidebar.forEach((e=>{this.$.linksOverlay.push(e.cloneNode(!0))})),s.repotocTreeOverlay.$&&(s.repotocTreeOverlay.removeChilds(),s.repotocTreeOverlay.append(this.$.linksOverlay)),s.repotocTreeSidebar.$&&(s.repotocTreeSidebar.removeChilds(),s.repotocTreeSidebar.append(this.$.linksSidebar));let a=new Event("change");this.$.show_repotoc.$.dispatchEvent(a)}update_banner(t){let s=this.$;"msg"in t&&s.banner.append(new e("span",{innerText:t.msg})),"a_href"in t&&"a_text"in t&&s.banner.append(new e("a",{href:t.a_href,innerText:t.a_text,target:"_blank"}))}}class a{constructor(e){this.$={},this.parent=e,this.page_source()}page_source_sanity(e,t){return e.hasOwnProperty("source_hostname")?e.repotoc.hasOwnProperty(t)?e.repotoc[t].hasOwnProperty("pathname")?e.repotoc[t].hasOwnProperty("branch")?void 0:(console.warn(`edit_source: 'branch' missing from entry '${t}'`),!0):(console.warn(`edit_source: 'pathname' missing from entry '${t}'`),!0):(console.warn(`edit_source: repository '${t}' not in the metadata`),!0):(console.warn("edit_source: 'source_hostname' missing from the metadata",e),!0)}page_source_ignore(){return null!==document.querySelector("#search-documentation")}draw_page_source(t){let s=new e("div",{className:"page-actions"}),r=new e("a",{className:"edit-source",title:"See and edit this page source",href:t,target:"blank"});s.append(r.$);let a=e.get(".bodywrapper .body-header");null===a?(a=e.get(".bodywrapper .body"),a.insertAdjacentElement("afterbegin",s.$)):a.insertAdjacentElement("beforeend",s.$)}page_source(){let e=this.parent.state.metadata,t=this.parent.state.repository;if(this.page_source_sanity(e,t))return;if(this.page_source_ignore())return;let s=e.source_hostname.replace("{repository}",t).replace("{branch}",e.repotoc[t].branch).replace("{pathname}",e.repotoc[t].pathname),r="";r=this.parent.state.offline?new URL("file://"+location.pathname).href:new URL(location.pathname,location.origin).href;let a=new URL(this.parent.state.content_root,r).href,n=r.substring(a.length);n=n.endsWith(".html")?n.replace(/\.html$/i,".rst"):n.concat("index.rst"),s=s.concat("/",n),this.draw_page_source(s)}}if(void 0===n)var n={objNameMatch:11,objPartialMatch:6,objPrio:{0:15,1:5,2:-5},objPrioDefault:0,title:15,partialTitle:7,term:5,partialTerm:2};class i{constructor(t){this.parent=t,this.index={},this.index_state={};let s=this.$={};s.keyCheckbox={},s.searchUL={},s.searchLI={},s.body=new e(e.get("body")),s.searchAreaBg=new e(e.get(".search-area-bg")),null===s.searchAreaBg.$&&(s.searchAreaBg=new e("div",{className:"search-area-bg"}),s.body.append([s.searchAreaBg])),s.searchAreaBg.onclick(this,this.cancel_search),s.searchArea=new e(e.get(".search-area")),s.searchForm=new e(e.get("form",s.searchArea)).onevent("submit",this,(e=>{e.preventDefault()})),s.searchFormButton=new e(e.get("button",s.searchForm)).onclick(this,this.cancel_search),s.searchInput=new e(e.get("input",s.searchForm)),s.searchTags=new e("span",{className:"search-filter",tabIndex:"-1"}),s.searchResults=new e("ul",{className:"search-results",tabIndex:"-1"}),s.searchContainer=new e("span",{className:"search-container"}).onclick(this,(e=>{e.target===s.searchContainer.$&&this.cancel_search()})),this.$.searchContainer.append([this.$.searchTags,this.$.searchResults]),this.$.searchArea.append([this.$.searchContainer]),s.searchForm.$.action=e.get('link[rel="search"]').href,s.searchButton=new e(e.get("header button#search")),null===s.searchButton.$&&(s.searchButton=new e("button",{id:"search",className:"icon",title:"Search (/)"}),this.parent.navigation.$.rightHeader.append([s.searchButton])),s.searchButton.onclick(this,(()=>{s.searchArea.classList.add("on"),s.searchAreaBg.classList.add("on"),s.searchInput.focus(),s.searchInput.$.select(),this.$.body.classList.add("overflow-hidden"),this.set_default()})),this.init(),t.search=this}split_query(e){return e.split(/[^\p{Letter}\p{Number}_\p{Emoji_Presentation}]+/gu).filter((e=>e))}cancel_search(){this.$.searchArea.classList.remove("on"),this.$.searchAreaBg.classList.remove("on"),this.$.body.classList.remove("overflow-hidden");let e=new URL(location);e.searchParams.delete("q"),e.searchParams.delete("r"),history.replaceState({},null,e)}_orderResultsByScoreThenName=(e,t)=>{const s=e[4],r=t[4];if(s===r){const s=e[1].toLowerCase(),r=t[1].toLowerCase();return s===r?0:s>r?-1:1}return s>r?1:-1};check_toc(e,t){if(t.target.checked)if(!1===this.index_state[e].requested){let t=`${this.parent.state.metadata.remote_doc}${e}/searchindex.js`;this.parent.state.sub_hosted||"local"!==e||(t=`${location.origin}/searchindex.js`);let s=new URL(t);this.load_index(s.href,e),this.index_state[e].requested=!0,this.$.keyCheckbox[e].classList.add("requested"),this.$.keyCheckbox[e].classList.remove("failed")}else this.query(this.$.searchInput.$.value);else this.get_tags_and_update_url(this.$.searchInput.$.value);this.renew_search()}renew_search(){let t=[];for(const[s,r]of Object.entries(this.index_state))!0===this.$.keyCheckbox[s].$.checked&&!0===this.index_state[s].ready?(s in this.$.searchUL||(this.$.searchUL[s]=new e("ul"),this.$.searchLI[s]=new e("li").append([new e("div",{innerText:this.$.keyCheckbox[s].$.name}),this.$.searchUL[s]]),t.push(this.$.searchLI[s])),this.$.searchLI[s].classList.add("on")):s in this.$.searchUL&&this.$.searchLI[s].classList.remove("on");this.$.searchResults.append(t)}set_default(){for(const[e,t]of Object.entries(this.$.keyCheckbox))if(t.$.checked)return;let e=this.parent.state.sub_hosted?this.parent.state.repository:"local",t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))}search_shortcut(e){"IntlRo"!==e.code&&"Slash"!==e.code&&("KeyK"!==e.code||!e.ctrlKey&&!e.altKey)||this.$.searchArea.classList.contains("on")?"Escape"===e.code&&this.$.searchArea.classList.contains("on")&&this.cancel_search():(this.$.searchArea.classList.add("on"),this.$.searchAreaBg.classList.add("on"),this.$.body.classList.add("overflow-hidden"),this.$.searchInput.focus(),this.$.searchInput.$.select(),this.set_default())}load_index=(e,t)=>{let s=e=>{console.warn(e),this.index_state[t].requested=!1,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("failed"),this.$.keyCheckbox[t].$.checked=!1};const r=new Request(e);fetch(r).then((e=>e.text())).then((e=>{try{if("Search.setIndex("!=e.substring(0,16)||")"!=e.substring(e.length-1))throw new Error(`Search index of key '${t}' is impropetly formatted`);this.index[t]=JSON.parse(e.substring(16,e.length-1)),this.index_state[t].ready=!0,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("ready"),this.query(this.$.searchInput.$.value)}catch(e){s(e)}})).catch(s)};perform_object_search(e,t,s){const r=this.index[s].filenames,a=this.index[s].docnames,i=this.index[s].objects,o=this.index[s].objnames,c=this.index[s].titles,h=[];return Object.keys(i).forEach((s=>i[s].forEach((i=>((s,i)=>{const l=i[4],d=(s?s+".":"")+l,p=d.toLowerCase();if(p.indexOf(e)<0)return;let u=0;const m=p.split(".");p===e||m.slice(-1)[0]===e?u+=n.objNameMatch:m.slice(-1)[0].indexOf(e)>-1&&(u+=n.objPartialMatch);const f=o[i[1]][2],$=c[i[0]],g=new Set(t);if(g.delete(e),g.size>0){const e=`${s} ${l} ${f} ${$}`.toLowerCase();if([...g].some((t=>e.indexOf(t)<0)))return}let y=i[3];""===y?y=d:"-"===y&&(y=o[i[1]][1]+"-"+d);const w=f+", in "+$;n.objPrio.hasOwnProperty(i[2])?u+=n.objPrio[i[2]]:u+=n.objPrioDefault,h.push([a[i[0]],d,"#"+y,w,u,r[i[0]],"object"])})(s,i))))),h}perform_terms_search(e,t,s){const r=this.index[s].terms,a=this.index[s].titleterms,i=this.index[s].filenames,o=this.index[s].docnames,c=this.index[s].titles,h=new Map,l=new Map;e.forEach((e=>{const t=[],s=[{files:r.hasOwnProperty(e)?r[e]:void 0,score:n.term},{files:a.hasOwnProperty(e)?a[e]:void 0,score:n.title}];if(e.length>2){const t=e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");r.hasOwnProperty(e)||Object.keys(r).forEach((e=>{e.match(t)&&s.push({files:r[e],score:n.partialTerm})})),a.hasOwnProperty(e)||Object.keys(a).forEach((e=>{e.match(t)&&s.push({files:a[e],score:n.partialTitle})}))}s.every((e=>void 0===e.files))||(s.forEach((s=>{if(void 0===s.files)return;let r=s.files;void 0===r.length&&(r=[r]),t.push(...r),r.forEach((t=>{h.has(t)||h.set(t,new Map);h.get(t).set(e,s.score)}))})),t.forEach((t=>{l.has(t)?-1===l.get(t).indexOf(e)&&l.get(t).push(e):l.set(t,[e])})))}));const d=[];for(const[s,n]of l){const l=[...e].filter((e=>e.length>2)).length;if(n.length!==e.size&&n.length!==l)continue;if([...t].some((e=>r[e]===s||a[e]===s||(r[e]||[]).includes(s)||(a[e]||[]).includes(s))))break;const p=Math.max(...n.map((e=>h.get(s).get(e))));d.push([o[s],c[s],"",null,p,i[s],"text"])}return d}perform_search(e,t,s,r,a,i){const o=this.index[i].filenames,c=this.index[i].docnames,h=this.index[i].titles,l=this.index[i].alltitles,d=this.index[i].indexentries,p=[],u=[],m=e.toLowerCase().trim();for(const[e,t]of Object.entries(l))if(e.toLowerCase().trim().includes(m)&&m.length>=e.length/2)for(const[s,r]of t){const t=Math.round(n.title*m.length/e.length),a=h[s]===e?1:0;p.push([c[s],h[s]!==e?`${h[s]} > ${e}`:e,null!==r?"#"+r:"",null,t+a,o[s],"title"])}for(const[e,t]of Object.entries(d))if(e.includes(m)&&m.length>=e.length/2)for(const[s,r,a]of t){const t=Math.round(100*m.length/e.length),n=[c[s],h[s],r?"#"+r:"",null,t,o[s],"index"];a?p.push(n):u.push(n)}a.forEach((e=>p.push(...this.perform_object_search(e,a,i)))),p.push(...this.perform_terms_search(t,s,i)),n.score&&(p.forEach((e=>e[4]=n.score(e))),u.forEach((e=>e[4]=n.score(e)))),p.sort(this._orderResultsByScoreThenName),u.sort(this._orderResultsByScoreThenName);let f=[...u,...p],$=new Set;return f=f.reverse().reduce(((e,t)=>{let s=t.slice(0,4).concat([t[5]]).map((e=>String(e))).join(",");return $.has(s)||(e.push(t),$.add(s)),e}),[]),f.reverse()}get_tags_and_update_url(e){const t=[];for(const[e,s]of Object.entries(this.index_state))!0===this.$.keyCheckbox[e].$.checked&&void 0!==this.index[e]&&t.push(e);let s=new URL(location);return e.length>0?(s.searchParams.set("q",e),s.searchParams.set("r",t)):(s.searchParams.delete("q"),s.searchParams.delete("r")),history.replaceState({},null,s),t}html_to_text(e,t){const s=(new DOMParser).parseFromString(e,"text/html");for(const e of[".headerlink","script","style"])s.querySelectorAll(e).forEach((e=>{e.remove()}));if(t){const e=s.querySelector(`[role="main"] ${t}`);if(e)return e.textContent;console.warn(`Anchored content block '[role=main] ${t}' not found.`)}const r=s.querySelector('[role="main"]');return r?r.textContent:(console.warn(`Anchored content block '[role=main] ${t}' not found.`),"")}get_summary(e,t,s,r){const a=this.html_to_text(e,s);if(""===a)return;const n=a.toLowerCase(),i=[...t].map((e=>n.indexOf(e.toLowerCase()))).filter((e=>e>-1)).slice(-1)[0],o=Math.max(i-120,0),c=0===o?"":"...",h=o+240<a.length?"...":"";r.$.textContent=c+a.substr(o,240).trim()+h,r.$.classList.remove("loading")}query(t){if("undefined"==typeof Stemmer)return;const[s,r,a,n,i]=this.parse_query(t);this.renew_search(),this.get_tags_and_update_url(t).forEach((t=>{const o=this.perform_search(s,r,a,n,i,t);for(;this.$.searchUL[t].$.firstChild;)this.$.searchUL[t].$.removeChild(this.$.searchUL[t].$.lastChild);let c=[],h="local"===t?"":`${this.parent.state.metadata.remote_doc}${t}`;o.reverse(),o.forEach((t=>{const[s,a,n,i,o,l,d]=t;let p=`${h}/${s}.html${n}`,u=new e("li").append(new e("a",{href:p,innerText:a}));if(i)u.append(new e("span",{innerText:`(${i})`}));else{let t=new e("p",{className:"context"});const s=setTimeout((()=>{t.classList.add("loading")}),50);u.append(t),fetch(p).then((e=>e.text())).then((e=>{e&&this.get_summary(e,r,n,t)})).finally((()=>{clearTimeout(s)}))}c.push(u)})),this.$.searchUL[t].append(c),0===o.length?this.$.searchLI[t].classList.add("empty"):this.$.searchLI[t].classList.remove("empty")}))}parse_query(e){const t=new Stemmer,s=new Set,r=new Set,a=new Set,n=new Set(this.split_query(e.toLowerCase().trim()));return this.split_query(e.trim()).forEach((e=>{const n=e.toLowerCase();if(-1!==stopwords.indexOf(n)||e.match(/^\d+$/))return;let i=t.stemWord(n);"-"===i[0]?r.add(i.substr(1)):(s.add(i),a.add(n))})),localStorage.setItem("sphinx_highlight_terms",[...a].join(" ")),[e,s,r,a,n]}keyup(e){switch(e.code){case"IntlRo":case"Slash":case"Escape":case"KeyK":this.search_shortcut(e)}}keydown(e){switch(e.code){case"IntlRo":case"Slash":return void e.preventDefault();case"KeyK":return void(e.ctrlKey&&e.altKey&&e.preventDefault())}}include_item(t,s){this.index_state[t]={ready:!1,requested:!1};let r=new e("input",{id:`tag-${t}`,type:"checkbox",name:s}).onchange(this,this.check_toc,[t]);this.$.searchTags.append([new e("span").append([r,new e("label",{htmlFor:`tag-${t}`,innerText:s})])]),this.$.keyCheckbox[t]=r}init(){let t=new URL(`${this.parent.state.content_root}_static/language_data.js`,location);this.$.language_data=new e("script",{src:t.href,async:!0}).onevent("load",this,(e=>{this.$.searchForm.$.action=""})),this.$.body.append([this.$.language_data]);for(const[e,t]of Object.entries(this.parent.state.metadata.repotoc))this.include_item(e,t.name);if(!this.parent.state.sub_hosted){let e=this.parent.state.repository in this.parent.state.metadata.repotoc?this.parent.state.metadata.repotoc[this.parent.state.repository].name:this.parent.state.repository;this.include_item("local",`${e} (local build)`)}this.$.searchInput.$.oninput=e=>{this.query(e.target.value)};let s=new URL(location),r=s.searchParams.get("q"),a=s.searchParams.get("r");if(null!==r){null!==a&&(a=a.split(","),a.forEach((e=>{let t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))}))),this.$.searchInput.$.value=r;let e=new Event("click");this.$.searchButton.$.dispatchEvent(e)}document.addEventListener("keyup",(e=>{this.keyup(e)}),!1),document.addEventListener("keydown",(e=>{this.keydown(e)}),!1)}}function o(){new r(app),new a(app),new i(app),new s(app)}return o(),o}));
//# sourceMappingURL=extra.umd.js.map
