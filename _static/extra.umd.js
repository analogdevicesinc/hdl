!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Extra=t()}(this,function(){"use strict";class e{constructor(e){Object.hasOwn(e.state,"sub_hosted")&&(e.state.subhost=!0===e.state.sub_hosted?`/${e.state.repository}`:"",delete e.state.sub_hosted),Object.hasOwn(e.state,"standalone")||(e.state.standalone=!!document.querySelector('meta[name="standalone"]'))}}class t{constructor(e,t){if(this.$,"string"==typeof e){if(this.$=document.createElement(e),"object"==typeof t)for(const e in t)e in this.$?this.$[e]=t[e]:this.$.dataset[e]=t[e]}else this.$=e}static new(e,t){let s=document.createElement(e);if("object"==typeof t)for(const e in t)e in s?s[e]=t[e]:s.dataset[e]=t[e];return s}cloneNode(e){return new t(this.$.cloneNode(e))}set innerText(e){this.$.innerText=e}get innerText(){return this.$.innerText}get height(){return this.$.offsetHeight}get width(){return this.$.offsetWidth}get id(){return this.$.id}set id(e){this.$.id=e}get value(){return this.$.value}set value(e){this.$.value=e}get src(){return this.$.src}set src(e){this.$.src=e}focus(){this.$.focus()}get classList(){return this.$.classList}get style(){return this.$.style}onchange(e,t,s){return this.$.onchange=n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))},this}onclick(e,t,s){return this.$.onclick=n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))},this}onauxclick(e,t,s){return this.$.onauxclick=n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))},this}onup(e,t,s){return this.$.addEventListener("mouseup",n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))}),this}onmiddleclick(e,t,s){return this.$.addEventListener("mouseup",n=>{2===n.which&&(void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s)))}),this}ondown(e,t,s){return this.$.addEventListener("mousedown",n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))}),this}onmove(e,t,s){return this.$.addEventListener("mousemove",n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))}),this}onevent(e,t,s,n){return this.$.addEventListener(e,e=>{void 0===n?s.apply(t,[e]):n.constructor==Array&&(n.push(e),s.apply(t,n))}),this}append(e){return e.constructor!=Array&&(e=[e]),e.forEach(e=>{/HTML(.*)Element/.test(e.constructor.name)?this.$.appendChild(e):"object"==typeof e&&/HTML(.*)Element/.test(e.$.constructor.name)&&this.$.appendChild(e.$)}),this}delete(){this.$.remove()}static removeChilds(e){let t=e.lastElementChild;for(;t;)e.removeChild(t),t=e.lastElementChild}static get(e,s){return void 0===(s=s instanceof t?s.$:s)?document.querySelector(e):s.querySelector(e)}static getAll(e,s){return"object"==typeof(s=s instanceof t?s.$:s)?s.querySelectorAll(e):get(s).querySelectorAll(e)}static switchState(e,s){let n=null!=s?s:"on";(e=e instanceof t?e.$:e).classList.contains(n)?e.classList.remove(n):e.classList.add(n)}static UID(){return(+new Date).toString(36)+Math.random().toString(36).substr(2)}static setSelected(e,t){for(var s=0;s<e.$.options.length;s++)if(e.$.options[s].text==t)return void(e.$.options[s].selected=!0)}static lazyUpdate(e,s,n,r){r=null==r?"innerText":r;let a=t.get(`[data-uid='${s}']`,e);for(const e in n)t.get(`#${e}`,a)[r]=n[e]}}class s{static randomChar(){const e="abcdefghijklmnopqrstuvwxyz";return e[Math.floor(26*Math.random())]}static UID(){return this.randomChar()+(+new Date).toString(36)+Math.random().toString(36).substring(3)}static SID(){return this.randomChar()+Math.random().toString(36).substring(3,8)}static fromUrl(e){let t=new URLSearchParams(document.location.search);return null==t.get(e)?this.urlDefaults(e):this.urlValidParams(e,t.get(e))}static urlDefaults(e){if("theme"===e)return"light"}static urlValidParams(e,t){if("theme"===e)return["dark","light"].includes(t)?t:this.urlDefaults(e)}static cleanPathname(e){return e.replace(/([^:]\/)\/+/g,"$1").replace(/[^:]\.\//g,"$1")}static getDepth(e){return(e.match(/\//g)||[]).length}static async try_redirect(e,t,s){let n;try{n=404===(await fetch(e,{method:"HEAD"})).status?t:e}catch(e){n=t}s?window.open(n,"_blank").focus():location.href=n}static async try_include(e,t,s){let n=e=>{s?window.open(t,"_blank").focus():location.href=t};const r=new Request(e);await fetch(r).then(e=>{if(!e.ok)throw new Error(e.status);return e.text()}).then(e=>{(e=e.replace(/\n+$/,"")).startsWith(".. include:: ")&&1==e.split(/\n/).length?(e=e.substring(13),s?window.open(new URL(e,t).href,"_blank").focus():location.href=new URL(e,t).href):n()}).catch(n)}static async fetch_each(e){Array.isArray(e)||(e=[e]);for(let t of e)try{const e=new Request(t),s=await fetch(e);if(!0===s.ok)return{obj:await s.json(),url:t};if(404!==s.status)return{error:s,url:t}}catch(e){return{error:e,url:t}}return{error:`No url returned a valid JSON, urls: ${e}`}}static get_alphanumeric(){const e=[...Array(9).keys(),-1].map(e=>(e+1).toString()),t=[...Array(26).keys()].map(e=>String.fromCharCode(97+e));return e.concat(t)}static waitUntil=(e,t=100)=>new Promise(s=>{let n=setInterval(()=>{e()&&(clearInterval(n),s())},t)});static reducedMotion=()=>1==window.matchMedia("(prefers-reduced-motion: reduce)").matches}class n{constructor(e){this.$={},this.$.show_repotoc=document.querySelector("#input-show-repotoc"),this.$.show_repotoc.onchange=e=>{this.renew_index(e)},this.set_doms(),this.parent=e,"object"==typeof this.parent.fetch?this.parent.fetch.then(this.construct.bind(this)):this.construct()}construct(){let e=this.parent.state.metadata;"repotoc"in e&&this.update_repotoc(e.repotoc),"banner"in e&&this.update_banner(e.banner)}set_doms(){let e=this.$;e.repotocTreeOverlay=document.querySelector(".repotoc-tree.overlay root"),e.repotocTreeSidebar=document.querySelector(".sphinxsidebar .repotoc-tree root"),e.banner=t.new("div",{className:"banner"}),document.querySelector("body").prepend(e.banner)}renew_index(e){this.$.linksSidebar.forEach(t=>{t.tabIndex=e.target.checked?0:-1}),this.$.linksOverlay.forEach(t=>{t.tabIndex=e.target.checked?0:-1})}update_repotoc(e){let s=this.$;if(this.parent.state.standalone)return;let n=""===this.parent.state.subhost||void 0===this.parent.state.subhost?this.parent.state.metadata.remote_doc:this.parent.state.subhost.startsWith("/docs")?"/docs/":"/";this.$.linksOverlay=[],this.$.linksSidebar=[];let r=this.parent.state.offline?this.parent.state.content_root:new URL(this.parent.state.content_root,location.href);for(const[s,a]of Object.entries(e)){if(!("name"in a))continue;let e=s==this.parent.state.repository?r:`${n}${s}/`;this.$.linksSidebar.push(t.new("a",{href:`${e}index.html`,className:this.parent.state.repository===s?"current":"",innerText:a.name}))}this.$.linksSidebar.forEach(e=>{this.$.linksOverlay.push(e.cloneNode(!0))}),s.repotocTreeOverlay&&(t.removeChilds(s.repotocTreeOverlay),this.$.linksOverlay.forEach(e=>{s.repotocTreeOverlay.append(e)})),s.repotocTreeSidebar&&(t.removeChilds(s.repotocTreeSidebar),this.$.linksSidebar.forEach(e=>{s.repotocTreeSidebar.append(e)}));let a=new Event("change");this.$.show_repotoc.dispatchEvent(a)}update_banner(e){let s=this.$;"msg"in e&&s.banner.append(t.new("span",{innerText:e.msg})),"a_href"in e&&"a_text"in e&&s.banner.append(t.new("a",{href:e.a_href,innerText:e.a_text,target:"_blank"}))}}class r{constructor(e){this.$={},this.with_page_source=!1,this.parent=e,"object"==typeof this.parent.fetch?this.parent.fetch.then(this.construct.bind(this)):this.construct(),e.page_actions=this}page_source_sanity(e,t){return e.hasOwnProperty("source_hostname")?e.repotoc.hasOwnProperty(t)?e.repotoc[t].hasOwnProperty("pathname")?e.repotoc[t].hasOwnProperty("branch")?void 0:(console.warn(`edit_source: 'branch' missing from entry '${t}'`),!0):(console.warn(`edit_source: 'pathname' missing from entry '${t}'`),!0):(console.warn(`edit_source: repository '${t}' not in the metadata`),!0):(console.warn("edit_source: 'source_hostname' missing from the metadata",e),!0)}page_source_ignore(){return null!==document.querySelector("#search-documentation")}draw_page_source(){this.$.container=t.new("div",{className:"page-actions"}),this.$.edit_button=t.new("button",{className:"edit-source",title:"See and edit this page source"}),this.$.edit_button.addEventListener("mousedown",e=>{e.preventDefault()}),this.$.edit_button.addEventListener("mouseup",e=>{1!==e.which&&2!==e.which||s.try_include(this.edit_button_tgt_raw,this.$.edit_button.alt_href,!0)}),this.$.container.append(this.$.edit_button)}preinit_page_source(){let e=this.parent.state.metadata,t=this.parent.state.repository;this.page_source_sanity(e,t)||this.page_source_ignore()||(this.draw_page_source(),this.with_page_source=!0)}init_page_source(){if(!this.with_page_source)return;let e=t.get(".bodywrapper .body-header .breadcrumb");null===e||e.classList.contains("empty")?(e=t.get(".bodywrapper .body"),e.insertAdjacentElement("afterbegin",this.$.container)):e.parentElement.insertAdjacentElement("beforeend",this.$.container);let s=this.parent.state.metadata,n=this.parent.state.repository,r=e=>e.replace("{repository}",n).replace("{branch}",s.repotoc[n].branch).replace("{pathname}",s.repotoc[n].pathname),a=(()=>{let e=document.querySelector('meta[name="page_source_suffix"]');return null===e?".rst":e.content})(),i=r(s.source_hostname),o=r(s.source_hostname_raw),c="";c=this.parent.state.offline?new URL("file://"+location.pathname).href:new URL(location.pathname,location.origin).href;let h=new URL(this.parent.state.content_root,c).href,l=c.substring(h.length);l=l.endsWith(".html")?l.replace(/\.html$/i,a):l.concat(`index${a}`),i=i.concat("/",l),o=o.concat("/",l),this.$.edit_button.alt_href=i,this.edit_button_tgt_raw=o}deinit_page_source(){this.with_page_source&&(this.edit_button_tgt_raw=void 0)}construct(){this.preinit_page_source(),this.init()}init(){this.init_page_source()}deinit(){this.deinit_page_source()}}class a{constructor(e){this.parent=e,this.$={},this.prefix,this.construct()}fallback(){let e=this.parent.state.version,t=e.substr(0,1);""!==e&&(console.log("version_dropdown: using hard-coded current version"),t>="0"&&t<="9"&&(e=`v${e}`),this.render({"":[e,""]}))}construct(){if(this.parent.state.offline){let e=location.href;return this.prefix=new URL(app.state.content_root,e).href,this.prefix=this.prefix.substring(0,this.prefix.length-1),void this.fallback()}this.prefix=this.parent.state.subhost,this.prefix=new URL(this.prefix,location.origin).href,this.prefix.endsWith("/")&&(this.prefix=this.prefix.slice(0,-1)),fetch(new Request(new URL("tags.json",this.prefix+"/"))).then(e=>e).then(e=>e.json()).then(e=>this.render(e)).catch(e=>{console.log("version_dropdown: no tags.json and no current version"),this.fallback()})}static assert(e){if(Array.isArray(e))return e.every(e=>"string"==typeof e)?"string-array":(console.warn("version_dropdown: expected array of strings, got ",e),!0);if("[object Object]"===Object.prototype.toString.call(e)){for(let t in e){if(!Array.isArray(e[t]))return console.warn("version_dropdown: expected array, got ",e[t]),!0;if(2!==e[t].length)return console.warn(`version_dropdown: expected two items, got ${e[t].length}`,e[t]),!0}return"fine-grained"}return console.warn("version_dropdown: expected object of arrays or array of strings, got ",e),!0}static object_to_string_array(e){let t=[];for(const s in e)t.push(s);return t}static string_array_to_object(e){let t={};e.forEach(e=>{t[e]=[e,""]}),""in t&&(t[""]=["main","unstable"]);for(const e in t)if(!e.startsWith("pull/")){t[e]=[t[e][0],"latest"];break}for(const e in t)e.startsWith("pull/")&&(t[e]=["#"+t[e][0].substring(5),"pull request"]);return t}get_class_labels(e){if(""===e)return"";let t="label";return"pull request"===e?t+=" pull_request":"unstable"===e&&(t+=" unstable"),t}render(e){let n=this.parent.state.version,r=this.parent.state.path,i="",o=a.assert(e);if(!0===o)return;"string-array"==o&&(e=a.string_array_to_object(e));let c=t.get(".sphinxsidebarwrapper .toc-tree"),h=t.get("header #right .reverse"),l=t.get("body"),d=Object.keys(e).length>10?4:2,p=" auto".repeat(d),u=t.new("div",{className:"version-dropdown-list",style:`grid-template-columns:${p}`});e.hasOwnProperty(r)?(i=e[r][1],n=e[r][0]):console.warn(`version_dropdown: current path ${r} is not in the tags.json. Hard-coded meta[name="version"] will be used.`,e);for(let n in e){let r=n.length>0?this.prefix+"/"+n:this.prefix;r+="/index.html";let a=t.new("button",{alt_href:r});a.addEventListener("mousedown",e=>{e.preventDefault()}),a.addEventListener("mouseup",e=>{if(1!==e.which&&2!==e.which)return;const t=2===e.which;let n=app.state.path.length>0?this.prefix+"/"+app.state.path:this.prefix;if(location.href.startsWith(n)){let e=location.href.substring(n.length+1),r=new URL(e,a.dataset.alt_href);r.hash=location.hash,s.try_redirect(r,a.dataset.alt_href,t)}else t?window.open(a.dataset.alt_href,"_blank").focus():location.href=a.dataset.alt_href});let i=t.new("div"),o=t.new("div");i.innerText=e[n][0];let c=t.new("span",{className:this.get_class_labels(e[n][1])});c.innerText=e[n][1],o.append(c),a.append(i),a.append(o),u.append(a)}Object.keys(e).length<=1&&u.classList.add("no-other");let f=t.new("dev",{id:"cancel-area-show-version-dropdown"});l.append(f),l.append(u);let m=t.new("div",{className:"version-dropdown",title:"Change version"});m.innerText=n;let _=t.new("span",{className:this.get_class_labels(i)});_.innerText=i,m.append(_),c.insertAdjacentElement("afterbegin",m);let $=m.cloneNode(!0);m.onclick=e=>{this.show(m,!0)},$.onclick=e=>{this.show($,!0)},f.onclick=e=>{this.show(void 0,!1)},onresize=e=>{this.show(void 0,!1)},h.append($),this.$.list=u,this.$.cancel=f}show(e,t){if(!t)return this.$.cancel.classList.remove("on"),void this.$.list.classList.remove("on");let s=e.getBoundingClientRect(),n=window.innerWidth;this.$.list.style.top=`${s.top+40}px`,n-s.right<s.left?(this.$.list.style.removeProperty("left"),this.$.list.style.right=n-s.right+"px"):(this.$.list.style.left=`${s.left}px`,this.$.list.style.removeProperty("right")),this.$.cancel.classList.add("on"),this.$.list.classList.add("on")}}if(void 0===i)var i={objNameMatch:11,objPartialMatch:6,objPrio:{0:15,1:5,2:-5},objPrioDefault:0,title:15,partialTitle:7,term:5,partialTerm:2};class o{constructor(e){this.parent=e,this.index={},this.index_state={},this.key_prefix={},this.search_page=new URL(`${this.parent.state.content_root}search.html`,location).pathname;let s=this.$={};s.keyCheckbox={},s.searchUL={},s.searchLI={},s.body=new t(t.get("body")),s.searchAreaBg=new t(t.get(".search-area-bg")),null===s.searchAreaBg.$&&(s.searchAreaBg=new t("div",{className:"search-area-bg"}),s.body.append([s.searchAreaBg])),s.searchAreaBg.onclick(this,this.cancel_search),s.searchArea=new t(t.get(".search-area")),s.searchForm=new t(t.get("form",s.searchArea)),this.parent.state.offline?(s.searchForm.$.action=this.search_page,s.searchForm.$.method="get"):s.searchForm.onevent("submit",this,e=>{e.preventDefault()}),s.searchFormButton=new t(t.get("button",s.searchForm)).onclick(this,this.cancel_search),s.searchInput=new t(t.get("input",s.searchForm)),s.searchTags=new t("span",{className:"search-filter",tabIndex:"-1"}).append([new t("div",{className:"title",innerText:"Search on"}).append([new t("code",{className:"literal",innerText:"Ctrl +"})])]),s.searchResults=new t("ul",{className:"search-results",tabIndex:"-1"}),s.searchContainer=new t("span",{className:"search-container"}).onclick(this,e=>{e.target===s.searchContainer.$&&this.cancel_search()}),this.parent.state.offline||this.$.searchContainer.append(this.$.searchTags),this.$.searchContainer.append(this.$.searchResults),this.$.searchArea.append([this.$.searchContainer]),s.searchForm.$.action=t.get('link[rel="search"]').href,s.searchButton=new t(t.get("header button#search")),null===s.searchButton.$&&(s.searchButton=new t("button",{id:"search",className:"icon",title:"Search (/)"}),this.parent.navigation.$.rightHeader.append([s.searchButton])),s.searchButton.onclick(this,()=>{s.searchArea.classList.add("on"),s.searchAreaBg.classList.add("on"),s.searchInput.focus(),s.searchInput.$.select(),this.$.body.classList.add("overflow-hidden"),this.set_default()}),this.parent.state.offline?this.construct_offline():"object"==typeof this.parent.fetch?this.parent.fetch.then(this.construct.bind(this)):this.construct(),e.search=this}split_query(e){return e.split(/[^\p{Letter}\p{Number}_\p{Emoji_Presentation}]+/gu).filter(e=>e)}cancel_search(){this.$.searchArea.classList.remove("on"),this.$.searchAreaBg.classList.remove("on"),this.$.body.classList.remove("overflow-hidden");let e=new URL(location);e.searchParams.delete("q"),e.searchParams.delete("r"),history.replaceState({},null,e)}_orderResultsByScoreThenName=(e,t)=>{const s=e[4],n=t[4];if(s===n){const s=e[1].toLowerCase(),n=t[1].toLowerCase();return s===n?0:s>n?-1:1}return s>n?1:-1};async get_default_searchindex(e,t){const n=t&&"local"===e?location.origin:`${this.parent.state.metadata.remote_doc}${e}`;return await s.fetch_each(`${n}/tags.json`).then(t=>(this.key_prefix[e]=(e=>{let t="";if(!("error"in e)){let s=a.assert(e.obj);if(!0===s)return n;"fine-grained"==s&&(e.obj=a.object_to_string_array(e.obj));let r=e.obj;t=r.includes("")?"":r.includes("main")?"main/":r.some(e=>e.includes("adi_meta"))?`${r.find(e=>e.includes("adi_meta"))}/`:`${r.at(0)}/`}return`${n}/${t}`})(t),`${this.key_prefix[e]}searchindex.js`))}check_toc(e,t){if(t.target.checked){if(!1===this.index_state[e].requested){let t=""===this.parent.state.subhost||void 0===this.parent.state.subhost;return void this.get_default_searchindex(e,t).then(t=>{let s=new URL(t);this.load_index(s.href,e),this.index_state[e].requested=!0,this.$.keyCheckbox[e].classList.add("requested"),this.$.keyCheckbox[e].classList.remove("failed"),this.renew_search()})}this.query(this.$.searchInput.$.value)}else this.get_tags_and_update_url(this.$.searchInput.$.value);this.renew_search()}renew_search(){let e=[];for(const[s,n]of Object.entries(this.index_state))!0===this.$.keyCheckbox[s].$.checked&&!0===this.index_state[s].ready?(s in this.$.searchUL||(this.$.searchUL[s]=new t("ul"),this.$.searchLI[s]=new t("li").append([new t("div",{innerText:this.$.keyCheckbox[s].$.name}),this.$.searchUL[s]]),e.push(this.$.searchLI[s])),this.$.searchLI[s].classList.add("on")):s in this.$.searchUL&&this.$.searchLI[s].classList.remove("on");e.forEach(e=>{this.$.searchResults.$.insertAdjacentElement("afterbegin",e.$)})}set_default(){for(const[e,t]of Object.entries(this.$.keyCheckbox))if(t.$.checked)return;let e=""===this.parent.state.subhost||void 0===this.parent.state.subhost||this.parent.state.standalone?"local":this.parent.state.repository,t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))}search_shortcut(e){"IntlRo"!==e.code&&"Slash"!==e.code&&("KeyK"!==e.code||!e.ctrlKey&&!e.altKey)||this.$.searchArea.classList.contains("on")?"Escape"===e.code&&this.$.searchArea.classList.contains("on")&&this.cancel_search():(this.$.searchArea.classList.add("on"),this.$.searchAreaBg.classList.add("on"),this.$.body.classList.add("overflow-hidden"),this.$.searchInput.focus(),this.$.searchInput.$.select(),this.set_default())}load_index=(e,t)=>{let s=e=>{console.warn(e),this.index_state[t].requested=!1,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("failed"),this.$.keyCheckbox[t].$.checked=!1};const n=new Request(e);fetch(n).then(e=>e.text()).then(e=>{try{if("Search.setIndex("!=e.substring(0,16)||")"!=e.substring(e.length-1))throw new Error(`Search index of key '${t}' is impropetly formatted`);this.index[t]=JSON.parse(e.substring(16,e.length-1)),this.index_state[t].ready=!0,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("ready"),this.query(this.$.searchInput.$.value)}catch(e){s(e)}}).catch(s)};perform_object_search(e,t,s){const n=this.index[s].filenames,r=this.index[s].docnames,a=this.index[s].objects,o=this.index[s].objnames,c=this.index[s].titles,h=[];return Object.keys(a).forEach(s=>a[s].forEach(a=>((s,a)=>{const l=a[4],d=(s?s+".":"")+l,p=d.toLowerCase();if(p.indexOf(e)<0)return;let u=0;const f=p.split(".");p===e||f.slice(-1)[0]===e?u+=i.objNameMatch:f.slice(-1)[0].indexOf(e)>-1&&(u+=i.objPartialMatch);const m=o[a[1]][2],_=c[a[0]],$=new Set(t);if($.delete(e),$.size>0){const e=`${s} ${l} ${m} ${_}`.toLowerCase();if([...$].some(t=>e.indexOf(t)<0))return}let g=a[3];""===g?g=d:"-"===g&&(g=o[a[1]][1]+"-"+d);const w=m+", in "+_;i.objPrio.hasOwnProperty(a[2])?u+=i.objPrio[a[2]]:u+=i.objPrioDefault,h.push([r[a[0]],d,"#"+g,w,u,n[a[0]],"object"])})(s,a))),h}perform_terms_search(e,t,s){const n=this.index[s].terms,r=this.index[s].titleterms,a=this.index[s].filenames,o=this.index[s].docnames,c=this.index[s].titles,h=new Map,l=new Map;e.forEach(e=>{const t=[],s=[{files:n.hasOwnProperty(e)?n[e]:void 0,score:i.term},{files:r.hasOwnProperty(e)?r[e]:void 0,score:i.title}];if(e.length>2){const t=e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");n.hasOwnProperty(e)||Object.keys(n).forEach(e=>{e.match(t)&&s.push({files:n[e],score:i.partialTerm})}),r.hasOwnProperty(e)||Object.keys(r).forEach(e=>{e.match(t)&&s.push({files:r[e],score:i.partialTitle})})}s.every(e=>void 0===e.files)||(s.forEach(s=>{if(void 0===s.files)return;let n=s.files;void 0===n.length&&(n=[n]),t.push(...n),n.forEach(t=>{h.has(t)||h.set(t,new Map);h.get(t).set(e,s.score)})}),t.forEach(t=>{l.has(t)?-1===l.get(t).indexOf(e)&&l.get(t).push(e):l.set(t,[e])}))});const d=[];for(const[s,i]of l){const l=[...e].filter(e=>e.length>2).length;if(i.length!==e.size&&i.length!==l)continue;if([...t].some(e=>n[e]===s||r[e]===s||(n[e]||[]).includes(s)||(r[e]||[]).includes(s)))break;const p=Math.max(...i.map(e=>h.get(s).get(e)));d.push([o[s],c[s],"",null,p,a[s],"text"])}return d}perform_search(e,t,s,n,r,a){const o=this.index[a].filenames,c=this.index[a].docnames,h=this.index[a].titles,l=this.index[a].alltitles,d=this.index[a].indexentries,p=[],u=[],f=e.toLowerCase().trim();for(const[e,t]of Object.entries(l))if(e.toLowerCase().trim().includes(f)&&f.length>=e.length/2)for(const[s,n]of t){const t=Math.round(i.title*f.length/e.length),r=h[s]===e?1:0;p.push([c[s],h[s]!==e?`${h[s]} > ${e}`:e,null!==n?"#"+n:"",null,t+r,o[s],"title"])}for(const[e,t]of Object.entries(d))if(e.includes(f)&&f.length>=e.length/2)for(const[s,n,r]of t){const t=Math.round(100*f.length/e.length),a=[c[s],h[s],n?"#"+n:"",null,t,o[s],"index"];r?p.push(a):u.push(a)}r.forEach(e=>p.push(...this.perform_object_search(e,r,a))),p.push(...this.perform_terms_search(t,s,a)),i.score&&(p.forEach(e=>e[4]=i.score(e)),u.forEach(e=>e[4]=i.score(e))),p.sort(this._orderResultsByScoreThenName),u.sort(this._orderResultsByScoreThenName);let m=[...u,...p],_=new Set;return m=m.reverse().reduce((e,t)=>{let s=t.slice(0,4).concat([t[5]]).map(e=>String(e)).join(",");return _.has(s)||(e.push(t),_.add(s)),e},[]),m.reverse()}get_tags_and_update_url(e){const t=[];for(const[e,s]of Object.entries(this.index_state))!0===this.$.keyCheckbox[e].$.checked&&void 0!==this.index[e]&&t.push(e);let s=new URL(location);return e.length>0?(s.searchParams.set("q",e),s.searchParams.set("r",t)):(s.searchParams.delete("q"),s.searchParams.delete("r")),history.replaceState({},null,s),t}html_to_text(e,t){const s=(new DOMParser).parseFromString(e,"text/html");for(const e of[".headerlink","script","style"])s.querySelectorAll(e).forEach(e=>{e.remove()});if(t){const e=s.querySelector(`[role="main"] ${t}`);if(e)return e.textContent;console.warn(`Anchored content block '[role=main] ${t}' not found.`)}const n=s.querySelector('[role="main"]');return n?n.textContent:(console.warn(`Anchored content block '[role=main] ${t}' not found.`),"")}get_summary(e,t,s,n){const r=this.html_to_text(e,s);if(""===r)return;const a=r.toLowerCase(),i=[...t].map(e=>a.indexOf(e.toLowerCase())).filter(e=>e>-1).slice(-1)[0],o=Math.max(i-120,0),c=0===o?"":"...",h=o+240<r.length?"...":"";n.$.textContent=c+r.substr(o,240).trim()+h,n.$.classList.remove("loading")}query(e){if("undefined"==typeof Stemmer)return;const[s,n,r,a,i]=this.parse_query(e);this.renew_search(),this.get_tags_and_update_url(e).forEach(e=>{const o=this.perform_search(s,n,r,a,i,e);for(;this.$.searchUL[e].$.firstElementChild;)this.$.searchUL[e].$.removeChild(this.$.searchUL[e].$.lastChild);let c=[];o.reverse(),o.forEach(s=>{const[r,a,i,o,h,l,d]=s;let p=`${this.key_prefix[e]}${r}.html${i}`,u=new t("li").append(new t("a",{href:p,innerText:a}));if(o)u.append(new t("span",{innerText:`(${o})`}));else{let e=new t("p",{className:"context"});const s=setTimeout(()=>{e.classList.add("loading")},50);u.append(e),fetch(p).then(e=>e.text()).then(t=>{t&&this.get_summary(t,n,i,e)}).finally(()=>{clearTimeout(s)})}c.push(u)}),this.$.searchUL[e].append(c),0===o.length?this.$.searchLI[e].classList.add("empty"):this.$.searchLI[e].classList.remove("empty")})}parse_query(e){const t=new Stemmer,s=new Set,n=new Set,r=new Set,a=new Set(this.split_query(e.toLowerCase().trim()));return this.split_query(e.trim()).forEach(e=>{const a=e.toLowerCase();if(stopwords instanceof Set){if(stopwords.has(a)||e.match(/^\d+$/))return}else if(-1!==stopwords.indexOf(a)||e.match(/^\d+$/))return;let i=t.stemWord(a);"-"===i[0]?n.add(i.substr(1)):(s.add(i),r.add(a))}),localStorage.setItem("sphinx_highlight_terms",[...r].join(" ")),[e,s,n,r,a]}select_filter_tags(e){this.$.searchArea.classList.contains("on")&&this.$.searchTags.classList.contains("on")&&Object.values(this.$.keyCheckbox).forEach(t=>{if(t.$.dataset.shortcut==e.key){e.preventDefault();let s=new Event("change");t.$.checked=!t.$.checked,t.$.dispatchEvent(s)}})}keyup(e){switch(e.code){case"IntlRo":case"Slash":case"Escape":case"KeyK":this.search_shortcut(e);break;case"ControlLeft":case"ControlRight":this.$.searchTags.classList.remove("on")}}keydown(e){switch(e.code){case"IntlRo":case"Slash":e.preventDefault();break;case"KeyK":e.ctrlKey&&e.altKey&&e.preventDefault();break;case"ControlLeft":case"ControlRight":this.$.searchTags.classList.add("on")}this.select_filter_tags(e)}focus(e){this.$.searchTags.classList.contains("on")&&this.$.searchTags.classList.remove("on")}include_item(e,s,n){this.index_state[e]={ready:!1,requested:!1};let r=new t("input",{id:`tag-${e}`,type:"checkbox",name:s,shortcut:n}).onchange(this,this.check_toc,[e]);this.$.searchTags.append([new t("span").append([r,new t("label",{htmlFor:`tag-${e}`}).append([new t("span",{innerText:n,className:"checkbox"}),new t("span",{innerText:s})])])]),this.$.keyCheckbox[e]=r}construct_offline(){if(window.SPHINX_HIGHLIGHT_ENABLED=!1,window.DOCUMENTATION_OPTIONS={},document.querySelector(".documentwrapper .body")?.append(t.new("div",{id:"search-results"})),this.search_page===location.pathname){["doctools.js","language_data.js","searchtools.js","english-stemmer.js"].forEach(e=>{const t=document.createElement("script");t.src=new URL(`${this.parent.state.content_root}_static/${e}`,location),document.querySelector("head")?.append(t)});const e=document.createElement("script");e.src=new URL(`${this.parent.state.content_root}searchindex.js`,location),document.querySelector("head")?.append(e)}}construct(){let e=s.get_alphanumeric();["a","c","f"].forEach(t=>{e.splice(e.indexOf(t),1)});let n=new URL(`${this.parent.state.content_root}_static/language_data.js`,location);if(this.$.language_data=new t("script",{src:n.href,async:!0}).onevent("load",this,e=>{this.$.searchForm.$.action=""}),this.$.body.append([this.$.language_data]),!this.parent.state.standalone)for(const[t,s]of Object.entries(this.parent.state.metadata.repotoc))this.include_item(t,s.name,e.shift());if(""===this.parent.state.subhost||void 0===this.parent.state.subhost||this.parent.state.standalone){let t=this.parent.state.repository in this.parent.state.metadata.repotoc?this.parent.state.metadata.repotoc[this.parent.state.repository].name:this.parent.state.repository,s=this.parent.state.standalone?"":" (local build)";this.include_item("local",`${t}${s}`,e.shift())}this.$.searchInput.$.oninput=e=>{this.query(e.target.value)};let r=new URL(location),a=r.searchParams.get("q"),i=r.searchParams.get("r");if(null!==a){null!==i&&(i=i.split(","),i.forEach(e=>{let t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))})),this.$.searchInput.$.value=a;let e=new Event("click");this.$.searchButton.$.dispatchEvent(e)}document.addEventListener("keyup",e=>{this.keyup(e)},!1),document.addEventListener("keydown",e=>{this.keydown(e)},!1),document.addEventListener("focus",e=>{this.focus(e)})}}class c{constructor(e){this.$={},this.parent=e,this.collection,"object"==typeof this.parent.fetch?this.parent.fetch.then(this.construct.bind(this)):this.construct(),e.content_actions=this}copy_button(){let e=new t(t.get(".bodywrapper .body"));t.getAll("div.highlight pre",e.$).forEach(e=>{if(e.parentNode.parentNode.classList.contains("no-select"))return;if(2===e.children.length&&e.children[1].classList.contains("c1"))return;let s=e.textContent.replaceAll("\n","");s.length>20&&(s=s.slice(0,20)+"...");let n=new t("button",{className:"icon copy",title:`Copy "${s}"`}).onclick(this,(e,t)=>{navigator.clipboard.writeText(e.textContent).then(()=>{}).catch(e=>{console.error(e)})},[e]);e.insertAdjacentElement("afterend",n.$)})}init_collection_wrapper(){let e=new t(t.get(".localtoc .tocwrapper")),s=new t("div",{className:"header"});s.innerText="Collections",this.$.collection=new t("div",{className:"collections"}).append(s),e.append(this.$.collection)}auto_collection_name(e,t){const s=e in this.parent.state.metadata.repotoc?this.parent.state.metadata.repotoc[e].name:e;if(void 0===this.collection_pattern||!(e in this.collection_pattern))return`${s} ${t}`;for(const n in this.collection_pattern[e]){if(new RegExp(n).test(t))return this.collection_pattern[e][n].replace("${repository}",s).replace("${path}",t)}return`${s} ${t}`}add_collection_entry(e,s,n,r){const a="name"in r?r.name:this.auto_collection_name(s,n),i=new URL(`${this.parent.state.metadata.remote_doc}${s}/${n}`),o=new t("a",{href:i,target:"blank"});o.innerText=a,e.append(new t("li").append(o))}add_collection(e,s){this.$.collection||this.init_collection_wrapper();const n=e.replace(" ","-");let r=new t("label",{className:"sub-header",htmlFor:`collection-${n}`}),a=new t("input",{className:"collection-collapse",type:"checkbox",id:`collection-${n}`});a.$.checked=!0,r.innerText=e;let i=new t("ul");for(const e in s)for(const t in s[e])this.add_collection_entry(i,e,t,s[e][t]);this.$.collection.append([new t("div",{className:"group"}).append([a,r,new t("span",{className:"span-ul"}).append(i)])])}load_collection(){const e=this.parent.state.repository,t=this.collection;if(!("collection"in t))return;"pattern"in t&&(this.collection_pattern=t.pattern);let s="";s=this.parent.state.offline?new URL("file://"+location.pathname).href:new URL(location.pathname,location.origin).href;let n=new URL(this.parent.state.content_root,s).href;for(const r in t.collection){if(!("include"in t.collection[r])||!(e in t.collection[r].include))continue;const a=t.collection[r].include[e];for(const e in a){const a=new URL(e,n).href;if(s.startsWith(a)){this.add_collection(r,t.collection[r].include);break}}}}deinit_collection(){this.collection_controller.abort(),this.$.collection&&(this.$.collection.$.remove(),delete this.$.collection,delete this.collection_pattern)}init_collection(){this.collection_controller=new AbortController;const e=this.collection_controller.signal;let t=this.parent.state;const s=""===t.subhost||!0===t.offline?new URL(`${t.metadata.remote_doc}documentation`):new URL("documentation",new URL(t.subhost,location.origin));this.collection?this.load_collection():fetch(new Request(new URL("collection.json",s+"/")),{signal:e}).then(e=>e).then(e=>{if(!0===e.ok)return e.json();if(404===e.status)return{};throw new Error}).then(e=>{this.collection=e,this.load_collection()}).catch(e=>{})}construct(){this.init()}deinit(){this.deinit_collection()}init(){document.querySelector('script[src*="_static/copybutton.js"]')?console.log("copy_button: sphinx-copy-button extension is present, skipping"):this.copy_button(),this.init_collection()}}function h(){new e(app),new n(app),new r(app),new o(app),new a(app),new c(app)}return h(),h});
//# sourceMappingURL=extra.umd.js.map
