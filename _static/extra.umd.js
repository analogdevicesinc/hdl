!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Extra=t()}(this,function(){"use strict";class e{constructor(e){Object.hasOwn(e.state,"sub_hosted")&&(e.state.subhost=!0===e.state.sub_hosted?`/${e.state.repository}`:"",delete e.state.sub_hosted),Object.hasOwn(e.state,"standalone")||(e.state.standalone=!!document.querySelector('meta[name="standalone"]'))}}class t{constructor(e,t){if(this.$,"string"==typeof e){if(this.$=document.createElement(e),"object"==typeof t)for(const e in t)e in this.$?this.$[e]=t[e]:this.$.dataset[e]=t[e]}else this.$=e}cloneNode(e){return new t(this.$.cloneNode(e))}set innerText(e){this.$.innerText=e}get innerText(){return this.$.innerText}get height(){return this.$.offsetHeight}get width(){return this.$.offsetWidth}get id(){return this.$.id}set id(e){this.$.id=e}get value(){return this.$.value}set value(e){this.$.value=e}get src(){return this.$.src}set src(e){this.$.src=e}get rect(){return this.$.getBoundingClientRect()}focus(){this.$.focus()}get classList(){return this.$.classList}get style(){return this.$.style}onchange(e,t,s){return this.$.onchange=n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))},this}onclick(e,t,s){return this.$.onclick=n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))},this}onauxclick(e,t,s){return this.$.onauxclick=n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))},this}onup(e,t,s){return this.$.addEventListener("mouseup",n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))}),this}ondown(e,t,s){return this.$.addEventListener("mousedown",n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))}),this}onmove(e,t,s){return this.$.addEventListener("mousemove",n=>{void 0===s?t.apply(e,[n]):s.constructor==Array&&(s.push(n),t.apply(e,s))}),this}onevent(e,t,s,n){return this.$.addEventListener(e,e=>{void 0===n?s.apply(t,[e]):n.constructor==Array&&(n.push(e),s.apply(t,n))}),this}append(e){return e.constructor!=Array&&(e=[e]),e.forEach(e=>{/HTML(.*)Element/.test(e.constructor.name)?this.$.appendChild(e):"object"==typeof e&&/HTML(.*)Element/.test(e.$.constructor.name)&&this.$.appendChild(e.$)}),this}delete(){this.$.remove()}removeChilds(){let e=this.$.lastElementChild;for(;e;)this.$.removeChild(e),e=this.$.lastElementChild;return this}static get(e,s){return void 0===(s=s instanceof t?s.$:s)?document.querySelector(e):s.querySelector(e)}static getAll(e,s){return"object"==typeof(s=s instanceof t?s.$:s)?s.querySelectorAll(e):get(s).querySelectorAll(e)}static switchState(e,s){let n=null!=s?s:"on";(e=e instanceof t?e.$:e).classList.contains(n)?e.classList.remove(n):e.classList.add(n)}static UID(){return(+new Date).toString(36)+Math.random().toString(36).substr(2)}static prototypeDetails(e){let s=new t("summary",{innerText:e.innerText}),n=new t("details",{id:e.id,name:e.id}).append(s);return null!=e.onevent&&e.onevent.forEach(e=>{e.args.push(n.$),s.onevent(e.event,e.self,e.fun,e.args)}),n}static prototypeInputFile(e){return new t("label",{htmlFor:`${e.id}_input`,id:e.id,className:e.className,innerText:e.innerText}).append(new t("input",{id:`${e.id}_input`,type:"file"}))}static prototypeCheckSwitch(e){let s=new t("input",{id:e.id,name:e.id,className:"checkswitch",type:"checkbox",value:!1});return[s,new t("div",{className:e.className}).append([new t("div").append([new t("label",{className:"checkswitch",htmlFor:e.id,innerText:e.innerText}).append([s,new t("span")])])])]}static prototypeDownload(e,t){let s,n=/.*\.(py|xml|csv|json|svg|png)$/;if(!n.test(e))return;let r=e.match(n)[1];switch(e=e.replaceAll("/","-").replaceAll(" ","_").toLowerCase(),r){case"xml":s="data:x-application/xml;charset=utf-8,"+encodeURIComponent(t);break;case"py":s="data:text/python;charset=utf-8,"+encodeURIComponent(t);break;case"json":s="data:text/json;charset=utf-8,"+encodeURIComponent(t);break;case"csv":s="data:text/csv;charset=utf-8,"+encodeURIComponent(t);break;case"svg":s="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t);break;case"png":s=t}let a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}static setSelected(e,t){for(var s=0;s<e.$.options.length;s++)if(e.$.options[s].text==t)return void(e.$.options[s].selected=!0)}static lazyUpdate(e,s,n,r){r=null==r?"innerText":r;let a=t.get(`[data-uid='${s}']`,e);for(const e in n)t.get(`#${e}`,a)[r]=n[e]}}class s{static randomChar(){const e="abcdefghijklmnopqrstuvwxyz";return e[Math.floor(26*Math.random())]}static UID(){return this.randomChar()+(+new Date).toString(36)+Math.random().toString(36).substring(3)}static SID(){return this.randomChar()+Math.random().toString(36).substring(3,8)}static fromUrl(e){let t=new URLSearchParams(document.location.search);return null==t.get(e)?this.urlDefaults(e):this.urlValidParams(e,t.get(e))}static urlDefaults(e){if("theme"===e)return"light"}static urlValidParams(e,t){if("theme"===e)return["dark","light"].includes(t)?t:this.urlDefaults(e)}static cleanPathname(e){return e.replace(/([^:]\/)\/+/g,"$1").replace(/[^:]\.\//g,"$1")}static getDepth(e){return(e.match(/\//g)||[]).length}static async try_redirect(e,t,s){let n;try{n=404===(await fetch(e,{method:"HEAD"})).status?t:e}catch(e){n=t}s?window.open(n,"_blank").focus():location.href=n}static async try_include(e,t,s){let n=e=>{s?window.open(t,"_blank").focus():location.href=t};const r=new Request(e);await fetch(r).then(e=>{if(!e.ok)throw new Error(e.status);return e.text()}).then(e=>{(e=e.replace(/\n+$/,"")).startsWith(".. include:: ")&&1==e.split(/\n/).length?(e=e.substring(13),s?window.open(new URL(e,t).href,"_blank").focus():location.href=new URL(e,t).href):n()}).catch(n)}static async fetch_each(e){Array.isArray(e)||(e=[e]);for(let t of e)try{const e=new Request(t),s=await fetch(e);if(!0===s.ok)return{obj:await s.json(),url:t};if(404!==s.status)return{error:s,url:t}}catch(e){return{error:e,url:t}}return{error:`No url returned a valid JSON, urls: ${e}`}}static get_alphanumeric(){const e=[...Array(9).keys(),-1].map(e=>(e+1).toString()),t=[...Array(25).keys()].map(e=>String.fromCharCode(98+e));return e.concat(t)}static waitUntil=(e,t=100)=>new Promise(s=>{let n=setInterval(()=>{e()&&(clearInterval(n),s())},t)})}class n{constructor(e){this.$={},this.$.show_repotoc=new t(t.get("#input-show-repotoc")).onchange(this,this.renew_index),this.set_doms(),this.parent=e,"object"==typeof this.parent.fetch?this.parent.fetch.then(this.init.bind(this)):this.init()}init(){let e=this.parent.state.metadata;"repotoc"in e&&this.update_repotoc(e.repotoc),"banner"in e&&this.update_banner(e.banner)}set_doms(){let e=this.$;e.repotocTreeOverlay=new t(t.get(".repotoc-tree.overlay root")),e.repotocTreeSidebar=new t(t.get(".sphinxsidebar .repotoc-tree root")),e.banner=new t("div",{className:"banner"}),t.get("body").prepend(e.banner.$)}renew_index(e){this.$.linksSidebar.forEach(t=>{t.$.tabIndex=e.target.checked?0:-1}),this.$.linksOverlay.forEach(t=>{t.$.tabIndex=e.target.checked?0:-1})}update_repotoc(e){let s=this.$;if(this.parent.state.standalone)return;let n=""===this.parent.state.subhost||void 0===this.parent.state.subhost?this.parent.state.metadata.remote_doc:this.parent.state.subhost.startsWith("/docs")?"/docs/":"/";this.$.linksOverlay=[],this.$.linksSidebar=[];let r=this.parent.state.offline?this.parent.state.content_root:new URL(this.parent.state.content_root,location.href);for(const[s,a]of Object.entries(e)){if(!("name"in a))continue;let e=s==this.parent.state.repository?r:`${n}${s}/`;this.$.linksSidebar.push(new t("a",{href:`${e}index.html`,className:this.parent.state.repository===s?"current":"",innerText:a.name}))}this.$.linksSidebar.forEach(e=>{this.$.linksOverlay.push(e.cloneNode(!0))}),s.repotocTreeOverlay.$&&(s.repotocTreeOverlay.removeChilds(),s.repotocTreeOverlay.append(this.$.linksOverlay)),s.repotocTreeSidebar.$&&(s.repotocTreeSidebar.removeChilds(),s.repotocTreeSidebar.append(this.$.linksSidebar));let a=new Event("change");this.$.show_repotoc.$.dispatchEvent(a)}update_banner(e){let s=this.$;"msg"in e&&s.banner.append(new t("span",{innerText:e.msg})),"a_href"in e&&"a_text"in e&&s.banner.append(new t("a",{href:e.a_href,innerText:e.a_text,target:"_blank"}))}}class r{constructor(e){this.$={},this.with_page_source=!0,this.parent=e,"object"==typeof this.parent.fetch?this.parent.fetch.then(this.preinit.bind(this)):this.preinit(),e.page_actions=this}page_source_sanity(e,t){return e.hasOwnProperty("source_hostname")?e.repotoc.hasOwnProperty(t)?e.repotoc[t].hasOwnProperty("pathname")?e.repotoc[t].hasOwnProperty("branch")?void 0:(console.warn(`edit_source: 'branch' missing from entry '${t}'`),!0):(console.warn(`edit_source: 'pathname' missing from entry '${t}'`),!0):(console.warn(`edit_source: repository '${t}' not in the metadata`),!0):(console.warn("edit_source: 'source_hostname' missing from the metadata",e),!0)}page_source_ignore(){return null!==document.querySelector("#search-documentation")}draw_page_source(){this.$.container=new t("div",{className:"page-actions"}),this.$.edit_button=new t("a",{className:"edit-source",title:"See and edit this page source",target:"blank"}),this.$.edit_button.onclick(this,(e,t)=>{t.preventDefault(),s.try_include(this.edit_button_tgt_raw,e.$.href,!0)},[this.$.edit_button]),this.$.edit_button.onauxclick(this,(e,t)=>{t.preventDefault(),s.try_include(this.edit_button_tgt_raw,e.$.href,!0)},[this.$.edit_button]),this.$.container.append(this.$.edit_button.$)}preinit_page_source(){let e=this.parent.state.metadata,t=this.parent.state.repository;this.page_source_sanity(e,t)||this.page_source_ignore()||(this.draw_page_source(),this.with_page_source=!0)}init_page_source(){if(!this.with_page_source)return;let e=t.get(".bodywrapper .body-header .breadcrumb");null===e||e.classList.contains("empty")?(e=t.get(".bodywrapper .body"),e.insertAdjacentElement("afterbegin",this.$.container.$)):e.parentElement.insertAdjacentElement("beforeend",this.$.container.$);let s=this.parent.state.metadata,n=this.parent.state.repository,r=e=>e.replace("{repository}",n).replace("{branch}",s.repotoc[n].branch).replace("{pathname}",s.repotoc[n].pathname),a=(()=>{let e=document.querySelector('meta[name="page_source_suffix"]');return null===e?".rst":e.content})(),i=r(s.source_hostname),o=r(s.source_hostname_raw),c="";c=this.parent.state.offline?new URL("file://"+location.pathname).href:new URL(location.pathname,location.origin).href;let h=new URL(this.parent.state.content_root,c).href,l=c.substring(h.length);l=l.endsWith(".html")?l.replace(/\.html$/i,a):l.concat(`index${a}`),i=i.concat("/",l),o=o.concat("/",l),this.$.edit_button.$.href=i,this.edit_button_tgt_raw=o}deinit_page_source(){this.with_page_source&&(this.edit_button_tgt_raw=void 0)}preinit(){this.preinit_page_source(),this.init()}init(){this.init_page_source()}deinit(){this.deinit_page_source()}}class a{constructor(e){this.parent=e,this.parent.state.offline||(this.$={},this.prefix=this.parent.state.subhost,this.prefix=new URL(this.prefix,location.origin).href,this.prefix.endsWith("/")&&(this.prefix=this.prefix.slice(0,-1)),this.init())}init(){fetch(new Request(new URL("tags.json",this.prefix+"/"))).then(e=>e).then(e=>e.json()).then(e=>this.render(e)).catch(e=>{console.log("version_dropdown: no tags.json to fill dropdown")})}static assert(e){if(Array.isArray(e))return e.every(e=>"string"==typeof e)?"string-array":(console.warn("version_dropdown: expected array of strings, got ",e),!0);if("[object Object]"===Object.prototype.toString.call(e)){for(let t in e){if(!Array.isArray(e[t]))return console.warn("version_dropdown: expected array, got ",e[t]),!0;if(2!==e[t].length)return console.warn(`version_dropdown: expected two items, got ${e[t].length}`,e[t]),!0}return"fine-grained"}return console.warn("version_dropdown: expected object of arrays or array of strings, got ",e),!0}static object_to_string_array(e){let t=[];for(const s in e)t.push(s);return t}static string_array_to_object(e){let t={};e.forEach(e=>{t[e]=[e,""]}),""in t&&(t[""]=["main","unstable"]);for(const e in t){t[e]=[t[e][0],"latest"];break}return t}render(e){let n=this.parent.state.version,r=this.parent.state.path,i="",o=a.assert(e);if(!0===o)return;"string-array"==o&&(e=a.string_array_to_object(e));let c=t.get(".sphinxsidebarwrapper .toc-tree"),h=t.get("header #right .reverse"),l=t.get("body"),d=Object.keys(e).length>10?4:2,p=" auto".repeat(d),u=new t("div",{className:"version-dropdown-list",style:`grid-template-columns:${p}`});e.hasOwnProperty(r)?(i=e[r][1],n=e[r][0]):console.warn(`version_dropdown: current path ${r} is not in the tags.json. Hard-coded meta[name="version"] will be used.`,e);for(let n in e){let r=new t("a",{href:n.length>0?this.prefix+"/"+n:this.prefix}),a=(e,t,n)=>{n.preventDefault();let r=app.state.path.length>0?this.prefix+"/"+app.state.path:this.prefix;if(location.href.startsWith(r)){let n=location.href.substring(r.length+1);"/"!==e.$.href.slice(-1)&&(n="/"+n);let a=new URL(e.$.href+n);a.hash=location.hash,s.try_redirect(a,e.$.href,t)}else t?window.open(e.$.url,"_blank").focus():location.href=e.$.url};r.onclick(this,a,[r,!1]),r.onauxclick(this,a,[r,!0]);let i=new t("div"),o=new t("div");i.innerText=e[n][0];let c=new t("span",{className:""===e[n][1]?"":"label"});c.innerText=e[n][1],o.append(c),r.append(i),r.append(o),u.append(r)}let f=new t("dev",{id:"cancel-area-show-version-dropdown"});l.append(f.$),l.append(u.$);let m=new t("div",{className:"version-dropdown",title:"Change version"});m.innerText=n;let $=new t("span",{className:""===i?"":"label"});$.innerText=i,m.append($),c.insertAdjacentElement("afterbegin",m.$);let g=new t(m.$.cloneNode(!0));m.onclick(this,this.show,[m,!0]),g.onclick(this,this.show,[g,!0]),f.onclick(this,this.show,[void 0,!1]),onresize=e=>{this.show(void 0,!1,e)},h.append(g.$),this.$.list=u,this.$.cancel=f}show(e,t,s){if(!t)return this.$.cancel.classList.remove("on"),void this.$.list.classList.remove("on");let n=e.rect,r=window.innerWidth;this.$.list.style.top=`${n.top+40}px`,r-n.right<n.left?this.$.list.style.right=r-n.right+"px":this.$.list.style.left=`${n.left}px`,this.$.cancel.classList.add("on"),this.$.list.classList.add("on")}}if(void 0===i)var i={objNameMatch:11,objPartialMatch:6,objPrio:{0:15,1:5,2:-5},objPrioDefault:0,title:15,partialTitle:7,term:5,partialTerm:2};class o{constructor(e){this.parent=e,this.index={},this.index_state={},this.key_prefix={};let s=this.$={};s.keyCheckbox={},s.searchUL={},s.searchLI={},s.body=new t(t.get("body")),s.searchAreaBg=new t(t.get(".search-area-bg")),null===s.searchAreaBg.$&&(s.searchAreaBg=new t("div",{className:"search-area-bg"}),s.body.append([s.searchAreaBg])),s.searchAreaBg.onclick(this,this.cancel_search),s.searchArea=new t(t.get(".search-area")),s.searchForm=new t(t.get("form",s.searchArea)).onevent("submit",this,e=>{e.preventDefault()}),s.searchFormButton=new t(t.get("button",s.searchForm)).onclick(this,this.cancel_search),s.searchInput=new t(t.get("input",s.searchForm)),s.searchTags=new t("span",{className:"search-filter",tabIndex:"-1"}).append([new t("div",{className:"title",innerText:"Search on"}).append([new t("code",{className:"literal",innerText:"Ctrl +"})])]),s.searchResults=new t("ul",{className:"search-results",tabIndex:"-1"}),s.searchContainer=new t("span",{className:"search-container"}).onclick(this,e=>{e.target===s.searchContainer.$&&this.cancel_search()}),this.$.searchContainer.append([this.$.searchTags,this.$.searchResults]),this.$.searchArea.append([this.$.searchContainer]),s.searchForm.$.action=t.get('link[rel="search"]').href,s.searchButton=new t(t.get("header button#search")),null===s.searchButton.$&&(s.searchButton=new t("button",{id:"search",className:"icon",title:"Search (/)"}),this.parent.navigation.$.rightHeader.append([s.searchButton])),s.searchButton.onclick(this,()=>{s.searchArea.classList.add("on"),s.searchAreaBg.classList.add("on"),s.searchInput.focus(),s.searchInput.$.select(),this.$.body.classList.add("overflow-hidden"),this.set_default()}),"object"==typeof this.parent.fetch?this.parent.fetch.then(this.init.bind(this)):this.init(),e.search=this}split_query(e){return e.split(/[^\p{Letter}\p{Number}_\p{Emoji_Presentation}]+/gu).filter(e=>e)}cancel_search(){this.$.searchArea.classList.remove("on"),this.$.searchAreaBg.classList.remove("on"),this.$.body.classList.remove("overflow-hidden");let e=new URL(location);e.searchParams.delete("q"),e.searchParams.delete("r"),history.replaceState({},null,e)}_orderResultsByScoreThenName=(e,t)=>{const s=e[4],n=t[4];if(s===n){const s=e[1].toLowerCase(),n=t[1].toLowerCase();return s===n?0:s>n?-1:1}return s>n?1:-1};async get_default_searchindex(e,t){const n=t&&"local"===e?location.origin:`${this.parent.state.metadata.remote_doc}${e}`;return await s.fetch_each(`${n}/tags.json`).then(t=>(this.key_prefix[e]=(e=>{let t="";if(!("error"in e)){let s=a.assert(e.obj);if(!0===s)return n;"fine-grained"==s&&(e.obj=a.object_to_string_array(e.obj));let r=e.obj;t=r.includes("")?"":r.includes("main")?"main/":r.some(e=>e.includes("adi_meta"))?`${r.find(e=>e.includes("adi_meta"))}/`:`${r.at(0)}/`}return`${n}/${t}`})(t),`${this.key_prefix[e]}searchindex.js`))}check_toc(e,t){if(t.target.checked){if(!1===this.index_state[e].requested){let t=""===this.parent.state.subhost||void 0===this.parent.state.subhost;return void this.get_default_searchindex(e,t).then(t=>{let s=new URL(t);this.load_index(s.href,e),this.index_state[e].requested=!0,this.$.keyCheckbox[e].classList.add("requested"),this.$.keyCheckbox[e].classList.remove("failed"),this.renew_search()})}this.query(this.$.searchInput.$.value)}else this.get_tags_and_update_url(this.$.searchInput.$.value);this.renew_search()}renew_search(){let e=[];for(const[s,n]of Object.entries(this.index_state))!0===this.$.keyCheckbox[s].$.checked&&!0===this.index_state[s].ready?(s in this.$.searchUL||(this.$.searchUL[s]=new t("ul"),this.$.searchLI[s]=new t("li").append([new t("div",{innerText:this.$.keyCheckbox[s].$.name}),this.$.searchUL[s]]),e.push(this.$.searchLI[s])),this.$.searchLI[s].classList.add("on")):s in this.$.searchUL&&this.$.searchLI[s].classList.remove("on");this.$.searchResults.append(e)}set_default(){for(const[e,t]of Object.entries(this.$.keyCheckbox))if(t.$.checked)return;let e=""===this.parent.state.subhost||void 0===this.parent.state.subhost||this.parent.state.standalone?"local":this.parent.state.repository,t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))}search_shortcut(e){"IntlRo"!==e.code&&"Slash"!==e.code&&("KeyK"!==e.code||!e.ctrlKey&&!e.altKey)||this.$.searchArea.classList.contains("on")?"Escape"===e.code&&this.$.searchArea.classList.contains("on")&&this.cancel_search():(this.$.searchArea.classList.add("on"),this.$.searchAreaBg.classList.add("on"),this.$.body.classList.add("overflow-hidden"),this.$.searchInput.focus(),this.$.searchInput.$.select(),this.set_default())}load_index=(e,t)=>{let s=e=>{console.warn(e),this.index_state[t].requested=!1,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("failed"),this.$.keyCheckbox[t].$.checked=!1};const n=new Request(e);fetch(n).then(e=>e.text()).then(e=>{try{if("Search.setIndex("!=e.substring(0,16)||")"!=e.substring(e.length-1))throw new Error(`Search index of key '${t}' is impropetly formatted`);this.index[t]=JSON.parse(e.substring(16,e.length-1)),this.index_state[t].ready=!0,this.$.keyCheckbox[t].classList.remove("requested"),this.$.keyCheckbox[t].classList.add("ready"),this.query(this.$.searchInput.$.value)}catch(e){s(e)}}).catch(s)};perform_object_search(e,t,s){const n=this.index[s].filenames,r=this.index[s].docnames,a=this.index[s].objects,o=this.index[s].objnames,c=this.index[s].titles,h=[];return Object.keys(a).forEach(s=>a[s].forEach(a=>((s,a)=>{const l=a[4],d=(s?s+".":"")+l,p=d.toLowerCase();if(p.indexOf(e)<0)return;let u=0;const f=p.split(".");p===e||f.slice(-1)[0]===e?u+=i.objNameMatch:f.slice(-1)[0].indexOf(e)>-1&&(u+=i.objPartialMatch);const m=o[a[1]][2],$=c[a[0]],g=new Set(t);if(g.delete(e),g.size>0){const e=`${s} ${l} ${m} ${$}`.toLowerCase();if([...g].some(t=>e.indexOf(t)<0))return}let y=a[3];""===y?y=d:"-"===y&&(y=o[a[1]][1]+"-"+d);const w=m+", in "+$;i.objPrio.hasOwnProperty(a[2])?u+=i.objPrio[a[2]]:u+=i.objPrioDefault,h.push([r[a[0]],d,"#"+y,w,u,n[a[0]],"object"])})(s,a))),h}perform_terms_search(e,t,s){const n=this.index[s].terms,r=this.index[s].titleterms,a=this.index[s].filenames,o=this.index[s].docnames,c=this.index[s].titles,h=new Map,l=new Map;e.forEach(e=>{const t=[],s=[{files:n.hasOwnProperty(e)?n[e]:void 0,score:i.term},{files:r.hasOwnProperty(e)?r[e]:void 0,score:i.title}];if(e.length>2){const t=e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");n.hasOwnProperty(e)||Object.keys(n).forEach(e=>{e.match(t)&&s.push({files:n[e],score:i.partialTerm})}),r.hasOwnProperty(e)||Object.keys(r).forEach(e=>{e.match(t)&&s.push({files:r[e],score:i.partialTitle})})}s.every(e=>void 0===e.files)||(s.forEach(s=>{if(void 0===s.files)return;let n=s.files;void 0===n.length&&(n=[n]),t.push(...n),n.forEach(t=>{h.has(t)||h.set(t,new Map);h.get(t).set(e,s.score)})}),t.forEach(t=>{l.has(t)?-1===l.get(t).indexOf(e)&&l.get(t).push(e):l.set(t,[e])}))});const d=[];for(const[s,i]of l){const l=[...e].filter(e=>e.length>2).length;if(i.length!==e.size&&i.length!==l)continue;if([...t].some(e=>n[e]===s||r[e]===s||(n[e]||[]).includes(s)||(r[e]||[]).includes(s)))break;const p=Math.max(...i.map(e=>h.get(s).get(e)));d.push([o[s],c[s],"",null,p,a[s],"text"])}return d}perform_search(e,t,s,n,r,a){const o=this.index[a].filenames,c=this.index[a].docnames,h=this.index[a].titles,l=this.index[a].alltitles,d=this.index[a].indexentries,p=[],u=[],f=e.toLowerCase().trim();for(const[e,t]of Object.entries(l))if(e.toLowerCase().trim().includes(f)&&f.length>=e.length/2)for(const[s,n]of t){const t=Math.round(i.title*f.length/e.length),r=h[s]===e?1:0;p.push([c[s],h[s]!==e?`${h[s]} > ${e}`:e,null!==n?"#"+n:"",null,t+r,o[s],"title"])}for(const[e,t]of Object.entries(d))if(e.includes(f)&&f.length>=e.length/2)for(const[s,n,r]of t){const t=Math.round(100*f.length/e.length),a=[c[s],h[s],n?"#"+n:"",null,t,o[s],"index"];r?p.push(a):u.push(a)}r.forEach(e=>p.push(...this.perform_object_search(e,r,a))),p.push(...this.perform_terms_search(t,s,a)),i.score&&(p.forEach(e=>e[4]=i.score(e)),u.forEach(e=>e[4]=i.score(e))),p.sort(this._orderResultsByScoreThenName),u.sort(this._orderResultsByScoreThenName);let m=[...u,...p],$=new Set;return m=m.reverse().reduce((e,t)=>{let s=t.slice(0,4).concat([t[5]]).map(e=>String(e)).join(",");return $.has(s)||(e.push(t),$.add(s)),e},[]),m.reverse()}get_tags_and_update_url(e){const t=[];for(const[e,s]of Object.entries(this.index_state))!0===this.$.keyCheckbox[e].$.checked&&void 0!==this.index[e]&&t.push(e);let s=new URL(location);return e.length>0?(s.searchParams.set("q",e),s.searchParams.set("r",t)):(s.searchParams.delete("q"),s.searchParams.delete("r")),history.replaceState({},null,s),t}html_to_text(e,t){const s=(new DOMParser).parseFromString(e,"text/html");for(const e of[".headerlink","script","style"])s.querySelectorAll(e).forEach(e=>{e.remove()});if(t){const e=s.querySelector(`[role="main"] ${t}`);if(e)return e.textContent;console.warn(`Anchored content block '[role=main] ${t}' not found.`)}const n=s.querySelector('[role="main"]');return n?n.textContent:(console.warn(`Anchored content block '[role=main] ${t}' not found.`),"")}get_summary(e,t,s,n){const r=this.html_to_text(e,s);if(""===r)return;const a=r.toLowerCase(),i=[...t].map(e=>a.indexOf(e.toLowerCase())).filter(e=>e>-1).slice(-1)[0],o=Math.max(i-120,0),c=0===o?"":"...",h=o+240<r.length?"...":"";n.$.textContent=c+r.substr(o,240).trim()+h,n.$.classList.remove("loading")}query(e){if("undefined"==typeof Stemmer)return;const[s,n,r,a,i]=this.parse_query(e);this.renew_search(),this.get_tags_and_update_url(e).forEach(e=>{const o=this.perform_search(s,n,r,a,i,e);for(;this.$.searchUL[e].$.firstElementChild;)this.$.searchUL[e].$.removeChild(this.$.searchUL[e].$.lastChild);let c=[];o.reverse(),o.forEach(s=>{const[r,a,i,o,h,l,d]=s;let p=`${this.key_prefix[e]}${r}.html${i}`,u=new t("li").append(new t("a",{href:p,innerText:a}));if(o)u.append(new t("span",{innerText:`(${o})`}));else{let e=new t("p",{className:"context"});const s=setTimeout(()=>{e.classList.add("loading")},50);u.append(e),fetch(p).then(e=>e.text()).then(t=>{t&&this.get_summary(t,n,i,e)}).finally(()=>{clearTimeout(s)})}c.push(u)}),this.$.searchUL[e].append(c),0===o.length?this.$.searchLI[e].classList.add("empty"):this.$.searchLI[e].classList.remove("empty")})}parse_query(e){const t=new Stemmer,s=new Set,n=new Set,r=new Set,a=new Set(this.split_query(e.toLowerCase().trim()));return this.split_query(e.trim()).forEach(e=>{const a=e.toLowerCase();if(stopwords instanceof Set){if(stopwords.has(a)||e.match(/^\d+$/))return}else if(-1!==stopwords.indexOf(a)||e.match(/^\d+$/))return;let i=t.stemWord(a);"-"===i[0]?n.add(i.substr(1)):(s.add(i),r.add(a))}),localStorage.setItem("sphinx_highlight_terms",[...r].join(" ")),[e,s,n,r,a]}select_filter_tags(e){this.$.searchArea.classList.contains("on")&&this.$.searchTags.classList.contains("on")&&Object.values(this.$.keyCheckbox).forEach(t=>{if(t.$.dataset.shortcut==e.key){e.preventDefault();let s=new Event("change");t.$.checked=!t.$.checked,t.$.dispatchEvent(s)}})}keyup(e){switch(e.code){case"IntlRo":case"Slash":case"Escape":case"KeyK":this.search_shortcut(e);break;case"ControlLeft":case"ControlRight":this.$.searchTags.classList.remove("on")}}keydown(e){switch(e.code){case"IntlRo":case"Slash":e.preventDefault();break;case"KeyK":e.ctrlKey&&e.altKey&&e.preventDefault();break;case"ControlLeft":case"ControlRight":this.$.searchTags.classList.add("on")}this.select_filter_tags(e)}focus(e){this.$.searchTags.classList.contains("on")&&this.$.searchTags.classList.remove("on")}include_item(e,s,n){this.index_state[e]={ready:!1,requested:!1};let r=new t("input",{id:`tag-${e}`,type:"checkbox",name:s,shortcut:n}).onchange(this,this.check_toc,[e]);this.$.searchTags.append([new t("span").append([r,new t("label",{htmlFor:`tag-${e}`}).append([new t("span",{innerText:n,className:"checkbox"}),new t("span",{innerText:s})])])]),this.$.keyCheckbox[e]=r}init(){let e=s.get_alphanumeric(),n=new URL(`${this.parent.state.content_root}_static/language_data.js`,location);if(this.$.language_data=new t("script",{src:n.href,async:!0}).onevent("load",this,e=>{this.$.searchForm.$.action=""}),this.$.body.append([this.$.language_data]),!this.parent.state.standalone)for(const[t,s]of Object.entries(this.parent.state.metadata.repotoc))this.include_item(t,s.name,e.shift());if(""===this.parent.state.subhost||void 0===this.parent.state.subhost||this.parent.state.standalone){let t=this.parent.state.repository in this.parent.state.metadata.repotoc?this.parent.state.metadata.repotoc[this.parent.state.repository].name:this.parent.state.repository,s=this.parent.state.standalone?"":" (local build)";this.include_item("local",`${t}${s}`,e.shift())}this.$.searchInput.$.oninput=e=>{this.query(e.target.value)};let r=new URL(location),a=r.searchParams.get("q"),i=r.searchParams.get("r");if(null!==a){null!==i&&(i=i.split(","),i.forEach(e=>{let t=new Event("change");e in this.$.keyCheckbox&&(this.$.keyCheckbox[e].$.checked=!0,this.$.keyCheckbox[e].$.dispatchEvent(t))})),this.$.searchInput.$.value=a;let e=new Event("click");this.$.searchButton.$.dispatchEvent(e)}document.addEventListener("keyup",e=>{this.keyup(e)},!1),document.addEventListener("keydown",e=>{this.keydown(e)},!1),document.addEventListener("focus",e=>{this.focus(e)})}}class c{constructor(e){this.$={},this.parent=e,this.init(),e.content_actions=this}copy_button(){let e=new t(t.get(".bodywrapper .body"));t.getAll("div.highlight pre",e.$).forEach(e=>{if(e.parentNode.parentNode.classList.contains("no-select"))return;if(2===e.children.length&&e.children[1].classList.contains("c1"))return;let s=e.textContent.replaceAll("\n","");s.length>20&&(s=s.slice(0,20)+"...");let n=new t("button",{className:"icon copy",title:`Copy "${s}"`}).onclick(this,(e,t)=>{navigator.clipboard.writeText(e.textContent).then(()=>{}).catch(e=>{console.error(e)})},[e]);e.insertAdjacentElement("afterend",n.$)})}deinit(){}init(){document.querySelector('script[src*="_static/copybutton.js"]')?console.log("copy_button: sphinx-copy-button extension is present, skipping"):this.copy_button()}}function h(){new e(app),new n(app),new r(app),new o(app),new a(app),new c(app)}return h(),h});
//# sourceMappingURL=extra.umd.js.map
