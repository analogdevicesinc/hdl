<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="Here is a quick start guide about creating a new IP. You can start from these files and modify them as you need. Here is the code for a fan control IP: library/axi_fan_control. In this tutorial, we will make a led control IP, using AXI. In this case, &lt;module_name&gt; will be replaced in code with axi_led_control for Xilinx and axi_led_control_intel for Intel." name="description" />

    <title>Creating a new IP &#8212; HDL  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../_static/app.min.css?v=33d8ff8e" />
    <script async="async" src="../../_static/app.umd.js?v=cd58f2cb"></script>
    <link rel="icon" href="../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Use ADI IPs into your own project" href="use_adi_ips.html" />
    <link rel="prev" title="ADI IP cores" href="index.html" />
   
  
  <meta name="repository" content="hdl">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".rst">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com" aria-label="Analog Devices Inc. landing page"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../index.html">
          <div>HDL</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../index.html" class="current">HDL</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Creating a new IP</a><ul>
<li><a class="reference internal" href="#verilog-file">Verilog File</a></li>
<li><a class="reference internal" href="#register-map">Register Map</a><ul>
<li><a class="reference internal" href="#importing-with-using-method">Importing with Using Method</a></li>
<li><a class="reference internal" href="#ranged-registers-and-fields">Ranged Registers and Fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#xilinx">Xilinx</a><ul>
<li><a class="reference internal" href="#tcl-file">TCL File</a></li>
<li><a class="reference internal" href="#makefile">Makefile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#intel">Intel</a><ul>
<li><a class="reference internal" href="#id1">TCL File</a></li>
<li><a class="reference internal" href="#id2">Makefile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lattice">Lattice</a><ul>
<li><a class="reference internal" href="#id3">TCL File</a></li>
<li><a class="reference internal" href="#namespace-for-lattice-ip-packaging">Namespace for Lattice IP packaging</a></li>
<li><a class="reference internal" href="#example-for-creating-an-ip">Example for creating an IP</a></li>
<li><a class="reference internal" href="#id4">Makefile</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="logo" href="../../index.html">
      <img class="only-light" src="../../_static/HDL_logo_cropped.svg"/>
      <img class="only-dark" src="../../_static/HDL_logo_w_cropped.svg"/>
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../index.html" class="current">HDL</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">User Guide</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git_repository.html">Git repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html">Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_hdl.html">Build an HDL project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_boot_bin.html">Build the BOOT.BIN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_intel_boot_image.html">Build the Intel Boot Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">HDL architecture</a></li>
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-1" id="toctree-collapse-1-1" checked=""/><div class="collapse"><a class="reference internal" href="index.html">IP cores</a><label for="toctree-collapse-1-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Creating a new IP</a></li>
<li class="toctree-l3"><a class="reference internal" href="use_adi_ips.html">Use ADI IPs into your own project</a></li>
<li class="toctree-l3"><a class="reference internal" href="interfaces.html">Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="axi_adc/index.html">Generic AXI ADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="axi_dac/index.html">Generic AXI DAC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../porting_project.html">Porting HDL projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../customize_hdl.html">Customize HDL projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hdl_coding_guidelines.html">HDL coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs_guidelines.html">Documentation guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html">Contributing to HDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../third_party.html">Third party forks</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../../library/index.html">IP Cores</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../../library/i3c_controller/index.html">I3C Controller</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../library/i3c_controller/i3c_controller_host_interface.html">Host Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/i3c_controller/i3c_controller_core.html">Core Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/i3c_controller/interface.html">Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-2" id="toctree-collapse-2-2"/><div class="collapse"><a class="reference internal" href="../../library/jesd204/index.html">JESD204 Interface Framework</a><label for="toctree-collapse-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../library/jesd204/generic_jesd_bds/index.html">Generic JESD204 block designs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/jesd204/axi_jesd204_tx/index.html">JESD204B/C Link Transmit Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/jesd204/axi_jesd204_rx/index.html">JESD204B/C Link Receive Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/jesd204/ad_ip_jesd204_tpl_adc/index.html">ADC JESD204B/C Transport Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/jesd204/ad_ip_jesd204_tpl_dac/index.html">DAC JESD204B/C Transport Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/jesd204/xgt_wizard/index.html">Xilinx FPGAs Transceivers Wizard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/jesd204/troubleshoot/troubleshoot_jesd204_tx.html">Troubleshooting JESD204 TX links</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3" id="toctree-collapse-2-3"/><div class="collapse"><a class="reference internal" href="../../library/spi_engine/index.html">SPI Engine</a><label for="toctree-collapse-2-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/spi_engine_execution.html">Execution Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/axi_spi_engine.html">AXI Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/spi_engine_offload.html">Offload Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/spi_engine_interconnect.html">Interconnect Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/control-interface.html">Control Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/offload-control-interface.html">Offload Control Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/spi-bus-interface.html">SPI Bus Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/instruction-format.html">Instruction Set Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/pipeline-delays.html">Pipeline Delays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/spi_engine/tutorial.html">Tutorial - PulSAR ADC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad35xxr/index.html">AXI AD35XXR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad408x/index.html">AXI AD408x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad485x/index.html">AXI AD485x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad7405/index.html">AXI AD7405</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad7606x/index.html">AXI AD7606x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad7616/index.html">AXI AD7616</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad7768/index.html">AXI AD7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad777x/index.html">AXI AD777x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9265/index.html">AXI AD9265</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9361/index.html">AXI AD9361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9467/index.html">AXI AD9467</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9783/index.html">AXI AD9783</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9963/index.html">AXI AD9963</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ada4355/index.html">AXI ADA4355</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_adaq8092/index.html">AXI ADAQ8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_adrv9001/index.html">AXI ADRV9001</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ltc235x/index.html">AXI LTC235X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ltc2387/index.html">AXI LTC2387</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/data_offload/index.html">Data Offload</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_dmac/index.html">AXI DMAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_hdmi_rx/index.html">AXI HDMI RX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_hdmi_tx/index.html">AXI HDMI TX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_adc_decimate/index.html">AXI ADC Decimate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_adc_trigger/index.html">AXI ADC Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_adxcvr/index.html">AXI ADXCVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_clkgen/index.html">AXI CLK Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_clock_monitor/index.html">AXI Clock Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_dac_interpolate/index.html">AXI DAC Interpolate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_fan_control/index.html">AXI Fan Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_laser_driver/index.html">AXI Laser Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_logic_analyzer/index.html">AXI Logic Analyzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_pwm_gen/index.html">AXI PWM Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_sysid/index.html">AXI System ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_tdd/index.html">AXI TDD</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-4" id="toctree-collapse-2-4"/><div class="collapse"><a class="reference internal" href="../../library/cn0363/index.html">CN0363</a><label for="toctree-collapse-2-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../library/cn0363/cn0363_dma_sequencer.html">CN0363 DMA Sequencer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../library/cn0363/cn0363_phase_data_sync.html">CN0363 Phase Data Sync</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../library/common/ad_dds/index.html">AD Direct Digital Synthesis</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-5" id="toctree-collapse-2-5"/><div class="collapse"><a class="reference internal" href="../../library/corundum/index.html">Corundum Network Stack</a><label for="toctree-collapse-2-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../library/corundum/corundum_core/index.html">Corundum Core</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-5-1" id="toctree-collapse-2-5-1"/><div class="collapse"><a class="reference internal" href="../../library/corundum/ethernet/index.html">Corundum Ethernet Core</a><label for="toctree-collapse-2-5-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../library/corundum/ethernet/vcu118/index.html">VCU118</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_axis_fifo/index.html">AXI Stream FIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_axis_fifo_asym/index.html">Asymmetric AXI Stream FIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_extract/index.html">Util Extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_mii_to_rmii/index.html">Util MII to RMII</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_pack/util_cpack2.html">Channel CPACK Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_pack/util_upack2.html">Channel UPACK Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_rfifo/index.html">Util RFIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_sigma_delta_spi/index.html">Util Sigma Delta SPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_var_fifo/index.html">Util VAR FIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/util_wfifo/index.html">Util WFIFO</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-6" id="toctree-collapse-2-6"/><div class="collapse"><a class="reference internal" href="../../library/xilinx/index.html">AMD Xilinx Specific IPs</a><label for="toctree-collapse-2-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../library/xilinx/util_adxcvr/index.html">UTIL_ADXCVR</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9144/index.html">AXI AD9144 (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9371/index.html">AXI AD9371 (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9643/index.html">AXI AD9643 (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../library/axi_ad9671/index.html">AXI AD9671 (OBSOLETE)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../projects/index.html">Projects</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad_gmsl2eth_sl/index.html">AD-GMSL2ETH-SL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad_quadmxfe1_ebz/index.html">AD-QUADMXFE1-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad353xr/index.html">AD353XR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad35xxr_evb/index.html">AD35XXR-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad4052_ardz/index.html">AD4052-ARDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad408x_fmc_evb/index.html">AD408X-FMC-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad4110/index.html">AD4110-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad411x_ad717x/index.html">AD411x-AD717x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad4134_fmc/index.html">AD4134-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad4170_asdz/index.html">AD4170-ASDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad4630_fmc/index.html">AD4630-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad469x_evb/index.html">AD469X-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad485x_fmcz/index.html">AD485X-FMCZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad488x_fmc_evb/index.html">AD488X-FMC-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad5758_sdz/index.html">AD5758-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad5766_sdz/index.html">AD5766-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad57xx_ardz/index.html">AD57XX-ARDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad6676evb/index.html">AD6676EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7124_asdz/index.html">AD7124-ASDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7134_fmc/index.html">AD7134-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad719x_asdz/index.html">AD719X-ASDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad738x_fmc/index.html">AD738X-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7405_fmc/index.html">AD7405-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7606x_fmc/index.html">AD7606X-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7616_sdz/index.html">AD7616-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad77681evb/index.html">AD7768-1-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad7768evb/index.html">AD7768-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad777x_fmcz/index.html">AD777X-FMCZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9081_fmca_ebz/index.html">AD9081-FMCA-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9081_fmca_ebz_x_band/index.html">AD9081-FMCA-EBZ-X-BAND</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9083_evb/index.html">AD9083-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9084_ebz/index.html">AD9084-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad916x_fmc/index.html">AD916x-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9208_dual_ebz/index.html">AD9208-DUAL-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9209_fmca_ebz/index.html">AD9209-FMCA-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9213_dual_ebz/index.html">AD9213-DUAL-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9213_evb/index.html">AD9213-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9265_fmc/index.html">AD9265-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9434_fmc/index.html">AD9434-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9467_fmc/index.html">AD9467-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9656_fmc/index.html">AD9656-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9694_fmc/index.html">AD9694-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9695_fmc/index.html">AD9695-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9783_ebz/index.html">AD9783-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ada4355_fmc/index.html">ADA4355-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adaq7980_sdz/index.html">ADAQ7980-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adaq8092_fmc/index.html">ADAQ8092-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/admx6001_ebz/index.html">ADMX6001-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9001/index.html">ADRV9001</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9001_dual/index.html">ADRV9001-DUAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9009/index.html">ADRV9009</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9009zu11eg/index.html">ADRV9009-ZU11EG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9026/index.html">ADRV9026</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv904x/index.html">ADRV904x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9361z7035/index.html">ADRV9361Z7035</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9364z7020/index.html">ADRV9364Z7020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adrv9371x/index.html">ADRV9371x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adv7511/index.html">ADV7511</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/adv7513/index.html">ADV7513</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/arradio/index.html">ARRADIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0363/index.html">CN0363</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0506/index.html">CN0506</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0540/index.html">CN0540</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0561/index.html">CN0561</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0577/index.html">CN0577</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0579/index.html">CN0579</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/cn0585/index.html">CN0585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/dac_fmc_ebz/index.html">DAC-FMC-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/daq2/index.html">DAQ2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/daq3/index.html">DAQ3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/dc2677a/index.html">DC2677A</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/fmcomms2/index.html">FMCOMMS2/3/4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/fmcomms5/index.html">FMCOMMS5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/fmcomms8/index.html">FMCOMMS8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/fmcomms11/index.html">FMCOMMS11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/jupiter_sdr/index.html">JUPITER-SDR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/m2k/index.html">M2K</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/max96724/index.html">MAX96724</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/pluto/index.html">PLUTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/pulsar_adc/index.html">PULSAR-ADC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/pulsar_lvds_adc/index.html">PULSAR-LVDS-ADC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad9739a_fmc/index.html">AD9739A-FMC (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/ad_fmclidar1_ebz/index.html">AD-FMCLIDAR1-EBZ (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/fmcadc2/index.html">FMCADC2 (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/fmcadc5/index.html">FMCADC5 (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/fmcjesdadc1/index.html">FMCJESDADC1 (OBSOLETE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/imageon/index.html">IMAGEON (OBSOLETE)</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
    <nav class="breadcrumb">
        <ol>
          <li><a href="../index.html">User Guide</a></li>
          <li><a href="index.html">ADI IP cores</a></li>
          </ol>
    </nav>
  </div>

          <div class="body" role="main">
            
  <section id="creating-a-new-ip">
<span id="creating-new-ip"></span><h1>Creating a new IP<a class="headerlink" href="#creating-a-new-ip" title="Permalink to this heading"></a></h1>
<p>Here is a quick start guide about creating a new IP. You can start from these
files and modify them as you need.
Here is the code for a fan control IP: <a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_fan_control" target="_blank">library/axi_fan_control</a>.
In this tutorial, we will make a led control IP, using AXI. In this case,
<code class="docutils literal notranslate"><span class="pre">&lt;module_name&gt;</span></code> will be replaced in code with <code class="docutils literal notranslate"><span class="pre">axi_led_control</span></code> for Xilinx
and <code class="docutils literal notranslate"><span class="pre">axi_led_control_intel</span></code> for Intel.</p>
<section id="verilog-file">
<h2>Verilog File<a class="headerlink" href="#verilog-file" title="Permalink to this heading"></a></h2>
<p>Lets say you want to make a new IP with the name <code class="docutils literal notranslate"><span class="pre">&lt;module_name&gt;</span></code>.
You must edit the verilog file so that it has the same name (e.g. <code class="docutils literal notranslate"><span class="pre">axi_led_control.v</span></code>).
After that, feel free to write the verilog code for your purpose.
You can also use other instances of modules, but be sure to include them after,
in the tcl file, under the <code class="docutils literal notranslate"><span class="pre">&lt;other_components&gt;</span></code> list.</p>
</section>
<section id="register-map">
<span id="adi-regmap"></span><h2>Register Map<a class="headerlink" href="#register-map" title="Permalink to this heading"></a></h2>
<p>The register map is defined in a <em>docs/regmap/adi_regmap_*.txt</em> file and
follows a special syntax.</p>
<p>One file can have more than one register map, and they are bounded by the header:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TITLE</span>
<span class="p">[</span><span class="n">USING</span> <span class="o">&lt;</span><span class="n">regmap_to_inherit</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">ip_name</span><span class="o">&gt;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">unique_id</span><span class="o">&gt;</span>
<span class="n">ENDTITLE</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TITLE</span>
<span class="n">SPI</span> <span class="n">Engine</span> <span class="p">(</span><span class="n">axi_spi_engine</span><span class="p">)</span>
<span class="n">AXI_SPI_ENGINE</span>
<span class="n">ENDTITLE</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">USING</span></code> method is only present if the register map imports other register
maps <a class="reference internal" href="#hdl-regmap-using"><span class="std std-ref">for look-up</span></a>.</p>
<p>The register and fields are defined with the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REG</span>
<span class="o">&lt;</span><span class="n">address</span><span class="o">&gt;</span>
<span class="p">[</span><span class="n">WHERE</span> <span class="n">n</span> <span class="n">IS</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span>
<span class="n">ENDREG</span>

<span class="n">FIELD</span>
<span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">default</span><span class="o">&gt;</span>
<span class="p">[</span><span class="n">WHERE</span> <span class="n">n</span> <span class="n">IS</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">access</span><span class="o">&gt;</span>
<span class="n">ENDFIELD</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REG</span>
<span class="mh">0x00000001</span>
<span class="n">VERSION</span>
<span class="n">Version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">peripheral</span><span class="o">.</span>
<span class="n">Follows</span> <span class="n">semantic</span> <span class="n">versioning</span><span class="o">.</span> <span class="n">Current</span> <span class="n">version</span> <span class="mf">1.00.71</span><span class="o">.</span>
<span class="n">ENDREG</span>

<span class="n">FIELD</span>
<span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">16</span><span class="p">]</span> <span class="mh">0x00000001</span>
<span class="n">VERSION_MAJOR</span>
<span class="n">RO</span>
<span class="n">ENDFIELD</span>

<span class="n">FIELD</span>
<span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span> <span class="mh">0x00000001</span>
<span class="n">VERSION_MINOR</span>
<span class="n">RO</span>
<span class="n">ENDFIELD</span>

<span class="n">FIELD</span>
<span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="mh">0x00000071</span>
<span class="n">VERSION_PATCH</span>
<span class="n">RO</span>
<span class="n">ENDFIELD</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> line is only present if using ranged <a class="reference internal" href="#hdl-regmap-ranged"><span class="std std-ref">register/fields</span></a>.</p>
<p>Noticed that the description can be multi-line and can also include Sphinx
syntax, parsed during build.
The file content is always 90-columns wide.
There are multiple ways to define the default value for a field.
All parameter values used for defining or calculating the default
value of a field must be a configuration parameter.
In cases where expressions are used to calculate the field values, these
must be compatible SystemVerilog, as the expressions are used in the
simulation environment as well.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FIELD
[31:0]
SCRATCH
RO
Value of the Scratch field is undefined.
In a simulation environment this value appears as X for all bits.
ENDFIELD

FIELD
[31:0] 0x12345678
VERSION
RO
Value of the Version is hardcoded in the IP.
ENDFIELD

FIELD
[31:0] ID
PERIPHERAL_ID
RO
Value of the ID configuration parameter.
In case of multiple instances, each instance will have a unique ID.
ENDFIELD

FIELD
[31:0] SPECIAL = (VALUE1+(VALUE2-VALUE3)*VALUE4)/VALUE5
SPECIAL
RO
Value of the SPECIAL field is calculated using an expression.
Example of simple operations
ENDFIELD

FIELD
[31:0] SPECIAL = (VALUE1&gt;VALUE2)?VALUE3:VALUE4
SPECIAL
RO
Value of the SPECIAL field is calculated using an expression.
Example of conditional calculation
ENDFIELD

FIELD
[31:0] SPECIAL = `MAX(VALUE1,`MIN(VALUE2,VALUE3))
SPECIAL
RO
Value of the SPECIAL field is calculated using an expression.
Example of min and max value calculation
ENDFIELD

FIELD
[31:0] SPECIAL = $clog2(VALUE1**VALUE2)
SPECIAL
RO
Value of the SPECIAL field is calculated using an expression.
Example of log2 and exponentiation calculation
ENDFIELD
</pre></div>
</div>
<p>Examples:</p>
<ul class="simple">
<li><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/docs/regmap/adi_regmap_spi_engine.txt" target="_blank">docs/regmap/adi_regmap_spi_engine.txt</a></p></li>
<li><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/docs/regmap/adi_regmap_adc.txt" target="_blank">docs/regmap/adi_regmap_adc.txt</a>, uses <code class="docutils literal notranslate"><span class="pre">WHERE</span></code></p></li>
<li><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/docs/regmap/adi_regmap_axi_ad3552r.txt" target="_blank">docs/regmap/adi_regmap_axi_ad3552r.txt</a>, uses <code class="docutils literal notranslate"><span class="pre">USING</span></code></p></li>
</ul>
<section id="importing-with-using-method">
<span id="hdl-regmap-using"></span><h3>Importing with Using Method<a class="headerlink" href="#importing-with-using-method" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">USING</span></code> method allows to look-up a register map to import register and
fields.
A register map can look-up multiple register maps by repeating the method for
each register map, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TITLE</span>
<span class="n">USING</span> <span class="n">COMMON_REGS</span>
<span class="n">USING</span> <span class="n">COMMON_REGS_EXTRA</span>
<span class="n">My</span> <span class="n">IP</span> <span class="p">(</span><span class="n">my_ip</span><span class="p">)</span>
<span class="n">MY_IP</span>
<span class="n">ENDTITLE</span>
</pre></div>
</div>
<p>If using the <code class="docutils literal notranslate"><span class="pre">USING</span></code> method for look-up, registers and fields are imported
with the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REG</span>
<span class="o">&lt;</span><span class="n">reg_to_import</span><span class="o">&gt;</span>
<span class="n">ENDREG</span>

<span class="n">FIELD</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">field_to_import</span><span class="o">&gt;</span> <span class="o">...</span><span class="p">]</span>
<span class="n">ENDFIELD</span>
</pre></div>
</div>
<p>That means, only include the register/field name, and nothing else.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REG</span>
<span class="n">CNTRL_1</span>
<span class="n">ENDREG</span>

<span class="n">FIELD</span>
<span class="n">SDR_DDR_N</span>
<span class="n">SYMB_8_16B</span>
<span class="n">ENDFIELD</span>
</pre></div>
</div>
<p>If inheriting registers from multiple register maps, consider explicitly
setting the source register map:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REG</span>
<span class="n">COMMON_EXTRA</span><span class="o">.</span><span class="n">CTRL</span>
<span class="n">ENDREG</span>

<span class="n">FIELD</span>
<span class="n">SOME_FIELD</span>
<span class="n">ENDFIELD</span>
</pre></div>
</div>
<p>Some considerations:</p>
<ul class="simple">
<li><p>Imported registers shall have non-imported fields, for example, when importing
a register that is reserved for custom implementation.</p></li>
<li><p>Imported fields must be inside a imported register, since the field name is not
unique.</p></li>
<li><p>Multiple fields can be imported from a single <code class="docutils literal notranslate"><span class="pre">FIELD</span></code> group.</p></li>
<li><p>Multiple register maps can be used for lookup. Add each in a different <code class="docutils literal notranslate"><span class="pre">USING</span></code>
method.</p></li>
</ul>
</section>
<section id="ranged-registers-and-fields">
<span id="hdl-regmap-ranged"></span><h3>Ranged Registers and Fields<a class="headerlink" href="#ranged-registers-and-fields" title="Permalink to this heading"></a></h3>
<p>Registers and fields can use a special <code class="docutils literal notranslate"><span class="pre">n</span></code> variable and the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> method
to define an incrementing/repeating register/field. There is an option increase
the address increment value by an additional parameter. This parameter must be
in hexadecimal format as well.
The syntax is <code class="docutils literal notranslate"><span class="pre">WHERE</span> <span class="pre">n</span> <span class="pre">IS</span> <span class="pre">FROM</span> <span class="pre">&lt;lower&gt;</span> <span class="pre">TO</span> <span class="pre">&lt;UPPER&gt;</span></code>, for example, for registers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REG</span>
<span class="mh">0x0102</span> <span class="o">+</span> <span class="n">n</span>
<span class="n">WHERE</span> <span class="n">n</span> <span class="n">IS</span> <span class="n">FROM</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span>
<span class="n">CHAN_CNTRLn_3</span>
<span class="n">DAC</span> <span class="n">Channel</span> <span class="n">Control</span> <span class="o">&amp;</span> <span class="n">Status</span> <span class="p">(</span><span class="n">channel</span> <span class="o">-</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ENDREG</span>

<span class="n">REG</span>
<span class="mh">0x0102</span> <span class="o">+</span> <span class="mh">0x16</span><span class="o">*</span><span class="n">n</span>
<span class="n">WHERE</span> <span class="n">n</span> <span class="n">IS</span> <span class="n">FROM</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">15</span>
<span class="n">CHAN_CNTRLn_3</span>
<span class="n">DAC</span> <span class="n">Channel</span> <span class="n">Control</span> <span class="o">&amp;</span> <span class="n">Status</span> <span class="p">(</span><span class="n">channel</span> <span class="o">-</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ENDREG</span>
</pre></div>
</div>
<p>And for fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FIELD</span>
<span class="p">[</span><span class="n">n</span><span class="p">]</span>
<span class="n">WHERE</span> <span class="n">n</span> <span class="n">IS</span> <span class="n">FROM</span> <span class="mi">0</span> <span class="n">TO</span> <span class="mi">31</span>
<span class="n">ES_RESETn</span>
<span class="n">RW</span>
<span class="n">Controls</span> <span class="n">the</span> <span class="n">EYESCANRESET</span> <span class="n">pin</span> <span class="n">of</span> <span class="n">the</span> <span class="n">GTH</span><span class="o">/</span><span class="n">GTY</span> <span class="n">transceivers</span> <span class="k">for</span> <span class="n">lane</span> <span class="n">n</span><span class="o">.</span>
<span class="n">ENDFIELD</span>
</pre></div>
</div>
<p>To ease the process of creating a new regmap with imported registers you can
use the generic adc/dac templates that include all available registers:</p>
<ul class="simple">
<li><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/docs/regmap/adi_regmap_common_template.txt" target="_blank">docs/regmap/adi_regmap_common_template.txt</a></p></li>
<li><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/docs/regmap/adi_regmap_axi_adc_template.txt" target="_blank">docs/regmap/adi_regmap_axi_adc_template.txt</a></p></li>
<li><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/docs/regmap/adi_regmap_axi_dac_template.txt" target="_blank">docs/regmap/adi_regmap_axi_dac_template.txt</a></p></li>
</ul>
</section>
</section>
<section id="xilinx">
<h2>Xilinx<a class="headerlink" href="#xilinx" title="Permalink to this heading"></a></h2>
<section id="tcl-file">
<h3>TCL File<a class="headerlink" href="#tcl-file" title="Permalink to this heading"></a></h3>
<p>The tcl file should be named <code class="docutils literal notranslate"><span class="pre">&lt;module_name_ip&gt;.tcl</span></code> (ex: <code class="docutils literal notranslate"><span class="pre">axi_led_control_ip.tcl</span></code>).
Here you should keep the two lines that source our scripts :</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>scripts<span class="o">/</span>adi_env.tcl
<span class="nb">source</span><span class="w"> </span><span class="nv">$ad_hdl_dir</span><span class="o">/</span>library<span class="o">/</span>scripts<span class="o">/</span>adi_ip_xilinx.tcl
</pre></div>
</div>
<p>Then take a look at the commands</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">adi_ip_create</span><span class="w"> </span><span class="o">&lt;</span>module_name<span class="o">&gt;</span>
<span class="nv">adi_ip_files</span><span class="w"> </span><span class="o">&lt;</span>module_name<span class="o">&gt;</span><span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span><span class="o">&lt;</span>other_components<span class="o">&gt;</span><span class="k">]</span>
</pre></div>
</div>
<p>These commands create the IP and add the dependencies for it.
By <code class="docutils literal notranslate"><span class="pre">&lt;other_components&gt;</span></code> we refer to the modules we were talking about above,
that must be included in the tcl file. Also, <code class="docutils literal notranslate"><span class="pre">&lt;other_components&gt;</span></code> must include
the verilog file for the IP itself, named <code class="docutils literal notranslate"><span class="pre">&lt;module_name&gt;.v</span></code>.</p>
<p>If your new IP uses AXI Lite for register control, then the next command is</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">adi_ip_properties</span><span class="w"> </span><span class="o">&lt;</span>module_name<span class="o">&gt;</span>
</pre></div>
</div>
<p>It is used to initialize properties like memory and so on.
If the IP does not use AXI, then you should use</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">adi_ip_properties_lite</span><span class="w"> </span><span class="o">&lt;</span>module_name<span class="o">&gt;</span>
</pre></div>
</div>
<p>At the end of the file donâ€™t forget to save the IP by using this command</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">ipx</span><span class="o">::</span>save_core<span class="w"> </span><span class="k">[</span><span class="nv">ipx</span><span class="o">::</span>currentcore<span class="k">]</span>
</pre></div>
</div>
<p>If you need more help, here is an example of an IP called axi_led_control.
You can open it side by side with the tcl file from the original axi_fan_control
and apply the same logic to make your changes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># ip

source ../scripts/adi_env.tcl
source $ad_hdl_dir/library/scripts/adi_ip_xilinx.tcl

adi_ip_create axi_led_control
adi_ip_files axi_led_control [list \
  &quot;$ad_hdl_dir/library/common/up_axi.v&quot; \
  &quot;axi_led_control.v&quot;]

adi_ip_properties axi_led_control
set cc [ipx::current_core]

ipx::save_core $cc
</pre></div>
</div>
</section>
<section id="makefile">
<h3>Makefile<a class="headerlink" href="#makefile" title="Permalink to this heading"></a></h3>
<p>In this file you will also have to change/add paths to every file in <code class="docutils literal notranslate"><span class="pre">&lt;other_components&gt;</span></code>
list, using GENERIC_DEPS.
Make sure to also change LIBRARY_NAME and XILINX_DEPS to match the name for the new IP.</p>
<p>If you need more help, here is an example of an IP called axi_led_control.
You can open it side by side with the Makefile from the original axi_fan_control
and apply the same logic to make your changes.</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">LIBRARY_NAME</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span>axi_led_control

<span class="nv">GENERIC_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>../common/up_axi.v
<span class="nv">GENERIC_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>axi_led_control.v

<span class="nv">XILINX_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>axi_led_control_ip.tcl

<span class="cp">include ../scripts/library.mk</span>
</pre></div>
</div>
<p>Now you can run the famous <code class="docutils literal notranslate"><span class="pre">make</span></code> in command line from the IP directory.
After that, <code class="docutils literal notranslate"><span class="pre">&lt;module_name&gt;</span></code> will be accessible within vivado for future integrations.</p>
</section>
</section>
<section id="intel">
<h2>Intel<a class="headerlink" href="#intel" title="Permalink to this heading"></a></h2>
<section id="id1">
<h3>TCL File<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>The tcl file should be named &lt;module_name_hw&gt;.tcl (ex: axi_led_control_intel_hw.tcl)
These first 4 lines of code you should keep:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">package</span><span class="w"> </span>require<span class="w"> </span>qsys<span class="w"> </span><span class="mf">14.0</span>
<span class="nb">package</span><span class="w"> </span>require<span class="w"> </span>quartus::device

<span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>scripts<span class="o">/</span>adi_env.tcl
<span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>scripts<span class="o">/</span>adi_ip_intel.tcl
</pre></div>
</div>
<p>After that, the next line creates the new IP:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">ad_ip_create</span><span class="w"> </span><span class="o">&lt;</span>module_name<span class="o">&gt;</span><span class="w"> </span><span class="k">{</span><span class="nv">entity_name</span><span class="k">}</span>.
</pre></div>
</div>
<p>The module_name is the name of the IP you are creating, but entity_name will be
the one visible inside Quartus IP Catalogue.</p>
<p>Next, you must add the other components used for creating the IP.
For this, we will use the ad_ip_files command:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">ad_ip_files</span><span class="w"> </span><span class="o">&lt;</span>module_name<span class="o">&gt;</span><span class="w"> </span><span class="k">[</span><span class="nb">list</span><span class="w"> </span><span class="o">&lt;</span>other_components<span class="o">&gt;</span><span class="k">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;other_components&gt;</span></code> list is referring to any other verilog file imported
or used.
It must also include the verilog file for the IP itself (<code class="docutils literal notranslate"><span class="pre">&lt;module_name&gt;.v</span></code>).</p>
<p>Now letâ€™s add an instance of AXI:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">ad_ip_intf_s_axi</span><span class="w"> </span>s_axi_aclk<span class="w"> </span>s_axi_aresetn<span class="w"> </span><span class="mi">10</span>
</pre></div>
</div>
<p>This command instantiates an interface using axi.
The parameters refer to the ports of the interface, while the number refers to
the width of the data bus.</p>
<p>There should be added an interface for every port of the IP.
In this example, there is only one port left: led_on.
This port is also external, so thatâ€™s what conduit is there for.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">add_interface</span><span class="w"> </span>led_on_if<span class="w"> </span>conduit<span class="w"> </span>end
<span class="nv">add_interface_port</span><span class="w"> </span>led_on_if<span class="w"> </span>led_on<span class="w"> </span>data<span class="w"> </span>Output<span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
<p>The last line is related to the port in the verilog file. In this case, led_on.
The other parameters refer to <code class="docutils literal notranslate"><span class="pre">&lt;signal_type&gt;</span> <span class="pre">&lt;direction&gt;</span> <span class="pre">&lt;width_expression&gt;</span></code>.</p>
<p>In Quartus there is no need to save the core or run make afterwards.
It is smart enough to search for _hw.tcl in the library directory.
Although, you might need to add the path to the new IP in the IP Catalogue.</p>
<p>If you want to see the whole file, here is an example named axi_led_control_intel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>package require qsys 14.0
package require quartus::device

source ../scripts/adi_env.tcl
source ../scripts/adi_ip_intel.tcl

ad_ip_create axi_led_control_intel {AXI LED CONTROL}

ad_ip_files axi_led_control_intel [list \
  $ad_hdl_dir/library/common/up_axi.v \
  axi_led_control_intel.v]

#axi4 subordinate
ad_ip_intf_s_axi s_axi_aclk s_axi_aresetn 10

#output led
add_interface led_on_if conduit end
add_interface_port led_on_if led_on data Output 1
</pre></div>
</div>
</section>
<section id="id2">
<h3>Makefile<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<p>You donâ€™t need to run make for the IP to be visible in the Catalogue.
Yet, here is the Makefile for the example mentioned before:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">LIBRARY_NAME</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span>axi_led_control_intel

<span class="nv">GENERIC_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>../common/up_axi.v
<span class="nv">GENERIC_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>axi_led_control_intel.v


<span class="nv">INTEL_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>axi_led_control_intel_hw.tcl


<span class="cp">include ../scripts/library.mk</span>
</pre></div>
</div>
<p>This example was made starting from the axi_ad9361 IP found in our repo, under the library directory:
<a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/ibrary/axi_ad9361" target="_blank">ibrary/axi_ad9361</a>.</p>
</section>
</section>
<section id="lattice">
<h2>Lattice<a class="headerlink" href="#lattice" title="Permalink to this heading"></a></h2>
<section id="id3">
<h3>TCL File<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<p>The tcl file which creates the IP must be named by the following standard:
<code class="docutils literal notranslate"><span class="pre">&lt;top_module_name&gt;_ltt.tcl</span></code>. We set the <code class="docutils literal notranslate"><span class="pre">LIBRARY_NAME</span> <span class="pre">:=</span> <span class="pre">&lt;top_module_name&gt;</span></code>
in the Makefile and run the tcl script based on that naming standard.</p>
<p>The tcl file must start with two tcl dependencies:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>..<span class="o">/</span>scripts<span class="o">/</span>adi_env.tcl
<span class="nb">source</span><span class="w"> </span><span class="nv">$ad_hdl_dir</span><span class="o">/</span>library<span class="o">/</span>scripts<span class="o">/</span>adi_ip_lattice.tcl
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">adi_env.tcl</span></code> sets some build related and versioning variables, and the
default hdl directory variable. The <code class="docutils literal notranslate"><span class="pre">adi_ip_lattice.tcl</span></code> file contains all the
procedures for creating IPs in the <code class="docutils literal notranslate"><span class="pre">ipl</span></code> namespace. The IP procedures can be
called like: <code class="docutils literal notranslate"><span class="pre">ipl::&lt;procedure_name&gt;</span></code>.</p>
</section>
<section id="namespace-for-lattice-ip-packaging">
<h3>Namespace for Lattice IP packaging<a class="headerlink" href="#namespace-for-lattice-ip-packaging" title="Permalink to this heading"></a></h3>
<p>There are two main parts of procedures and structures in this namespace:</p>
<ol class="arabic simple">
<li><p><strong>IP related procedures and descriptors for users:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$::ipl::ip</span></code> - This describes an IP itself. It is used to set a new IP
instance like: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">ip</span> <span class="pre">$::ipl::ip</span></code>. After the instance is correctly
configured, it is used to generate an actual IP on a specified path.
This instance is updated by every IP related procedure like:
<code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">ip</span> <span class="pre">[&lt;some_ip_procedure&gt;</span> <span class="pre">-ip</span> <span class="pre">$ip]</span></code> except the
<code class="docutils literal notranslate"><span class="pre">ipl::generate_ip</span></code> and <code class="docutils literal notranslate"><span class="pre">ipl::parse_module</span></code>. You will see later on in
example.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::general</span></code> - Sets the IP structure with the specified general IP
parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::parse_module</span></code> - This module is used to parse the data of the IP top
module, itâ€™s input parameter is the file path of the top module and it
returns a structure with the top moduleâ€™s data which is parameter for
other procedures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_ports_from_module</span></code> - It is used to set the IP structure with
the portâ€™s data from the module data which is set by <code class="docutils literal notranslate"><span class="pre">ipl::parse_module</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_memory_map</span></code> - Sets the IP structure with a new memory map,
the name of this memory map must be used for slave memory mapped interface
configuration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_address_space</span></code> - Sets the IP structure with an address space,
the name of this address space must be used for master memory mapped
interface configuration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_axi_interfaces</span></code> - Automatically adds AXI interfaces based on
parsed module data from top module.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_interface</span></code> - Sets the IP structure with an interface instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_interface_by_prefix</span></code> - Sets the IP structure with an interface
by filtering ports by prefix from module data parsed with
<code class="docutils literal notranslate"><span class="pre">ipl::parse_module</span></code> when a naming standard like
<code class="docutils literal notranslate"><span class="pre">&lt;verilog_prefix&gt;_&lt;standard_port_name&gt;</span></code> is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_ip_files</span></code> - Sets the IP structure with IP file dependencies</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::add_ip_files_auto</span></code> - Sets the IP structure with the specified file
dependencies by searching them in the specified <code class="docutils literal notranslate"><span class="pre">-spath</span></code> folder
<code class="docutils literal notranslate"><span class="pre">-sdepth</span></code> deep.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::set_parameter</span></code> - Sets the IP structure with a configuration
parameter which will appear in the IP GUI also.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::ignore_ports</span></code> - Ignores/Hides a list of ports by a Python
expression which usually depends on the value of a Verilog parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::ignore_ports_by_prefix</span></code> - Ignores/Hides ports which are matching
with a specified prefix from the portsâ€™ names in the parsed ports from
the top module, by a Python expression which usually depends on the value of
a Verilog parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::generate_ip</span></code> - Generates the IP on specified path, if no path
parameter then in default IP download directory of Lattice Propel Builder.</p></li>
</ul>
</li>
<li><p><strong>Custom IP interface related descriptors and procedures for users:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$::ipl::if</span></code> - This describes an IP interface structure, it is used to
set a new interface instance like: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">if</span> <span class="pre">$::ipl::if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::create_interface</span></code> - Creates a custom interface.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ipl::generate_interface</span></code> - Generates a custom interface from the
structure set by <code class="docutils literal notranslate"><span class="pre">ipl::create_interface</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
<section id="example-for-creating-an-ip">
<h3>Example for creating an IP<a class="headerlink" href="#example-for-creating-an-ip" title="Permalink to this heading"></a></h3>
<p>The following section is a generic example for creating IPs which is
trying to simulate most of the available options when creating a new IP.</p>
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="d72ff231fd1945980deeb0fec546523011b24c63" name="d72ff231fd1945980deeb0fec546523011b24c63" type="checkbox"></input><label for="d72ff231fd1945980deeb0fec546523011b24c63"><p>Detailed template for the &lt;top_module_name&gt;_ltt.tcl file</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source ../../scripts/adi_env.tcl
source $ad_hdl_dir/library/scripts/adi_ip_lattice.tcl

# Parsing ports and parameters from top module.
# In order to this procedure to work correctly please define your top module
# by following the HDL coding guideline.
set mod_data [ipl::parse_module ./&lt;top_module_name&gt;.v]

# Initializing the IP structure.
set ip $::ipl::ip

# Adding all the ports to the IP from $mod_data.
set ip [ipl::add_ports_from_module -ip $ip -mod_data $mod_data]

# Adding parameters from the $mod_data. This procedure automatically adds
# all the parameters found in top module, but it is useful only if we use
# them as they are and the ordering and grouping of them does not count.
# NOTE: Do not use it if you want to organize the GUI parameters, in that
# case you should add the parameters manually by the following
# ipl::set_parameter procedure.
set ip [ipl::add_parameters_from_module -ip $ip -mod_data $mod_data]

#Getting the name of the top module. &lt;top_module_name&gt;
set mod_name [dict get $mod_data mod_name]

# Setting the general IP parameters.
# There are two optional parameters for this procedure: -max_radiant_version
#                                                       -max_esi_version
set ip [ipl::general \
   -vlnv &quot;analog.com:ip:$mod_name:1.0&quot; \
   -display_name &quot;&lt;Display name of the IP&gt;&quot; \
   -supported_products {*} \
   -supported_platforms {esi radiant} \
   -category &quot;&lt;IP Category&gt;&quot; \
   -keywords &quot;&lt;keywords related to the IP&gt;&quot; \
   -min_radiant_version &quot;2023.2&quot; \
   -min_esi_version &quot;2023.2&quot; \
   -href &quot;&lt;https://example_webpage/ip&gt;&quot; \
   -ip $ip]

# If the IP has AXI interfaces and the naming standard
# &lt;interface_name&gt;_&lt;standard_ip_portname&gt; is used then you can use the
# following procedure to add all the AXI interfaces to the IP.
# The supported interfaces are AXI4, AXI4-Lite and AXI4-Stream.
set ip [ipl::add_axi_interfaces -ip $ip -mod_data $mod_data]

# You can define memory maps for every slave memory mapped interface.
# You must use its name in the following &#39;ipl::add_interface&#39; procedure at
# &#39;-mem_map_ref&#39; option, then the memory map defined here will be used
# for the memory mapped interface we are following to define.
set ip [ipl::add_memory_map -ip $ip \
   -name &quot;&lt;interface_name&gt;_mem_map&quot; \
   -description &quot;&lt;interface description&gt;&quot; \
   -baseAddress 0 \
   -range 65536 \
   -width 32]

# You can add interface manually by defining it with a portmap.
# Make sure that the standard port names match the port names in defined
# interfaces. You must define a &#39;-mem_map_ref&#39; anytime you add a memory mapped
# interface, otherwise the option is not used. If no memory map with that
# reference is created the procedure creates a default memory map
# automatically with the specified &#39;-mem_map_ref&#39;.
set ip [ipl::add_interface -ip $ip \
   -inst_name &lt;interface_name&gt; \
   -display_name &quot;&lt;interface display name&gt;&quot; \
   -description &quot;&lt;interface description&gt;&quot; \
   -master_slave slave \
   -portmap [list {&quot;s_apb_paddr&quot; &quot;PADDR&quot;} \
                  {&quot;s_apb_penable&quot; &quot;PENABLE&quot;} \
                  {&quot;s_apb_prdata&quot; &quot;PRDATA&quot;} \
                  {&quot;s_apb_pready&quot; &quot;PREADY&quot;} \
                  {&quot;s_apb_pselx&quot; &quot;PSELx&quot;} \
                  {&quot;s_apb_pslverr&quot; &quot;PSLVERR&quot;} \
                  {&quot;s_apb_pwdata&quot; &quot;PWDATA&quot;} \
                  {&quot;s_apb_pwrite&quot; &quot;PWRITE&quot;}] \
   -mem_map_ref &lt;interface_name&gt;_mem_map \
   -vlnv {amba.com:AMBA3:APB:r1p0}]
# In most of the cases the containing folder names are describing the vlnv
# for the existing interfaces as in the following example:
# lscc/propel/&lt;tool_version&gt;/builder/rtf/ip/interfaces/amba.com/AMBA3/APB/r1p0

# If you want to update a memory map you can use this anytime.
# The identifier of a memory map is its &#39;-name&#39; which is referred as
# &#39;-mem_map_ref&#39; at ipl::add_interface procedure.
set ip [ipl::add_memory_map -ip $ip \
   -name &quot;&lt;interface_name&gt;_mem_map&quot; \
   -description &quot;&lt;interface description&gt;&quot; \
   -baseAddress 0 \
   -range 65536 \
   -width 32]

# When you add a master memory mapped interface you can define a memory map
# for it. If you do not define it separately it will be created automatically
# when you add the interface and specify the &#39;-addr_space_ref&#39; option
# at ipl::add_interface procedure.
set ip [ipl::add_address_space -ip $ip \
   -name &quot;&lt;interface_name&gt;_aspace&quot; \
   -range 0x100000000 \
   -width 32]

# Example adding a master memory mapped interface.
set ip [ipl::add_interface -ip $ip \
   -inst_name &lt;interface_name&gt; \
   -display_name &quot;&lt;interface display name&gt;&quot; \
   -description &quot;&lt;interface description&gt;&quot; \
   -master_slave master \
   -portmap [list {&quot;s_apb_paddr&quot; &quot;PADDR&quot;} \
                  {&quot;s_apb_penable&quot; &quot;PENABLE&quot;} \
                  {&quot;s_apb_prdata&quot; &quot;PRDATA&quot;} \
                  {&quot;s_apb_pready&quot; &quot;PREADY&quot;} \
                  {&quot;s_apb_pselx&quot; &quot;PSELx&quot;} \
                  {&quot;s_apb_pslverr&quot; &quot;PSLVERR&quot;} \
                  {&quot;s_apb_pwdata&quot; &quot;PWDATA&quot;} \
                  {&quot;s_apb_pwrite&quot; &quot;PWRITE&quot;}] \
   -addr_space_ref &lt;interface_name&gt;_aspace \
   -vlnv {amba.com:AMBA3:APB:r1p0}]

# Example adding parameters to the IP.
# You must use the Verilog parameter name at &#39;-id&#39; option.
# You can check the Lattice Propel IP Packager documentation for parameter
# use cases as Setting Nodes at:
#                https://www.latticesemi.com/view_document?document_id=54003
# The same options in the tables are used here as options for the procedure.
# If you want parameters to appear in the same &lt;Subgoup&gt; in the same &lt;Tabgroup&gt;
# you must add them one after another in the preferred order.
set ip [ipl::set_parameter -ip $ip \
   -id &lt;verilog_parameter&gt; \
   -type param \
   -value_type int \
   -conn_mod &lt;verilog_module_name&gt; \
   -title {&lt;Title&gt;} \
   -options {[(&#39;Option 1&#39;, 0), (&#39;Option 2&#39;, 1), (&#39;Option 3&#39;, 2)]} \
   -editable {(&lt;some_parameter&gt; == 0)} \
   -default 0 \
   -output_formatter nostr \
   -group1 {&lt;Subgoup&gt;} \
   -group2 {&lt;Tabgroup&gt;}]
set ip [ipl::set_parameter -ip $ip \
   -id DATA_WIDTH \
   -type param \
   -value_type int \
   -conn_mod &lt;verilog_module_name&gt; \
   -title {&lt;Title&gt;} \
   -options {[16, 32, 64, 128, 256, 512, 1024, 2048]} \
   -default 64 \
   -output_formatter nostr \
   -group1 {&lt;Subgoup&gt;} \
   -group2 {&lt;Tabgroup&gt;}]
set ip [ipl::set_parameter -ip $ip \
   -id ENABLE \
   -type param \
   -value_type int \
   -conn_mod &lt;verilog_module_name&gt; \
   -title {&lt;Title&gt;} \
   -options {[(True, 1), (False, 0)]} \
   -default 0 \
   -output_formatter nostr \
   -group1 {&lt;Subgoup&gt;} \
   -group2 {&lt;Tabgroup&gt;}]

# Two options to ignore and hide ports in the GUI.
set ip [ipl::ignore_ports_by_prefix -ip $ip \
   -mod_data $mod_data \
   -v_prefix s_apb \
   -expression {(ENABLE == 0)}]
set ip [ipl::ignore_ports -ip $ip \
   -portlist {s_apb_paddr s_apb_pwdata} \
   -expression {(ENABLE == 0)}]

# Defining the rtl file dependencies. The files defined here will be copied
# to &#39;rtl&#39; folder in the generated IP directory. The &#39;rtl&#39; output directory
# must be used for the rtl files.
# For constraint files the &#39;ldc&#39; folder must be used at &#39;-dpath&#39; option.
# The following are the standard directories by purpose:
# eval, plugin, doc, rtl, testbench, driver, ldc.
# You can check the Lattice Propel IP Packager documentation for more
# information at: https://www.latticesemi.com/view_document?document_id=54003
set ip [ipl::add_ip_files -ip $ip -dpath rtl -flist [list \
   &quot;&lt;path&gt;/&lt;dependency0&gt;.v&quot; \
   &quot;&lt;path&gt;/&lt;dependency1&gt;.sv&quot;]

# You can also create your own interfaces.
# The options for ports are the following:
#     -n &lt;logical_name&gt;
#     -d &lt;in/out&gt; #direction
#     -p &lt;required/optional&gt; #presence
#     -w &lt;port_width&gt;
#     -q &lt;clock/reset/data/address&gt; #qualifier #default is data
# We usually put these in a separate script for make, but you can use it here.
set if [ipl::create_interface
   -vlnv {analog.com:ADI:fifo_wr:1.0}
   -directConnection true \
   -isAddressable false \
   -description &quot;ADI fifo wr interface&quot; \
   -ports {
      {-n DATA -d out -p required}
      {-n EN -d out -p required -w 1}
      {-n OVERFLOW -w 1 -p optional -d in}
      {-n SYNC -p optional -w 1 -d out}
      {-n XFER_REQ -p optional -w 1 -d in}
   }]
# This will generate the interface in ./&lt;vendor&gt; directory and in
# the default interface directory of Lattice Propel Builder
# (~/PropelIPLocal/interfaces) if the LATTICE_DEFAULT_PATHS env variable
# is exported like: &#39;export LATTICE_DEFAULT_PATHS=1&#39; before running the
# script or running make.
# You can remove it by deleting the interface folder from this directory.
# You can use a second path parameter to generate it on a specified path.
# For make it is a dedicated file for generating interfaces namely
# &#39;library/interfaces_ltt/interfaces_ltt.tcl&#39; where you can add new
# interfaces and edit the &#39;library/interfaces_ltt/Makefile&#39; to work
# correspondingly.
ipl::generate_interface $if

# You can add it to the IP.
set ip [ipl::add_interface -ip $ip \
-inst_name fifo_wr \
-display_name fifo_wr \
-description fifo_wr \
-master_slave slave \
-portmap { \
   {&quot;fifo_wr_en&quot; &quot;EN&quot;} \
   {&quot;fifo_wr_din&quot; &quot;DATA&quot;} \
   {&quot;fifo_wr_overflow&quot; &quot;OVERFLOW&quot;} \
   {&quot;fifo_wr_xfer_req&quot; &quot;XFER_REQ&quot;} \
} \
-vlnv {analog.com:ADI:fifo_wr:1.0}]

# Generating the IP given as first parameter on the path given as the second
# parameter. Without the second parameter the IP will be generated in
# ./ltt directory and  in the default IP download directory of
# Lattice Propel Builder (~/PropelIPLocal) if the LATTICE_DEFAULT_PATHS
# env variable is exported like:
# &#39;export LATTICE_DEFAULT_PATHS=1&#39; before running the script or running make.
ipl::generate_ip $ip
</pre></div>
</div>
</div>
</div>
</div></section>
<section id="id4">
<h3>Makefile<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<p>In this file you will also have to change/add paths to every file dependency for
the IP, using <code class="docutils literal notranslate"><span class="pre">GENERIC_DEPS</span></code> for generic dependencies, <code class="docutils literal notranslate"><span class="pre">LATTICE_DEPS</span></code> for
Lattice specific file dependencies, <code class="docutils literal notranslate"><span class="pre">LATTICE_INTERFACE_DEPS</span></code> for Lattice
interface dependencies. We set the Lattice interface dependencies when we need
custom interfaces to <code class="docutils literal notranslate"><span class="pre">LATTICE_INTERFACE_DEPS</span> <span class="pre">:=</span> <span class="pre">interfaces_ltt</span></code> where
<code class="docutils literal notranslate"><span class="pre">interfaces_ltt</span></code> means the <code class="docutils literal notranslate"><span class="pre">hdl/library/interfaces_ltt</span></code> directory where the
make script will enter in order to generate the interfaces defined there. If you
want to add a new interface, you can add it to
<code class="docutils literal notranslate"><span class="pre">hdl/library/interfaces_ltt/interfaces_ltt.tcl</span></code> file then update the
<code class="docutils literal notranslate"><span class="pre">hdl/library/interfaces_ltt/Makefile</span></code> correspondingly.
Make sure you set the <code class="docutils literal notranslate"><span class="pre">LIBRARY_NAME</span></code> correctly.</p>
<p>The following is an example for <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">LIBRARY_NAME</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span>&lt;top_module_name&gt;

<span class="nv">GENERIC_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>../common/up_axi.v
<span class="nv">GENERIC_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>&lt;top_module_name&gt;.v

<span class="nv">LATTICE_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>&lt;top_module_name&gt;_ltt.tcl
<span class="nv">LATTICE_INTERFACE_DEPS</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>interfaces_ltt

<span class="cp">include ../scripts/library.mk</span>
</pre></div>
</div>
<p>Now you can run <code class="docutils literal notranslate"><span class="pre">make</span></code> from the IP directory.
After that the IP will be accessible in Lattice Propel Builder.</p>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="index.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">ADI IP cores</a>
    <a href="use_adi_ips.html" title="Next document (Alt+Shift+RightArrow)" class="next">Use ADI IPs into your own project</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>