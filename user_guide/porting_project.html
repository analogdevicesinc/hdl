<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Documentation guidelines" href="docs_guidelines.html" /><link rel="prev" title="User Guide" href="index.html" />

    <link rel="shortcut icon" href="../_static/icon.svg"/><!-- Generated with Sphinx 7.2.2 and Furo 2023.08.17 -->
        <title>Porting ADI’s HDL reference designs - HDL, Analog Devices v0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=6000fc3f" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">HDL, Analog Devices v0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">HDL, Analog Devices v0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User guide</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Porting reference designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_guidelines.html">Documentation guidelines</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../library/spi_engine/index.html">SPI Engine</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of SPI Engine</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/spi_engine_execution.html">Execution Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/axi_spi_engine.html">AXI Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/spi_engine_offload.html">Offload Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/spi_engine_interconnect.html">Interconnect Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/control-interface.html">Control Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/offload-control-interface.html">Offload Control Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/spi-bus-interface.html">SPI Bus Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/instruction-format.html">Instruction Set Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/spi_engine/tutorial.html">Tutorial - PulSAR ADC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library/axi_dmac/index.html">High-Speed DMA Controller</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="porting-adi-s-hdl-reference-designs">
<span id="porting-project"></span><h1>Porting ADI’s HDL reference designs<a class="headerlink" href="#porting-adi-s-hdl-reference-designs" title="Link to this heading">#</a></h1>
<p>In general, a given reference design for an FMC board is deployed to just a few
carriers, although several <a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects/common">FPGA boards</a>
are supported in ADI’s HDL repository. The simple reason behind this practice is
that it would create a tremendous maintenance workload, that would require a lot
of human resources, and would increase the required time for testing. The
general rule of thumb is to support a given project with a fairly popular
carrier (e.g. ZC706 or A10SoC), which is powerful enough to showcase the board
features and maximum performance.</p>
<p>All the HDL projects were designed to maximize source code reuse, minimize
maintainability and simplify portability. The result of these design goals is
that porting a given project to another carrier is fairly simple if the user
respects a couple of guidelines.</p>
<p>The main scope of this wiki page is to discuss these guidelines and provide
simple indications for users who wants to port a project to a non-supported
carrier.</p>
<section id="quick-compatibility-check">
<h2>Quick Compatibility Check<a class="headerlink" href="#quick-compatibility-check" title="Link to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All ADI’s FPGA Mezzanine Cards (FMC) are designed to respect all the
specifications and requirements defined in the ANSI/VITA 57.1 FPGA Mezzanine
Card Standard (if not otherwise stated on board’s wiki page). If the new FPGA
carrier is fully compliant with this standard, there will be no obstacles
preventing the user to port the project to the required carrier card.</p>
</div>
<p>There are two types of FMC connectors: LPC (Low Pin Count) and HPC (High Pin
Count). In general, an FMC board is using the FMC connector type that has enough
pins for the required interfaces between the I/O devices and FPGA. A carrier
with an FMC HPC connector can host FMC boards with an LPC or HPC connector, but
a carrier with an FMC LPC can host a board just with an FMC LPC connector.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>First, always check out the already available <a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects/common">base designs</a>.
If your board is present among our supported base designs, you do not need to
verify the following things and you can jump to the Project creation
section.</p>
</div>
<p>The most important things to check before porting are related to the ANSI/VITA
57.1 standard (the list is not necessarily exhaustive):</p>
<ul class="simple">
<li><p>Power and ground lines - 3P3V/3P3VAUX/12P0V/GND</p></li>
<li><p>VADJ - adjustable voltage level power from the carrier, each board has a
specific requirement for VADJ</p></li>
<li><p>Dedicated pins for clock signals - all the clock dedicated pins should be
connected to a clock capable pin of the FPGA (I/O pin which is capable to
receive and/or transmit a clock signal)</p></li>
<li><p>Dedicated pins for transceiver lines (DPx_[M2C|C2M]_[P|N])</p></li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>To check all the requirements, please refer to the ANSI/VITA 57.1 standard.
The above few hints do not cover all the FMC standards and you
may miss something that can prevent the porting of the project.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Make sure that you have reviewed all the documentation and design files in
order to know the electrical specifications and/or requirements of the
FMC board. If you’re not sure, ask!</p>
</div>
</section>
<section id="base-design-files">
<h2>Base design files<a class="headerlink" href="#base-design-files" title="Link to this heading">#</a></h2>
<p>At <span class="xref std std-ref">architecture</span> it is described a generic base design and possible
components of it. The user should look at it as a suggestion only.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In <a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master//projects/common">/projects/common</a>/&lt;carrier_name&gt;
you can find templates for the <em>system_top.v</em>, <em>Makefile</em>, etc. to help you
when creating a new project.</p>
</div>
<section id="example-with-a-xilinx-board">
<h3>Example with a Xilinx board<a class="headerlink" href="#example-with-a-xilinx-board" title="Link to this heading">#</a></h3>
<p>In this section, we are presenting all the necessary steps to create a base
design for the Xilinx ZCU102 development board.</p>
<p>First, you need to create a new directory in <em>~/projects/common</em> with the name
of the carrier.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>projects/common
mkdir<span class="w"> </span>zcu102
</pre></div>
</div>
<p>The <strong>zcu102</strong> directory must contain the following files:</p>
<ul class="simple">
<li><p><strong>zcu102_system_bd.tcl</strong> - This script describes the base block design</p></li>
<li><p><strong>zcu102_system_constr.xdc</strong> - I/O constraint file for the base design. It
will contain I/O definitions for GPIO, switches, LEDs or other peripherals of
the board</p></li>
<li><p>MIG configuration file (if needed) - This file can be borrowed for the golden
reference design of the board</p></li>
<li><p>Other constraints files if needed</p></li>
</ul>
<p>You should define the board and its device in the project flow script
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects/scripts/adi_project_xilinx.tcl">adi_project_xilinx.tcl</a>
by adding the following lines to the beginning of the <strong>adi_project_create</strong>
process:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="k">[</span><span class="nb">regexp</span><span class="w"> </span><span class="s2">&quot;_zcu102$&quot;</span><span class="w"> </span><span class="nv">$project_name</span><span class="k">]</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>p_device<span class="w"> </span><span class="s2">&quot;xczu9eg-ffvb1156-1-i-es1&quot;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>p_board<span class="w"> </span><span class="s2">&quot;xilinx.com:zcu102:part0:1.2&quot;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>sys_zynq<span class="w"> </span><span class="mi">2</span>
<span class="k">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The valid board parts and parts can be retrieved by running the
following commands in Tcl console: <strong>get_parts</strong> and <strong>get_board_parts</strong>. Run
the commands like <strong>join [get_parts] \n</strong>, so each part name will be listed on
a separate line.</p>
</div>
<p>The <strong>sys_zynq</strong> constant variable should be set in the following way:</p>
<ul class="simple">
<li><p>0 - 7 Series FPGA (e.g. Kintex7, Virtex7)</p></li>
<li><p>1 - Zynq7000 SoC</p></li>
<li><p>2 - Zynq Ultrascale+ SoC</p></li>
</ul>
</section>
<section id="example-with-an-intel-board">
<h3>Example with an Intel board<a class="headerlink" href="#example-with-an-intel-board" title="Link to this heading">#</a></h3>
<p>To create a new base design for a given Intel FPGA carrier board, the following
steps should be taken (the A10SoC carrier was used as an example).</p>
<p>The following files should be created or copied into the directory:</p>
<ul class="simple">
<li><p><strong>a10soc_system_assign.tcl</strong> - global and I/O assignments of the base design</p></li>
<li><p><strong>a10soc_system_qsys.tcl</strong> - the QSYS base design</p></li>
</ul>
<p>You should define the board and its device in the flow script
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects/scripts/adi_project_intel.tcl">adi_project_intel.tcl</a>,
by adding the following lines to the beginning of the <strong>adi_project_altera</strong>
process:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="k">[</span><span class="nb">regexp</span><span class="w"> </span><span class="s2">&quot;_a10soc$&quot;</span><span class="w"> </span><span class="nv">$project_name</span><span class="k">]</span><span class="w"> </span><span class="k">{</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>family<span class="w"> </span><span class="s2">&quot;Arria 10&quot;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span>device<span class="w"> </span><span class="mi">10</span>AS066N3F40E2SG
<span class="w">    </span><span class="k">set</span><span class="w"> </span>system_qip_file<span class="w"> </span>system_bd<span class="o">/</span>system_bd.qip
<span class="k">}</span>
</pre></div>
</div>
</section>
</section>
<section id="project-files">
<h2>Project files<a class="headerlink" href="#project-files" title="Link to this heading">#</a></h2>
<section id="project-files-for-xilinx-boards">
<h3>Project files for Xilinx boards<a class="headerlink" href="#project-files-for-xilinx-boards" title="Link to this heading">#</a></h3>
<p>To follow the project framework as much as possible, the easiest way is to copy
all the projects files from an already existing project and modifying those
files to support the new carrier. A project for a Xilinx FPGA board should
contain the following files:</p>
<ul class="simple">
<li><p><strong>system_project.tcl</strong> - This script is creating the actual Vivado project
and runs the synthesis/implementation of the design. The name of the carrier
from inside the file, must be updated.</p></li>
<li><p><strong>system_bd.tcl</strong> - In this file is sourced the <em>base</em> design’s Tcl script
and the <em>board</em> design’s Tcl script. Again, the name of the carrier must be
updated.</p></li>
<li><p><strong>system_constr.xdc</strong> - Constraint file of the board design. Here are defined
the FMC I/O pins and board specific clock signals. All the I/O definitions
must be updated, with the new pin names.</p></li>
<li><p><strong>system_top.v</strong> - Top wrapper file, in which the system_wrapper.v module is
instantiated, and a few I/O macros are defined. The I/O port of this Verilog
module will be connected to actual I/O pads of the FPGA. The simplest way to
update the <em>system_top</em> is to let the synthesis fail and the tool will tell
you which ports are missing or which ports are redundant. The first thing to
do after the failure is to verify the instantiation of the system_wrapper.v.
This file is a tool generated file and can be found at
<em>&lt;project_name&gt;.srcs/sources_1/bd/system/hdl/system_wrapper.v</em>. Fixing the
instantiation of the wrapper module in most cases eliminates all the errors.
If you get errors that you cannot fix, ask for support.</p></li>
<li><p><strong>Makefile</strong> - This is an auto-generated file, but after updating the carrier
name, should work with the new project without an issue.</p></li>
</ul>
</section>
<section id="project-files-for-intel-boards">
<h3>Project files for Intel boards<a class="headerlink" href="#project-files-for-intel-boards" title="Link to this heading">#</a></h3>
<p>To follow the project framework as much as possible the easiest way is to copy
all the projects file from an already existing project and modifying those files
to support the new carrier. A project for an Intel FPGA board should contain the
following files:</p>
<ul class="simple">
<li><p><strong>system_project.tcl</strong> - This script is creating the actual Quartus project
and runs the synthesis/implementation of the design. It also contains the I/O
definitions for the interfaces between the FMC board and FPGA. The carrier
name and all the I/O pin names inside the file, must be updated.</p></li>
<li><p><strong>system_qsys.tcl</strong> - In this file is sourced the <em>base</em> design’s Tcl script
and the <em>board</em> design’s Tcl script. Again, the name of the carrier must be
updated.</p></li>
<li><p><strong>system_constr.sdc</strong> - Contains clock definitions and other path constraints</p></li>
<li><p><strong>system_top.v</strong> - Top wrapper file of the project. The I/O ports of this
Verilog module will be actual I/O pads of the FPGA. You must make sure that
the base design’s I/Os are updated (delete nonexistent I/Os or add new ones).
The simplest way to update the <em>system_top</em> is to let the synthesis fail and
the tool will you tell which ports are missing or which ports are redundant.</p></li>
<li><p><strong>Makefile</strong> - This is an auto-generated file, but after updating the carrier
name, it should work with the new project without an issue.</p></li>
</ul>
</section>
</section>
<section id="tips">
<h2>Tips<a class="headerlink" href="#tips" title="Link to this heading">#</a></h2>
<section id="generating-the-fmc-i-o-constraints">
<h3>Generating the FMC I/O constraints<a class="headerlink" href="#generating-the-fmc-i-o-constraints" title="Link to this heading">#</a></h3>
<p>The easiest way of writing the constraints for FMC I/O pins is making use of the
script <a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects/scripts/adi_fmc_constr_generator.tcl">adi_fmc_constr_generator.tcl</a>.</p>
<p>Required setup:</p>
<ul class="simple">
<li><p>Carrier common FMC connections file
(<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects/common">projects/common</a>/&lt;carrier&gt;/&lt;carrier&gt;_&lt;fmc_port&gt;.txt)</p></li>
<li><p>Project common FMC connections file
(<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects">projects</a>/&lt;project&gt;/common/&lt;project&gt;_fmc.txt)</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In cases where these files don’t already exist, you can make your own
by following some existing ones as an example.
For project common files, you can easily make them following <a class="reference internal" href="#creating-fmc"><span class="std std-ref">Creating carrier common FMC connections</span></a>.</p>
</div>
<p>Calling the script:</p>
<p>To use this script you can source it in any tcl shell or simply call the
adi_fmc_constr_generator.tcl with argument(s) &lt;fmc_port&gt;. But before sourcing or
calling it, your current directory needs to be
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects">projects</a>/&lt;project&gt;/&lt;carrier&gt;</p>
<p>For example:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">tclsh</span> <span class="pre">../../scripts/adi_fmc_constr_generator.tcl</span> <span class="pre">fmc0</span></code>
(the project uses only one FMC port at a time)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">tclsh</span> <span class="pre">../../scripts/adi_fmc_constr_generator.tcl</span> <span class="pre">fmc0</span> <span class="pre">fmc1</span></code>
(the project uses two FMC ports at a time)</p></li>
</ul>
<p>If sourced without argument(s) then you can simply call gen_fmc_constr
&lt;fmc_port&gt;.</p>
<p>For example:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">gen_fmc_constr</span> <span class="pre">fmc0</span></code> (the project uses only one FMC port at a time)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">gen_fmc_constr</span> <span class="pre">fmc0</span> <span class="pre">fmc1</span></code> (the project uses two FMC ports at a time)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The fmc port name can be deduced from the common carrier file name
(<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects/common">projects/common</a>/&lt;carrier&gt;/&lt;carrier&gt;_&lt;fmc_port&gt;.txt).</p>
</div>
<p>The generated file will appear in the current directory as <strong>fmc_constr.xdc</strong>
(Xilinx board) or <strong>fmc_constr.tcl</strong> (Intel board). If ran from an open Vivado
project, the generated file will be automatically added to the project.</p>
<section id="creating-carrier-common-fmc-connections">
<span id="creating-fmc"></span><h4>Creating carrier common FMC connections<a class="headerlink" href="#creating-carrier-common-fmc-connections" title="Link to this heading">#</a></h4>
<p>To create a carrier common FMC connections file:</p>
<ol class="arabic simple">
<li><p>Open the space divided .txt file corresponding to the desired connector type,
either with a text editor or importing in a spreadsheet editor
(with Excel, export as .prn).
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/docs/user_guide/sources/fmc.txt">fmc.txt</a>,
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/docs/user_guide/sources/fmc_hpc.txt">fmc_hpc.txt</a>,
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/docs/user_guide/sources/fmc+.txt">fmc+.txt</a>.</p></li>
<li><p>Fill the table by replacing the <strong>#</strong>’s where it’s needed.</p></li>
<li><p>Save as .txt inside <a class="reference external" href="https://github.com/analogdevicesinc/hdl/blob/master/projects">projects</a>/&lt;project_name&gt;/common/.</p></li>
<li><p>Clean up the file by removing the lines containing <strong>#</strong> for system_top_name.</p></li>
<li><p>Rearrange the lines following one of the existing examples.</p></li>
<li><p>To generate empty lines, leave an empty line in the .txt file.
To generate comments, the line should start with <strong>#</strong> sign.</p></li>
<li><p>Run the script as <code class="code docutils literal notranslate"><span class="pre">tclsh</span> <span class="pre">/path/to/script</span> <span class="pre">{fmc_conn}</span></code>
(e.g. <code class="code docutils literal notranslate"><span class="pre">tclsh</span> <span class="pre">../../scripts/adi_fmc_constr_generator.tcl</span> <span class="pre">fmc0</span></code>).</p>
<ul class="simple">
<li><p>Current directory needs to be hdl/projects/&lt;project_name&gt;/&lt;carrier&gt;.</p></li>
<li><p>If used from an open project, the generated file would be added to the project;
otherwise it will appear in the current directory.</p></li>
<li><p>If the carrier has only one FMC port, the script can be called without parameters.</p></li>
<li><p>If the carrier has more FMC ports, the script should be called with:</p>
<ul>
<li><p>One parameter indicating the FMC port: fmc_lpc/hpc, fmc0/1, fmcp0/1
(see projects/common/&lt;carrier&gt;/*.txt).</p></li>
<li><p>Two parameters indicating both FMC ports in the desired order for projects
that use both FMC connectors.</p></li>
</ul>
</li>
</ul>
</li>
</ol>
</section>
</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="docs_guidelines.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Documentation guidelines</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">User Guide</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Analog Devices Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Porting ADI’s HDL reference designs</a><ul>
<li><a class="reference internal" href="#quick-compatibility-check">Quick Compatibility Check</a></li>
<li><a class="reference internal" href="#base-design-files">Base design files</a><ul>
<li><a class="reference internal" href="#example-with-a-xilinx-board">Example with a Xilinx board</a></li>
<li><a class="reference internal" href="#example-with-an-intel-board">Example with an Intel board</a></li>
</ul>
</li>
<li><a class="reference internal" href="#project-files">Project files</a><ul>
<li><a class="reference internal" href="#project-files-for-xilinx-boards">Project files for Xilinx boards</a></li>
<li><a class="reference internal" href="#project-files-for-intel-boards">Project files for Intel boards</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tips">Tips</a><ul>
<li><a class="reference internal" href="#generating-the-fmc-i-o-constraints">Generating the FMC I/O constraints</a><ul>
<li><a class="reference internal" href="#creating-carrier-common-fmc-connections">Creating carrier common FMC connections</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=34cd777e"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    </body>
</html>