<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Build a HDL project &#8212; HDL  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../_static/style.min.css?v=a3ba2641" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <script defer="" src="../_static/app.umd.js?v=7b10be7e"></script>
    <link rel="icon" href="../_static/icon.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="HDL Architecture" href="architecture.html" />
    <link rel="prev" title="Releases" href="releases.html" />
   
  
    <meta name="robots" content="noindex">
  
  <meta name="repo" content="hdl">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <div class="banner"></div>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../index.html">
          <div>HDL</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../documentation/university/index.html">University Program</a>
  <a href="../index.html" class="current">HDL</a>
  <a href="../../no-OS/index.html">no-OS</a>
  <a href="../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../doctools/index.html">Doctools</a>
  <a href="../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Build a HDL project</a><ul>
<li><a class="reference internal" href="#setup-and-check-your-environment">Setup and check your environment</a></li>
<li><a class="reference internal" href="#setup-the-hdl-repository">Setup the HDL repository</a></li>
<li><a class="reference internal" href="#building-the-projects">Building the projects</a><ul>
<li><a class="reference internal" href="#building-an-intel-project">Building an Intel project</a><ul>
<li><a class="reference internal" href="#checking-the-build-and-analyzing-results">Checking the build and analyzing results</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-an-amd-project">Building an AMD project</a><ul>
<li><a class="reference internal" href="#enabling-out-of-context-synthesis">Enabling Out-of-Context synthesis</a></li>
<li><a class="reference internal" href="#checking-the-build-and-analyzing-results-of-library-components">Checking the build and analyzing results of library components</a></li>
<li><a class="reference internal" href="#checking-the-build-and-analyzing-results-of-projects">Checking the build and analyzing results of projects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-a-lattice-project">Building a Lattice project</a><ul>
<li><a class="reference internal" href="#required-lattice-provided-ips-to-download-for-projects-common-lfcpnx">Required Lattice Provided IPs to download for projects/common/lfcpnx</a></li>
<li><a class="reference internal" href="#id1">Checking the build and analyzing results</a></li>
</ul>
</li>
<li><a class="reference internal" href="#supported-targets-of-make-command">Supported targets of <code class="docutils literal notranslate"><span class="pre">make</span></code> command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tools-and-their-versions">Tools and their versions</a><ul>
<li><a class="reference internal" href="#tools">Tools</a></li>
<li><a class="reference internal" href="#tool-versions">Tool versions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment">Environment</a><ul>
<li><a class="reference internal" href="#linux-environment-setup">Linux environment setup</a></li>
<li><a class="reference internal" href="#windows-environment-setup">Windows environment setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preparing-the-sd-card">Preparing the SD card</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#errors-warnings-and-notes">Errors, Warnings and Notes</a><ul>
<li><a class="reference internal" href="#amd-vivado">AMD: Vivado</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="logo" href="../index.html">
      <img class="only-light" src="../_static/HDL_logo_cropped.svg"/>
      <img class="only-dark" src="../_static/HDL_logo_w_cropped.svg"/>
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../documentation/eval/index.html">Evaluation Boards</a>
  <a href="../../documentation/university/index.html">University Program</a>
  <a href="../index.html" class="current">HDL</a>
  <a href="../../no-OS/index.html">no-OS</a>
  <a href="../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../doctools/index.html">Doctools</a>
  <a href="../../PrecisionToolbox/index.html">Precision Toolbox</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="index.html">User Guide</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_repository.html">Git repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html">Releases</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build a HDL project</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">HDL architecture</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-1" id="toctree-collapse-1-1"/><div class="collapse"><a class="reference internal" href="ip_cores/index.html">IP cores</a><label for="toctree-collapse-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="ip_cores/creating_new_ip.html">Creating a new IP</a></li>
<li class="toctree-l3"><a class="reference internal" href="ip_cores/use_adi_ips.html">Use ADI IPs into your own project</a></li>
<li class="toctree-l3"><a class="reference internal" href="ip_cores/interfaces.html">Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="ip_cores/axi_adc/index.html">Generic AXI ADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="ip_cores/axi_dac/index.html">Generic AXI DAC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="porting_project.html">Porting reference designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="customize_hdl.html">Customize HDL projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdl_coding_guidelines.html">HDL coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs_guidelines.html">Documentation guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing to HDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="third_party.html">Third party forks</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../library/index.html">IP Cores</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../library/i3c_controller/index.html">I3C Controller</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/i3c_controller/i3c_controller_host_interface.html">Host Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/i3c_controller/i3c_controller_core.html">Core Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/i3c_controller/interface.html">Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-2" id="toctree-collapse-2-2"/><div class="collapse"><a class="reference internal" href="../library/jesd204/index.html">JESD204 Interface Framework</a><label for="toctree-collapse-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/jesd204/axi_jesd204_tx/index.html">JESD204B/C Link Transmit Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/jesd204/axi_jesd204_rx/index.html">JESD204B/C Link Receive Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/jesd204/ad_ip_jesd204_tpl_adc/index.html">ADC JESD204B/C Transport Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/jesd204/ad_ip_jesd204_tpl_dac/index.html">DAC JESD204B/C Transport Peripheral</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3" id="toctree-collapse-2-3"/><div class="collapse"><a class="reference internal" href="../library/spi_engine/index.html">SPI Engine</a><label for="toctree-collapse-2-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/spi_engine_execution.html">Execution Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/axi_spi_engine.html">AXI Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/spi_engine_offload.html">Offload Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/spi_engine_interconnect.html">Interconnect Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/control-interface.html">Control Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/offload-control-interface.html">Offload Control Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/spi-bus-interface.html">SPI Bus Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/instruction-format.html">Instruction Set Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/pipeline-delays.html">Pipeline Delays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library/spi_engine/tutorial.html">Tutorial - PulSAR ADC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad3552r/index.html">AXI AD3552R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad7606x/index.html">AXI AD7606x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad7616/index.html">AXI AD7616</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad7768/index.html">AXI AD7768</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad777x/index.html">AXI AD777x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad9265/index.html">AXI AD9265</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad9361/index.html">AXI AD9361</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad9467/index.html">AXI AD9467</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad9671/index.html">AXI AD9671</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad9783/index.html">AXI AD9783</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_ad9963/index.html">AXI AD9963</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_adaq8092/index.html">AXI ADAQ8092</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/data_offload/index.html">Data Offload</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_dmac/index.html">AXI DMAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_hdmi_tx/index.html">AXI HDMI TX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_hdmi_rx/index.html">AXI HDMI RX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_adc_decimate/index.html">AXI ADC Decimate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_adc_trigger/index.html">AXI ADC Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_adxcvr/index.html">AXI ADXCVR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_clkgen/index.html">AXI CLK Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_dac_interpolate/index.html">AXI DAC Interpolate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_fan_control/index.html">AXI Fan Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_laser_driver/index.html">AXI Laser Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_logic_analyzer/index.html">AXI Logic Analyzer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_pwm_gen/index.html">AXI PWM Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_sysid/index.html">AXI System ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/axi_tdd/index.html">AXI TDD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/common/ad_dds/index.html">AD Direct Digital Synthesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_axis_fifo/index.html">AXI Stream FIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_axis_fifo_asym/index.html">Asymmetric AXI Stream FIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_extract/index.html">Util Extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_mii_to_rmii/index.html">Util MII to RMII</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_pack/util_cpack2.html">Channel CPACK Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_pack/util_upack2.html">Channel UPACK Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_rfifo/index.html">Util RFIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_var_fifo/index.html">Util VAR FIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/util_wfifo/index.html">Util WFIFO</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-4" id="toctree-collapse-2-4"/><div class="collapse"><a class="reference internal" href="../library/xilinx/index.html">AMD Xilinx Specific IPs</a><label for="toctree-collapse-2-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../library/xilinx/util_adxcvr/index.html">UTIL_ADXCVR</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../projects/index.html">Projects</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad4134_fmc/index.html">AD4134-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad4630_fmc/index.html">AD4630-FMC/AD4030-FMC/ADAQ4224-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad469x_fmc/index.html">AD469X-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad5766_sdz/index.html">AD5766-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7134_fmc/index.html">AD7134-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad719x_asdz/index.html">AD719X-ASDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad738x_fmc/index.html">AD738X-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7606x_fmc/index.html">AD7606X-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7616_sdz/index.html">AD7616-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad7768evb/index.html">AD7768-EVB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad9081_fmca_ebz/index.html">AD9081/AD9082/AD9986/AD9988</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad9434_fmc/index.html">AD9434-FMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ad9783_ebz/index.html">AD9783-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adaq7980_sdz/index.html">ADAQ7980-SDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adrv9026/index.html">ADRV9026</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/adrv904x/index.html">ADRV904x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/cn0363/index.html">CN0363</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/cn0540/index.html">CN0540</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/cn0561/index.html">CN0561</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/cn0585/index.html">CN0585</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/pulsar_adc/index.html">PULSAR-ADC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/pulsar_lvds/index.html">PULSAR-LVDS</a></li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="build-a-hdl-project">
<span id="build-hdl"></span><h1>Build a HDL project<a class="headerlink" href="#build-a-hdl-project" title="Permalink to this heading">#</a></h1>
<p><strong>Please note that ADI only provides the source files necessary to create
and build the designs. This means that you are responsible for modifying
and building these projects.</strong></p>
<p>Here, we are giving you a quick rundown on how we build things. That said,
the steps below are <strong>not a recommendation</strong>, but a suggestion.
How you want to build these projects is entirely up to you.
The only catch is that if you run into problems, you have to resolve them independently.</p>
<p>The build process depends on certain software and tools, which you could use in many ways.
We use <strong>command line</strong> and mostly <strong>Linux systems</strong>. On Windows, we use <strong>Cygwin</strong>.</p>
<section id="setup-and-check-your-environment">
<h2>Setup and check your environment<a class="headerlink" href="#setup-and-check-your-environment" title="Permalink to this heading">#</a></h2>
<p>This section contains a guide about how to setup your environment to build any
HDL project from the repository:</p>
<ol class="arabic simple">
<li><p>Install the required FPGA design suite. We use <a class="reference external" href="https://www.xilinx.com/support/download.html">AMD Xilinx Vivado</a>,
<a class="reference external" href="https://www.intel.com/content/www/us/en/products/details/fpga/development-tools/quartus-prime/resource.html">Intel Quartus Prime Pro and Standard</a>, <a class="reference external" href="https://www.latticesemi.com/Products/DesignSoftwareAndIP/FPGAandLDS/Radiant">Lattice Radiant</a> and
<a class="reference external" href="https://www.latticesemi.com/Products/DesignSoftwareAndIP/FPGAandLDS/LatticePropel">Lattice Propel</a>.
You can find information about the proper version in our
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/releases">release notes</a>.
Make sure that you’re always using the latest release.</p></li>
<li><p>The proper Vivado/Quartus/Propel/Radiant version can be found in:</p>
<ul class="simple">
<li><p>Starting with <code class="docutils literal notranslate"><span class="pre">hdl_2021_r1</span></code> release branch:
<a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/blob/main/scripts/adi_env.tcl">scripts/adi_env.tcl</a></p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">hdl_2019_r2</span></code> and older:
<a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/blob/hdl_2019_r2/projects/scripts/adi_project_xilinx.tcl">hdl/projects/scripts/adi_project_xilinx.tcl</a> for Vivado, and
<a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/blob/hdl_2019_r2/projects/scripts/adi_project_intel.tcl">hdl/projects/scripts/adi_project_intel.tcl</a> for Quartus.</p></li>
</ul>
</li>
<li><p>Download the tools from the following links:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.xilinx.com/support/download.html">AMD tools</a> (make sure you’re
downloading the proper installer. For full installation, it is
better to choose the one that downloads and installs both Vivado
and Vitis at the same time)</p></li>
<li><p><a class="reference external" href="https://www.intel.com/content/www/us/en/programmable/downloads/download-center.html">Intel
tools</a></p></li>
<li><p><a class="reference external" href="https://www.latticesemi.com/en/Products/DesignSoftwareAndIP">Lattice
tools</a></p></li>
</ul>
</li>
<li><p>After you have installed the above-mentioned tools, you will need the
paths to those directories in the following steps, so have them in a
note.</p></li>
<li><p>We are using <a class="reference external" href="https://git-scm.com/">git</a> for version control and
<a class="reference external" href="https://www.gnu.org/software/make/">GNU Make</a> to build the
projects. Depending on what OS you’re using, you have these options:</p></li>
</ol>
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="d79b51c5e3fe7737294e831d24a8aadaafdad7b7" name="d79b51c5e3fe7737294e831d24a8aadaafdad7b7" type="checkbox"></input><label for="d79b51c5e3fe7737294e831d24a8aadaafdad7b7"><p>For Windows environment with Cygwin</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<p>Because GNU Make is not supported on Windows, you need to install
<a class="reference external" href="https://www.cygwin.com/">Cygwin</a>, which is a UNIX-like environment
and command-line interface for Microsoft Windows. You do not need to
install any special package, other than <code class="docutils literal notranslate"><span class="pre">git</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p>
<p>After you have installed Cygwin, you need to add your FPGA Design Tools
installation directory to your PATH environment variable. You can do
that by modifying your <strong>.bashrc</strong> file, by adding the following lines
(<strong>changed accordingly to your installation directories</strong>). For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vivado/202x.x/bin
<span class="linenos">2</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vivado_HLS/202x.x/bin
<span class="linenos">3</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vitis/202x.x/bin
<span class="linenos">4</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vitis/202x.x/gnu/microblaze/nt/bin
<span class="linenos">5</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vitis/202x.x/gnu/arm/nt/bin
<span class="linenos">6</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vitis/202x.x/gnu/microblaze/linux_toolchain/nt64_be/bin
<span class="linenos">7</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vitis/202x.x/gnu/microblaze/linux_toolchain/nt64_le/bin
<span class="linenos">8</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/Xilinx/Vitis/202x.x/gnu/aarch32/nt/gcc-arm-none-eabi/bin
<span class="linenos">9</span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/path_to/intelFPGA_pro/2x.x/quartus/bin
</pre></div>
</div>
<p>Replace the <strong>path_to</strong> string with your path to the installation folder
and the <strong>tools version</strong> with the proper one.</p>
</div>
</div>
</div><div><div class="collapsible docutils container">
<input class="collapsible_input" id="356312f27f93c34c68e2934fbceb78d39ba711a0" name="356312f27f93c34c68e2934fbceb78d39ba711a0" type="checkbox"></input><label for="356312f27f93c34c68e2934fbceb78d39ba711a0"><p>How to verify your environment setup</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<p>Run any of the following commands. These commands will return a valid path
if your setup is good.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>~<span class="o">]</span><span class="w"> </span>which<span class="w"> </span>git
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span>which<span class="w"> </span>make
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span>which<span class="w"> </span>vivado
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span>which<span class="w"> </span>quartus
</pre></div>
</div>
</div>
</div>
</div></section>
<section id="setup-the-hdl-repository">
<h2>Setup the HDL repository<a class="headerlink" href="#setup-the-hdl-repository" title="Permalink to this heading">#</a></h2>
<p>These designs are built upon ADI’s generic HDL reference designs framework.
ADI does not distribute the bit/elf files of these projects so they
must be built from the sources available <a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/blob/main/">here</a>. To get
the source you must
<a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository">clone</a>
the repository. This is the best method to get the sources. Here, we are
cloning the repository inside a directory called <strong>adi</strong>. Please refer
to the <a class="reference internal" href="git_repository.html#git-repository"><span class="std std-ref">HDL Git repository</span></a> section for more details.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>~<span class="o">]</span><span class="w"> </span>mkdir<span class="w"> </span>adi
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>adi
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:analogdevicesinc/hdl.git
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Cloning the HDL repository is done now using SSH, because of
GitHub security reasons. Check out this documentation on <a class="reference external" href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">how to deal
with SSH keys in
GitHub</a>.
Both for <a class="reference external" href="https://www.cygwin.com/">Cygwin</a> and
<a class="reference external" href="https://learn.microsoft.com/en-us/windows/wsl/install/">WSL</a> it is
necessary to create a unique SSH key. If you use WSL,to get the best
performance, you must clone your hdl repository in the WSL file system.
For example: (<code class="code docutils literal notranslate"><span class="pre">\\wsl.localhost\Ubuntu\home\username\hdl</span></code>)</p>
</div>
<p>The above command clones the <strong>default</strong> branch, which is the <strong>main</strong> for
HDL. The <strong>main</strong> branch always points to the latest stable release
branch, but it also has features <strong>that are not fully tested</strong>. If you
want to switch to any other branch you need to checkout that branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>~<span class="o">]</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>hdl/
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span>git<span class="w"> </span>status
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>hdl_2021_r2
</pre></div>
</div>
<p>If this is your first time cloning, you have all the latest source
files. If not, you can simply pull the latest sources
using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code> if you have local changes.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>~<span class="o">]</span><span class="w"> </span>git<span class="w"> </span>fetch<span class="w"> </span>origin<span class="w">               </span><span class="c1"># this shows you what changes will be pulled on your local copy</span>
<span class="o">[</span>~<span class="o">]</span><span class="w"> </span>git<span class="w"> </span>rebase<span class="w"> </span>origin/hdl_2021_r2<span class="w">  </span><span class="c1"># this updates your local copy</span>
</pre></div>
</div>
</section>
<section id="building-the-projects">
<h2>Building the projects<a class="headerlink" href="#building-the-projects" title="Permalink to this heading">#</a></h2>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Before building any project, you must have the environment prepared and the
proper tools. See <a class="reference internal" href="#tools">Tools</a> section on what you need to download and
<a class="reference internal" href="#environment">Environment</a> section on how to set-up your environment.</p>
</div>
<p>Simply put, to build a project you just run <code class="docutils literal notranslate"><span class="pre">make</span></code> in your Linux terminal
or in Cygwin. For more details, please read the rest of the documentation.</p>
<p>To clean only the project or a specific library before building it again,
run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code>.
To clean both the built libraries which the project depends on and the project,
run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean-all</span></code>.</p>
<section id="building-an-intel-project">
<h3>Building an Intel project<a class="headerlink" href="#building-an-intel-project" title="Permalink to this heading">#</a></h3>
<p>An Intel project build is relatively easy. There is no need to build any
library components. Go to the directory of the project of interest,
then inside the desired carrier run <code class="docutils literal notranslate"><span class="pre">make</span></code> to build
the project. In this example, I am only interested in the
<strong>ADRV9371X</strong> project on the <strong>A10SOC</strong> carrier.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>projects/adrv9371x/a10soc
make
</pre></div>
</div>
<p>This assumes that you have the tools and licenses setup correctly. If
you don’t get to the last line, the make failed to build the project.
There is nothing you can gather from the <code class="docutils literal notranslate"><span class="pre">make</span></code> output (other than the
build failed or not), the actual failure is in a log file. So, let’s see
how to analyze the build log files and results.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to use a NIOS-II based project with no-OS
software, you have to turn off the MMU feature of the NIOS_II processor.
In that case, the make will get an additional attribute:
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">NIOS2_MMU=0</span></code></p>
</div>
<section id="checking-the-build-and-analyzing-results">
<h4>Checking the build and analyzing results<a class="headerlink" href="#checking-the-build-and-analyzing-results" title="Permalink to this heading">#</a></h4>
<p>If you look closely at the <strong>rule</strong> for this target, you see it is just
calling <code class="docutils literal notranslate"><span class="pre">quartus_sh</span></code> with the project TCL file and redirecting the
output to a log file. In this case it is called <strong>adrv9371_a10soc_quartus.log</strong>
and is inside the <strong>projects/adrv9371x/a10soc</strong> directory.</p>
<p>Do a quick (or detailed) check on files. If you are seeking support from us,
this contains the most relevant information that you need to provide.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do NOT copy-paste <code class="docutils literal notranslate"><span class="pre">make</span></code> command line text</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-ltr<span class="w"> </span>projects/adrv9371x/a10soc
tail<span class="w"> </span>projects/adrv9371x/a10soc/adrv9371x_a10soc_quartus.log
</pre></div>
</div>
<p>And finally, if the project was built is successfully, the <strong>.sopcinfo</strong> and
<strong>.sof</strong> files should be in the same folder.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-ltr<span class="w"> </span>projects/adrv9371x/a10soc/*.sopcinfo
ls<span class="w"> </span>-ltr<span class="w"> </span>projects/adrv9371x/a10soc/*.sof
</pre></div>
</div>
<p>You may now use this <strong>sopcinfo</strong> file as the input to your no-OS and/or
Linux build. The <strong>sof</strong> file is used to program the device.</p>
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="d6277e09b937f5703b1c39f22652810d9004262d" name="d6277e09b937f5703b1c39f22652810d9004262d" type="checkbox"></input><label for="d6277e09b937f5703b1c39f22652810d9004262d"><p>Building an Intel project in WSL - known issues</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<p>For a10Soc and s10Soc projects it’s very possible to face the following
error when you try to build the project:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Current module quartus_fit was
unexpectedly terminated by signal 9. This may be because some system
resource has been exhausted, or quartus_fit performed an illegal
operation.</p>
</div>
<p>It can also happen that <code class="docutils literal notranslate"><span class="pre">make</span></code> gets stuck when
synthesizing some IPs. These errors may appear because your device does
not have enough RAM memory to build your FPGA design. This problem can
be solved if you create a Linux Swap file.</p>
<p>You can find more information about what a swap file is at this link:
<a class="reference external" href="https://linuxize.com/post/create-a-linux-swap-file/">SwapFile</a>.</p>
<p>Depending on the size of the project, more or less virtual memory must
be allocated. If you type in the search bar <strong>System Information</strong>, you
can see Total Physical Memory and Total Virtual Memory of your system.
For example, for the AD9213 with S10SoC project, it was necessary to
allocate 15 GB of virtual memory, to be able to make a build for the
project. To create a swap file you can use the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>:~$<span class="w"> </span>sudo<span class="w"> </span>fallocate<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;memory size (e.g 1G, 2G, 8G, etc.)&quot;</span><span class="w"> </span>/swapfile
:~$<span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/swapfile
:~$<span class="w"> </span>sudo<span class="w"> </span>mkswap<span class="w"> </span>/swapfile
:~$<span class="w"> </span>sudo<span class="w"> </span>swapon<span class="w"> </span>/swapfile
</pre></div>
</div>
<p>If you want to make the change permanent:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># in /etc/fstab file type the command:</span>
/swapfile<span class="w"> </span>swap<span class="w"> </span>swap<span class="w"> </span>defaults<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p>If you want to deactivate the swap memory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>:~$<span class="w"> </span>sudo<span class="w"> </span>swapoff<span class="w"> </span>-v<span class="w"> </span>/swapfile
</pre></div>
</div>
</div>
</div>
</div><div><div class="collapsible docutils container">
<input class="collapsible_input" id="f664ff2c072ab69ccfeadd6d0ab4475e09ceaed6" name="f664ff2c072ab69ccfeadd6d0ab4475e09ceaed6" type="checkbox"></input><label for="f664ff2c072ab69ccfeadd6d0ab4475e09ceaed6"><p>Building manually in Quartus GUI</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We do not recommend using this flow, in general people are losing a lot
of valuable time and nerve during this process.</p>
</div>
<p>There is no need to build any library for Quartus. However, you do need
to specify the IP search path for QSYS. This is a global property, so
only need to do it once. If you have multiple paths simply add to it.
You get to this menu from the <strong>Tools-&gt;Options</strong>. The tool then parses
these directories and picks up a <strong>_hw.tcl</strong> file (e.g.
<strong>axi_ad9250_hw.tcl</strong>). The peripherals should show up on QSYS library.</p>
<p>You may now run the project (generate the sof and software hand-off
files) on Quartus. Open the GUI and select TCL console. At the prompt
change the directory to where the project is, and source the
<strong>system_project.tcl</strong> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>c:/github/hdl/projects/daq2/a10soc
<span class="nb">source</span><span class="w"> </span>./system_project.tcl
</pre></div>
</div>
<p>You will see commands being executed, the script uses a board design in
QSYS, generate all the IP targets, synthesize the netlist and
implementation.</p>
</div>
</div>
</div></section>
</section>
<section id="building-an-amd-project">
<h3>Building an AMD project<a class="headerlink" href="#building-an-amd-project" title="Permalink to this heading">#</a></h3>
<p>An AMD project is built the same way as an Intel project. The only
exception is that there are a few ‘sub-make(s)’ for the library
components. The way of building a project in Cygwin and WSL is almost the same.
In this example, it is building the <strong>DAQ2</strong>
project on the <strong>ZC706</strong> carrier.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>projects/daq2/zc706
make
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">make</span></code> builds all the libraries first and then builds the project.
This assumes that you have the tools and licenses setup correctly. If
you don’t get to the last line, the make failed to build one or more
targets: it could be a library component or the project itself. There is
nothing you can gather from the <code class="docutils literal notranslate"><span class="pre">make</span></code> output (other than which one
failed). The actual information about the failure is in a log file inside
the project directory.</p>
<p>On projects which support this, some <code class="docutils literal notranslate"><span class="pre">make</span></code> parameters can be added, to
configure the project (you can check the <strong>system_project.tcl</strong> file
to see if your project supports this).</p>
<p>If parameters were used, the result of the build will be in a folder named
by the configuration used. Here are some examples:</p>
<p><strong>Example 1</strong></p>
<p>Running the command below will create a folder named
<strong>RXRATE2_5_TXRATE2_5_RXL8_RXM4_RXS1_RXNP16_TXL8_TXM4_TXS1_TXNP16</strong>
because of truncation of some keywords so the name will not exceed the limits
of the Operating System (<strong>JESD</strong>, <strong>LANE</strong>, etc. are removed) of 260
characters.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">RX_LANE_RATE</span><span class="o">=</span><span class="m">2</span>.5<span class="w"> </span><span class="nv">TX_LANE_RATE</span><span class="o">=</span><span class="m">2</span>.5<span class="w"> </span><span class="nv">RX_JESD_L</span><span class="o">=</span><span class="m">8</span><span class="w"> </span><span class="nv">RX_JESD_M</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="nv">RX_JESD_S</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">RX_JESD_NP</span><span class="o">=</span><span class="m">16</span><span class="w"> </span><span class="nv">TX_JESD_L</span><span class="o">=</span><span class="m">8</span><span class="w"> </span><span class="nv">TX_JESD_M</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="nv">TX_JESD_S</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">TX_JESD_NP</span><span class="o">=</span><span class="m">16</span>
</pre></div>
</div>
<p><strong>Example 2</strong></p>
<p>Running the command below will create a folder named <strong>LVDSCMOSN1</strong>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">LVDS_CMOS_N</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<section id="enabling-out-of-context-synthesis">
<h4>Enabling Out-of-Context synthesis<a class="headerlink" href="#enabling-out-of-context-synthesis" title="Permalink to this heading">#</a></h4>
<p>You can opt in for out-of-context synthesis during the build by defining
the <code class="docutils literal notranslate"><span class="pre">ADI_USE_OOC_SYNTHESIS</span></code> system variable. By setting the
<code class="docutils literal notranslate"><span class="pre">ADI_MAX_OOC_JOBS</span></code> system variable you can adjust the number of
maximum parallel out-of-context synthesis jobs. If not set, the default
parallel job number is set to 4.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ADI_USE_OOC_SYNTHESIS</span><span class="o">=</span>y
<span class="nb">export</span><span class="w"> </span><span class="nv">ADI_MAX_OOC_JOBS</span><span class="o">=</span><span class="m">8</span>
<span class="nb">cd</span><span class="w"> </span>projects/daq2/zc706
make
</pre></div>
</div>
<p>This will synthesize each IP from the block design individually and will
store it in a common cache for future re-use. The cache is located in
the <strong>ipcache</strong> folder and is common for all the projects, this way
speeding up re-compile of the same project or compile time of common
blocks used in base designs. Example: a MicroBlaze base design for
VCU118 once compiled, it will be reused on other projects. Using the IP
cache will speed up the re-compiles of every project in OOC mode since
the cache is not cleared as with normal compile flow.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Starting with Vivado 2020.2, Out-of-Context is the
default mode. There is no need to set ADI_USE_OOC_SYNTHESIS variable.</p>
<p>Set:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ADI_USE_OOC_SYNTHESIS</span><span class="o">=</span>n
</pre></div>
</div>
<p>only in case you want to use Project Mode.</p>
</div>
</section>
<section id="checking-the-build-and-analyzing-results-of-library-components">
<h4>Checking the build and analyzing results of library components<a class="headerlink" href="#checking-the-build-and-analyzing-results-of-library-components" title="Permalink to this heading">#</a></h4>
<p>If you look closely, you see what it is actually doing. It enters a
library component folder then calls <strong>Vivado</strong> in batch mode. The IP
commands are in the source Tcl file and output is redirected to a log
file. In the below example that is <strong>axi_ad7768_ip.log</strong> inside the
<strong>library/axi_ad7768</strong> directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Entering<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;/home/RKutty/gitadi/hdl/library/axi_ad7768&#39;</span>
rm<span class="w"> </span>-rf<span class="w"> </span>*.cache<span class="w"> </span>*.data<span class="w"> </span>*.xpr<span class="w"> </span>*.log<span class="w"> </span>component.xml<span class="w"> </span>*.jou<span class="w"> </span>xgui<span class="w"> </span>*.ip_user_files<span class="w"> </span>*.srcs<span class="w"> </span>*.hw<span class="w"> </span>*.sim<span class="w"> </span>.Xil
vivado<span class="w"> </span>-mode<span class="w"> </span>batch<span class="w"> </span>-source<span class="w"> </span>axi_ad7768_ip.tcl<span class="w">  </span>&gt;&gt;<span class="w"> </span>axi_ad7768_ip.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">make</span></code> command returns an error (and stops), <strong>you must first check
the contents of the log file</strong>. You may also check the generated files for more information.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-ltr<span class="w"> </span>library/axi_ad7768
tail<span class="w"> </span>library/axi_ad7768/axi_ad7768_ip.log
</pre></div>
</div>
</section>
<section id="checking-the-build-and-analyzing-results-of-projects">
<h4>Checking the build and analyzing results of projects<a class="headerlink" href="#checking-the-build-and-analyzing-results-of-projects" title="Permalink to this heading">#</a></h4>
<p>The last thing that <code class="docutils literal notranslate"><span class="pre">make</span></code> does in this above example is building the project.
It is exactly the same <strong>rule</strong> as the library component. The log file, in
this example, is called <strong>daq2_zc706_vivado.log</strong> and is inside the
<strong>projects/daq2/zc706</strong> directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm<span class="w"> </span>-rf<span class="w"> </span>*.cache<span class="w"> </span>*.data<span class="w"> </span>*.xpr<span class="w"> </span>*.log<span class="w"> </span>*.jou<span class="w"> </span>xgui<span class="w"> </span>*.runs<span class="w"> </span>*.srcs<span class="w"> </span>*.sdk<span class="w"> </span>*.hw<span class="w"> </span>*.sim<span class="w"> </span>.Xil<span class="w"> </span>*.ip_user_files
vivado<span class="w"> </span>-mode<span class="w"> </span>batch<span class="w"> </span>-source<span class="w"> </span>system_project.tcl<span class="w"> </span>&gt;&gt;<span class="w"> </span>daq2_zc706_vivado.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
make:<span class="w"> </span>Leaving<span class="w"> </span>directory<span class="w"> </span><span class="s1">&#39;/home/RKutty/gitadi/hdl/projects/daq2/zc706&#39;</span>
</pre></div>
</div>
<p>Do a quick (or detailed) check on files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do NOT copy-paste <code class="docutils literal notranslate"><span class="pre">make</span></code> command line text</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-ltr<span class="w"> </span>projects/daq2/zc706
tail<span class="w"> </span>projects/daq2/zc706/daq2_zc706_vivado.log
</pre></div>
</div>
<p>And finally, if the project build is successful, the <strong>.xsa</strong> file should be
in the <strong>.sdk</strong> folder.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-ltr<span class="w"> </span>projects/daq2/zc706/daq2_zc706.sdk
</pre></div>
</div>
<p>You may now use this <strong>.xsa</strong> file as the input to your no-OS and/or Linux
build.</p>
<p>Starting with Vivado 2019.3, the output file extension was changed from
<strong>.hdf</strong> to <strong>.xsa</strong>.</p>
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="e385a4d4e6babe3b50029dfcd5e31372b6d358af" name="e385a4d4e6babe3b50029dfcd5e31372b6d358af" type="checkbox"></input><label for="e385a4d4e6babe3b50029dfcd5e31372b6d358af"><p>Building an AMD project in WSL - known issues</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<p>For some projects it is very possible to face the following error when you make a
build:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">$RDI_PROG&quot;</span> <span class="pre">&quot;$&#64;&quot;</span> <span class="pre">crash&quot;</span> <span class="pre">&quot;Killed</span> <span class="pre">&quot;$RDI_PROG&quot;</span> <span class="pre">&quot;$&#64;&quot;</span></code></p>
<p>This error may appear because your device does not have enough
RAM memory to build your FPGA design.</p>
</div>
<p>For example, the project AD-FMCDAQ3-EBZ with Virtex UltraScale+ VCU118
(XCVU9P device) requires 20GB (typical memory) and a peak of 32GB RAM
memory. The following link shows the typical and peak Vivado memory usage
per target device: <a class="reference external" href="https://www.xilinx.com/products/design-tools/vivado/vivado-ml.html#memory">MemoryUsage</a>.</p>
<p>This problem can be solved if a linux Swap file is created. You can
find more information about what a swap file is at this link:
<a class="reference external" href="https://linuxize.com/post/create-a-linux-swap-file/">SwapFile</a></p>
<p>To create a swap file you can use the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>:~$<span class="w"> </span>sudo<span class="w"> </span>fallocate<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;memory size (e.g 1G, 2G, 8G, etc.)&quot;</span><span class="w"> </span>/swapfile
:~$<span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/swapfile
:~$<span class="w"> </span>sudo<span class="w"> </span>mkswap<span class="w"> </span>/swapfile
:~$<span class="w"> </span>sudo<span class="w"> </span>swapon<span class="w"> </span>/swapfile
</pre></div>
</div>
<p>If you want to make the change permanent:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># in /etc/fstab file type the command:</span>
/swapfile<span class="w"> </span>swap<span class="w"> </span>swap<span class="w"> </span>defaults<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<p>If you want to deactivate the swap memory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>:~$<span class="w"> </span>sudo<span class="w"> </span>swapoff<span class="w"> </span>-v<span class="w"> </span>/swapfile
</pre></div>
</div>
</div>
</div>
</div><div><div class="collapsible docutils container">
<input class="collapsible_input" id="a6ed46db2efc1dcf0e6c3f10ef3dd428c6af35ca" name="a6ed46db2efc1dcf0e6c3f10ef3dd428c6af35ca" type="checkbox"></input><label for="a6ed46db2efc1dcf0e6c3f10ef3dd428c6af35ca"><p>Building manually in Vivado GUI</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We do not recommend using this flow, in general people are losing a lot
of valuable time and nerve during this process.</p>
</div>
<p>In Vivado (AMD projects), <strong>you must build all the required libraries</strong>
for your targeted project. Open the GUI and at the TCL console change
the directory to where the libraries are, then source the <strong>_ip.tcl</strong>
file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">c</span><span class="p">:</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">hdl</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">axi_ltc2387</span>
<span class="n">source</span> <span class="o">./</span><span class="n">axi_ltc2387_ip</span><span class="o">.</span><span class="n">tcl</span>
</pre></div>
</div>
<p>You will see commands being executed, and the GUI will change into a
project window. There is nothing to do here, you could browse the source
if you prefer to do synthesis as stand-alone and such things. After
you’re done, quit and change the directory to the next library and
continue the process.</p>
<p>After you built all the required libraries for your project, you can run
the project (generate bitstream and export the design to SDK). This is
the same procedure as above except for changes in path and Tcl file
names:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>c:/github/hdl/projects/cn0577/zed
<span class="nb">source</span><span class="w"> </span>./system_project.tcl
</pre></div>
</div>
<p>Same behavior as above, the GUI will change into a project window. The
script will create a board design in IPI (IP Integrator), generate all the
IP targets, synthesize the netlist and implementation.</p>
</div>
</div>
</div></section>
</section>
<section id="building-a-lattice-project">
<h3>Building a Lattice project<a class="headerlink" href="#building-a-lattice-project" title="Permalink to this heading">#</a></h3>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Instantiating IPs in Propel Builder CLI or GUI does not work in WSL for an
unknown compatibility reason. You can use Cygwin on Windows or a normal
Linux installation.</p>
</div>
</div></blockquote>
<p>The Lattice build is in a very early version, does not support any ADI library
builds yet. We are just starting to develop the library build part.
Currently we only have a single early version base design that builds almost
like the same then the others. For Lattice there are separate tools for creating
a block design <strong>(Propel Builder)</strong> and building a hdl design <strong>(Radiant)</strong>.
Like in the other cases the build for any supported project works by <code class="docutils literal notranslate"><span class="pre">make</span></code>.
First you have to open the <strong>Propel Builder GUI</strong> and <strong>download</strong> the necessary
Lattice provided IPs manually. You can check the <strong>necessary Lattice IPs</strong> and
and their versions in the
<strong>&lt;project_name&gt;_system_pb.tcl</strong> script or follow the error messages in the
<strong>&lt;project_name&gt;_propel_builder.log</strong> after running <code class="docutils literal notranslate"><span class="pre">make</span></code> and you get
a FAILED message.
Then simply go to carrier folder and run make. For now you can try to build the
only base design we have for <strong>CertusPro-NX Evaluation Board</strong> by entering the
base design directory and running <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p>
<section id="required-lattice-provided-ips-to-download-for-projects-common-lfcpnx">
<h4>Required Lattice Provided IPs to download for projects/common/lfcpnx<a class="headerlink" href="#required-lattice-provided-ips-to-download-for-projects-common-lfcpnx" title="Permalink to this heading">#</a></h4>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IP name</p></th>
<th class="head"><p>Display name</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>riscv_rtos</p></td>
<td><p>RISC-V RX</p></td>
<td><p>2.3.0</p></td>
</tr>
<tr class="row-odd"><td><p>gpio</p></td>
<td><p>GPIO</p></td>
<td><p>1.6.2</p></td>
</tr>
<tr class="row-even"><td><p>spi_controller</p></td>
<td><p>SPI Controller</p></td>
<td><p>2.1.0</p></td>
</tr>
<tr class="row-odd"><td><p>i2c_controller</p></td>
<td><p>I2C Controller</p></td>
<td><p>2.0.1</p></td>
</tr>
<tr class="row-even"><td><p>axi_interconnect</p></td>
<td><p>AXI4 Interconnect</p></td>
<td><p>1.2.2</p></td>
</tr>
<tr class="row-odd"><td><p>axi2ahb_bridge</p></td>
<td><p>AXI4 to AHB-Lite Bridge</p></td>
<td><p>1.1.1</p></td>
</tr>
<tr class="row-even"><td><p>axi2apb_bridge</p></td>
<td><p>AXI4 to APB Bridge</p></td>
<td><p>1.1.1</p></td>
</tr>
<tr class="row-odd"><td><p>gp_timer</p></td>
<td><p>Timer-Counter</p></td>
<td><p>1.3.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>projects/common/lfcpnx
make
</pre></div>
</div>
<p>This assumes that you have the tools and licenses setup correctly. If
you don’t get to the last line, the make failed to build the project.
There is nothing you can gather from the <code class="docutils literal notranslate"><span class="pre">make</span></code> output (other than the
build failed or not), the actual failure is in a log file. So, let’s see
how to analyze the build log files and results.</p>
</section>
<section id="id1">
<h4>Checking the build and analyzing results<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h4>
<p>The make script for Lattice projects is the <strong>projects/scripts/project-lattice.mk</strong>
that is included in <strong>Makefile</strong> after setting the project dependencies.
If you check this make script you can note that we have two rules we run by the
<strong>all:</strong> rule, one that runs the <strong>Propel Builder</strong> targets (for block design)
and one that runs the  <strong>Radiant</strong> targets (for hdl build). For this reason we
have two log files also, the first one <strong>$(PROJECT_NAME)_propel_builder.log</strong>,
the second one is the <strong>$(PROJECT_NAME)_radiant.log</strong>.</p>
<p>If you are seeking support from us, do a quick (or detailed) check on files.
This contains the most relevant information that you need to provide.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do NOT copy-paste <code class="docutils literal notranslate"><span class="pre">make</span></code> command line text</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-ltr<span class="w"> </span>&lt;ADI_carrier_proj_dir&gt;
ls<span class="w"> </span>-ltr<span class="w"> </span>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;
ls<span class="w"> </span>-ltr<span class="w"> </span>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;/&lt;project_name&gt;
tail<span class="w"> </span>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;_propel_builder.log
tail<span class="w"> </span>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;_radiant.log
</pre></div>
</div>
<p>Note that if the <strong>Propel Builder</strong> project fails to build the
<strong>$(PROJECT_NAME)_radiant.log</strong> may not exist.</p>
<p>If the <strong>Propel Builder</strong> project was built successfully, the <strong>sge</strong>
folder should appear in the <strong>&lt;ADI_carrier_proj_dir&gt;/</strong> or in the
<strong>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;</strong>.
The <strong>sge</strong> folder contains the <strong>bsp</strong> folder (Base Support
Package) and the SoC configuration files. The <strong>bsp</strong> folder contains the
available Lattice provided drivers for the IPs used in the design (Sometimes
these drivers are more like some basic examples to modify for your specific
application) and the <strong>sys_platform.h</strong> file.
You should find a <strong>sys_env.xml</strong> file in the same <strong>sge</strong> folder. This file is
used to create a <strong>no-OS</strong> project with the current <strong>bsp</strong>.</p>
<p>When running the Propel Builder targets we call <code class="docutils literal notranslate"><span class="pre">propelbld</span> <span class="pre">system_project_pb.tcl</span></code>
on Windows or <code class="docutils literal notranslate"><span class="pre">propelbldwrap</span> <span class="pre">system_project_pb.tcl</span></code> on Linux.
After running the Propel Builder targets we call <code class="docutils literal notranslate"><span class="pre">pnmainc</span> <span class="pre">system_project.tcl</span></code>
on Windows or <code class="docutils literal notranslate"><span class="pre">radiantc</span> <span class="pre">system_project.tcl</span></code>
on Linux.
The <strong>system_project_pb.tcl</strong> runs first. This file is used to create the
<strong>block design project</strong> (Propel Builder) and source the <strong>system_pb.tcl</strong>
which is used for linking one or more corelated block design ‘.tcl’ scripts.
The <strong>system_pb.tcl</strong> is sourced in <strong>adi_project_pb</strong> procedure.
The <strong>system_project.tcl</strong> runs second. This file is used to create and build
the <strong>HDL project</strong> (Radiant). Here we use the output of the Propel Builder
project as the <strong>configured IPs</strong> that can be found in the
<strong>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;/&lt;project_name&gt;/lib</strong> folder and the
default block design wrapper that is the
<strong>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;/&lt;project_name&gt;/&lt;project_name&gt;.v</strong>,
we add them to the <strong>Radiant project</strong> then add our <strong>system_top.v</strong> wrapper,
the <strong>constraint files</strong> and build the project. The output is a <strong>.bit</strong> file
that in default will appear in the
<strong>&lt;ADI_carrier_proj_dir&gt;/&lt;project_name&gt;/impl_1</strong> folder if the project was
successfully able to build.</p>
</section>
</section>
<section id="supported-targets-of-make-command">
<h3>Supported targets of <code class="docutils literal notranslate"><span class="pre">make</span></code> command<a class="headerlink" href="#supported-targets-of-make-command" title="Permalink to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://www.gnu.org/software/make/manual/make.html">Make</a> is a build
automation tool, which uses <strong>Makefile(s)</strong> to define a set of
directives (‘rules’) about how to compile and/or link a program
(‘targets’).</p>
</div>
<p>In general, always run <code class="docutils literal notranslate"><span class="pre">make</span></code> within a project folder such as
<strong>hdl/projects/daq2/a10soc</strong> or <strong>hdl/projects/daq2/zc706</strong>. There should
not be a need for you to run <code class="docutils literal notranslate"><span class="pre">make</span></code> inside the library or root folders.
The <code class="docutils literal notranslate"><span class="pre">make</span></code> framework passes the top level ‘targets’ to any sub-makes
inside its sub-folders. What this means is that if you run <code class="docutils literal notranslate"><span class="pre">make</span></code> inside
<strong>hdl/projects/daq2</strong>, it builds all the carriers (<strong>kc705</strong>, <strong>a10soc</strong>,
<strong>kcu105</strong>, <strong>zc706</strong> to <strong>zcu102</strong>) instead of just the target carrier.</p>
<p>The following targets/arguments are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code>:
This builds everything in the current folder and its sub-folders, for example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">library/axi_ad9122</span> <span class="pre">all;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">AD9122</span> <span class="pre">library</span> <span class="pre">component</span> <span class="pre">(AMD</span> <span class="pre">only).</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">library</span> <span class="pre">all;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">ALL</span> <span class="pre">library</span> <span class="pre">components</span> <span class="pre">inside</span> <span class="pre">'library'</span> <span class="pre">(AMD</span> <span class="pre">only).</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">projects/daq2/zc706</span> <span class="pre">all;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">DAQ2_ZC706</span> <span class="pre">(AMD)</span> <span class="pre">project.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">projects/daq2/a10soc</span> <span class="pre">all;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">DAQ2_A10SOC</span> <span class="pre">(Intel)</span> <span class="pre">project.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">projects/daq2</span> <span class="pre">all;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">DAQ2</span> <span class="pre">ALL</span> <span class="pre">carrier</span> <span class="pre">(Intel</span> <span class="pre">&amp;</span> <span class="pre">AMD)</span> <span class="pre">projects.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">projects</span> <span class="pre">all;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">ALL</span> <span class="pre">projects</span> <span class="pre">(not</span> <span class="pre">recommended).</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">clean</span></code>:
Removes all tool and temporary files in the current folder and its
sub-folders, same context as above.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clean-all</span></code>:
This removes all tool and temporary files in the current folder, its
sub-folders and from all the IPs that are specified in the Makefile file;
same context as above.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lib</span></code>: This is same as <code class="docutils literal notranslate"><span class="pre">all</span></code> in the library folder, ignored inside project
folders.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">projects.platform</span></code>: This is a special target available only in the ‘hdl’ root
folder and is ignored everywhere else, see syntax:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">daq2.a10soc</span> <span class="pre">;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">projects/daq2/a10soc.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">daq2.zc706</span> <span class="pre">;</span> <span class="pre">#</span> <span class="pre">build</span> <span class="pre">projects/daq2/zc706.</span></code></p></li>
</ul>
</li>
</ul>
<p>To speed up the building process, especially libraries, you can use the <code class="docutils literal notranslate"><span class="pre">-j</span></code>
option to run the targets in parallel, e.g. <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-j4</span></code>.</p>
<p>All artifacts generated by the build process should be “git”-ignored,
e.g. <code class="docutils literal notranslate"><span class="pre">component.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">.lock</span></code> files.</p>
</section>
</section>
<section id="tools-and-their-versions">
<h2>Tools and their versions<a class="headerlink" href="#tools-and-their-versions" title="Permalink to this heading">#</a></h2>
<section id="tools">
<h3>Tools<a class="headerlink" href="#tools" title="Permalink to this heading">#</a></h3>
<p>ADI provides reference designs for both Intel and AMD. Please note
that we have no preference over Intel or AMD; if possible, we try to
port the designs on both platforms. However, there are a few things you
should be aware of when building the projects.</p>
<p>This is NOT a comparison (generic or otherwise)- this is what you should
expect and understand when using ADI HDL repository on these tools.
<strong>A red text indicates that you must pay extra attention.</strong></p>
<div class="table-wrapper colwidths-auto docutils container" id="id2">
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">Tools</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Notes</p></th>
<th class="head"><p>Intel</p></th>
<th class="head"><p>AMD</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Main tools</p></td>
<td><p>Quartus</p></td>
<td><p>Vivado</p></td>
</tr>
<tr class="row-odd"><td><p>EDK tools</p></td>
<td><p>QSys</p></td>
<td><p>IP Integrator</p></td>
</tr>
<tr class="row-even"><td><p>SDK tools</p></td>
<td><p>Eclipse-Nios, Eclipse-DS5</p></td>
<td><p>Eclipse</p></td>
</tr>
<tr class="row-odd"><td><p>Building library</p></td>
<td><p><span class="green">Do nothing. Quartus only needs the _hw.tcl and QSys parses them
whenever invoked</span></p></td>
<td><p><span class="red">Need to build each and every library component. Vivado has its
own way of identifying library components. This means you must build
ALL the library components first before starting the project. You must
re-run these scripts if there are any modifications</span></p></td>
</tr>
<tr class="row-even"><td><p>Building the project</p></td>
<td><p>Source the system_project.tcl file</p></td>
<td><p>Source the system_project.tcl file</p></td>
</tr>
<tr class="row-odd"><td><p>Timing analysis</p></td>
<td><p>The projects are usually tested and should be free of timing errors.
There is no straightforward method to verify a timing pass (it usually
involves writing a TCL proc by itself) on both the tools. The make
build will fail and return with an error if the timing is not met.</p></td>
<td><p>The projects are usually tested and should be free of timing errors.
There is no straightforward method to verify a timing pass (it usually
involves writing a TCL proc by itself) on both the tools. The make
build will fail and return with an error if the timing is not met.</p></td>
</tr>
<tr class="row-even"><td><p>SDK (Microblaze/Nios)</p></td>
<td><p>Use SOPCINFO and SOF files</p></td>
<td><p>Use XSA file</p></td>
</tr>
<tr class="row-odd"><td><p>SDK (ARM/FPGA combo)</p></td>
<td><p><span class="red">Not so well-thought procedure. Need to run different tools,
manually edit build files etc. The steps involved are running
bsp-editor, running make, modifying linker scripts, makefiles and
sources, importing to SDK</span></p></td>
<td><p><span class="green">Same procedure as Microblaze</span></p></td>
</tr>
<tr class="row-even"><td><p>Upgrading/Version changes (non-ADI cores)</p></td>
<td><p><span class="green">Quartus automatically updates the cores. Almost hassle-free for
most of the cores</span></p></td>
<td><p><span class="red">Vivado does not automatically update the revisions in TCL flow
(it does on GUI). It will stop at the first version mismatch (a rather
slow and frustrating process)</span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="table-wrapper colwidths-auto docutils container" id="id3">
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Tools</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Notes</p></th>
<th class="head"><p>Lattice</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Main tools</p></td>
<td><p>Radiant</p></td>
</tr>
<tr class="row-odd"><td><p>EDK tools</p></td>
<td><p>Propel Builder</p></td>
</tr>
<tr class="row-even"><td><p>SDK tools</p></td>
<td><p>Propel (Eclipse)</p></td>
</tr>
<tr class="row-odd"><td><p>Building library</p></td>
<td><p><span class="red">Not supported yet.</span></p></td>
</tr>
<tr class="row-even"><td><p>Building the project</p></td>
<td><p>Source the system_project_pb.tcl file in Propel Builder tclsh, source the
system_project.tcl file in Radiant tclsh after.</p></td>
</tr>
<tr class="row-odd"><td><p>Timing analysis</p></td>
<td><p>The projects are usually tested and should be free of timing errors.
There is no straightforward method to verify a timing pass (it usually
involves writing a TCL proc by itself) on both the tools. The make
build will fail and return with an error if the timing is not met.</p></td>
</tr>
<tr class="row-even"><td><p>SDK (Lattice riscv-rx)</p></td>
<td><p>Use the generated sge folder that contains the bsp and the SoC
configuration files. You can create a Propel SDK project using the
sys_env.xml file. (currently only no-OS and rtos, but not linked yet to
ADI no-OS infrastructure)</p></td>
</tr>
<tr class="row-odd"><td><p>SDK (ARM/FPGA combo)</p></td>
<td><p><span class="red">Not supported or nonexistent yet.</span></p></td>
</tr>
<tr class="row-even"><td><p>Upgrading/Version changes (non-ADI cores)</p></td>
<td><p>You have to update the IP versions manually in GUI and copy the config
from the tcl console to the ‘.tcl’ block design file, or update directly
in the ‘.tcl’ block design file. Note that first you have to download the
new version of IPs using the GUI. An ip_upgrade tcl command exists, but
still the IPs has to be downloaded manually, and it only works if the old
IP’s name is the same as the new (sometimes it changes by version).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="tool-versions">
<h3>Tool versions<a class="headerlink" href="#tool-versions" title="Permalink to this heading">#</a></h3>
<p>Though the ADI libraries work across different versions of the tools,
the projects we provide <strong>may not</strong>. The AMD, Intel and Lattice IPs may or may
not work across versions. We can only assure you that they are tested and
<strong>work only for the versions we specify</strong>.</p>
<p>The projects are usually upgraded to the latest tools after they are
publicly released. The used tool versions can be found in the
<a class="reference external" href="https://github.com/analogdevicesinc/hdl/releases">release notes</a>
for each branch. The script, which builds the project always double
checks the used tools version, and notifies the user if he or she is trying
to use an unsupported version of tools.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are several ways to find out which tool version you should use.
The easiest way is to check the <a class="reference external" href="https://github.com/analogdevicesinc/hdl/releases">release
notes</a>. You may
also check out or browse the desired branch, and verify the tool version
in the base Tcl script ./hdl/scripts/adi_env.tcl
(<a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/blob/main/scripts/adi_env.tcl#L18">for Vivado version</a>)
or
(<a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/blob/main/scripts/adi_env.tcl#L34">or for Quartus version</a>),
which build the projects.</p>
</div>
</section>
</section>
<section id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Permalink to this heading">#</a></h2>
<p>As said above, our recommended build flow is to use <code class="docutils literal notranslate"><span class="pre">make</span></code> and the
command line version of the tools. This method facilitates our
overall build and release process as it automatically builds the
required libraries and dependencies.</p>
<section id="linux-environment-setup">
<h3>Linux environment setup<a class="headerlink" href="#linux-environment-setup" title="Permalink to this heading">#</a></h3>
<p>All major distributions should have <code class="docutils literal notranslate"><span class="pre">make</span></code> installed by default. If not,
if you try the command, it should tell you how to install it with the
package name.</p>
<p>You may have to install <code class="docutils literal notranslate"><span class="pre">git</span></code> (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">git</span></code>)
and the Intel and AMD tools. These tools come with certain
<strong>settings*.sh</strong> scripts that you may source in your <strong>.bashrc</strong> file to
set up the environment. You may also do this manually (for better or
worse); the following snippet is from a <strong>.bashrc</strong> file. Please note
that unless you are an expert at manipulating these things, it is best to leave it to
the tools to set up the environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/Xilinx/Vivado/202x.x/bin:/opt/Xilinx/Vitis/202x.x/bin
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/intelFPGA_pro/2x.x/quartus/bin
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/lscc/propel/202x.x/builder/rtf/bin/lin64
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/lscc/radiant/202x.x/bin/lin64
</pre></div>
</div>
</section>
<section id="windows-environment-setup">
<h3>Windows environment setup<a class="headerlink" href="#windows-environment-setup" title="Permalink to this heading">#</a></h3>
<p>The best option on Windows is to use
<a class="reference external" href="https://www.cygwin.com">Cygwin</a>. When installing it, select the
<code class="docutils literal notranslate"><span class="pre">make</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span></code> packages. You should do changes to your <strong>.bashrc</strong>
in a similar manner to the Linux environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/d/Xilinx/Vivado/202x.x/bin:/cygdrive/d/Xilinx/Vitis/202x.x/bin
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/d/intelFPGA_pro/2x.x/quartus/bin64
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/d/lscc/propel/202x.x/builder/rtf/bin/nt64
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/cygdrive/d/lscc/radiant/202x.x/bin/nt64
</pre></div>
</div>
<p>A very good alternative to Cygwin is
<a class="reference external" href="https://learn.microsoft.com/en-us/windows/wsl/install/">WSL</a>. The changes
to your <strong>.bashrc</strong> should look like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/Vivado/202x.x/bin:/opt/Vitis/202x.x/bin
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/quartus/bin
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/lscc/propel/202x.x/builder/rtf/bin/lin64
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/lscc/radiant/202x.x/bin/lin64
</pre></div>
</div>
<p>If you do not want to install Cygwin, there might still be some
alternative. There are <code class="docutils literal notranslate"><span class="pre">make</span></code> alternatives for <strong>Windows Command
Prompt</strong>, minimalist GNU for Windows (<strong>MinGW</strong>), or the <strong>Cygwin
variations</strong> installed by the tools itself.</p>
<p>Some of these may not be fully functional with our scripts and/or projects.
If you are an Intel user, the <strong>Nios II Command Shell</strong> does support make.
If you are an AMD user, use the <strong>gnuwin</strong> installed as part of the SDK,
usually at <code class="docutils literal notranslate"><span class="pre">C:\Xilinx\Vitis\202x.x\gnuwin\bin</span></code>.</p>
</section>
</section>
<section id="preparing-the-sd-card">
<h2>Preparing the SD card<a class="headerlink" href="#preparing-the-sd-card" title="Permalink to this heading">#</a></h2>
<p>Firstly, you have to check this
<a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-software/zynq_images/windows_hosts">tutorial</a>
on how to put the Linux image on your SD card. Once you are done with
that, you can go on with the following steps.</p>
<p>On the BOOT partition recently created, you will find folders for each
carrier that we support, and each of these folders contain an archive
called <strong>bootgen_sysfiles.tgz</strong>. These have all the files needed to
generate the <strong>BOOT.BIN</strong>.</p>
<p>Copy the corresponding archive (checking for the name of your carrier
and components) into the root folder of your project, unzip it twice,
and there you will find the files that are needed to generate the
<strong>BOOT.BIN</strong>. Copy them to be in the root directory.</p>
<ol class="arabic simple">
<li><p>fsbl.elf</p></li>
<li><p>zynq.bif</p></li>
<li><p>u-boot.elf</p></li>
<li><p>and if you’re using ZCU102, then bl31.elf and pmu.elf</p></li>
</ol>
<p>Next, what your project needs, is the <strong>uImage</strong> (for Zynq based
carriers) or <strong>Image</strong> (for Zynq UltraScale - ZCU102 and ADRV9009-ZU11EG
carriers) or <strong>zImage</strong> (for Intel based carriers) file that you will find
in the <strong>zynq-common</strong> or <strong>zynqmp-common</strong>, <strong>socfpga_arria10_common</strong> or
<strong>socfpga_cyclone5_common</strong> on your <strong>boot</strong> partition. Copy this file also in
the root directory of your project.</p>
<p>More info on how to generate this file you will find in the
<a class="reference internal" href="#references">References</a> section or in the <strong>ReadMe.txt</strong> file from <strong>boot</strong> partition.</p>
<div><div class="collapsible docutils container">
<input class="collapsible_input" id="5a8213f11bd3f7b810e540035db37b478df31340" name="5a8213f11bd3f7b810e540035db37b478df31340" type="checkbox"></input><label for="5a8213f11bd3f7b810e540035db37b478df31340"><p>How to build the boot image BOOT.BIN in WSL</p>
<div class="icon"></div></label><div class="collapsible_content docutils container">
<p>After obtaining <strong>.xsa</strong> file, you must be sure that you have done source for
Vivado and Vitis. To create <strong>boot.bin</strong> is recommended to run
<code class="docutils literal notranslate"><span class="pre">build_boot_bin.sh</span></code> in terminal.To do this, the file can be called in the
following manner:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod<span class="w"> </span>+x<span class="w"> </span>build_boot_bin.sh
usage:<span class="w"> </span>build_boot_bin.sh<span class="w"> </span>system_top.xsa<span class="w"> </span>u-boot.elf<span class="w"> </span><span class="o">[</span>output-archive<span class="o">]</span>
</pre></div>
</div>
<p>You can download the script by accessing the following link:
<a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-software/build-the-zynq-boot-image">build_boot_bin.sh</a>.</p>
</div>
</div>
</div></section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-software/build-the-zynq-boot-image">How to build the Zynq boot image
BOOT.BIN</a></p></li>
<li><p><a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-software/build-the-zynqmp-boot-image">How to build the ZynqMP boot image
BOOT.BIN</a></p></li>
<li><p><a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-drivers-all">Building the ADI Linux
kernel</a></p></li>
</ul>
</section>
<section id="errors-warnings-and-notes">
<h2>Errors, Warnings and Notes<a class="headerlink" href="#errors-warnings-and-notes" title="Permalink to this heading">#</a></h2>
<p>Assuming the right to make an honest comment, the tools (both Quartus
and Vivado) are not that useful or friendly when it comes to messages.
In most cases, you may see <strong>hacked-in</strong> debugging <code class="docutils literal notranslate"><span class="pre">printf</span></code> sort of
messages (AMD notoriously ranks high in this regard). So you are
going to see a lot of <strong>warnings</strong> and some <strong>critical-warnings</strong> (critical
to what could be hard to answer). Here are some of the commonly asked
EngineerZone questions and their explanations.</p>
<section id="amd-vivado">
<h3>AMD: Vivado<a class="headerlink" href="#amd-vivado" title="Permalink to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span><span class="p">:</span> <span class="p">[</span><span class="n">BD</span> <span class="mi">5</span><span class="o">-</span><span class="mi">216</span><span class="p">]</span> <span class="n">VLNV</span> <span class="o">&lt;</span><span class="n">analog</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">user</span><span class="p">:</span><span class="n">axi_clkgen</span><span class="p">:</span><span class="mf">1.0</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="k">for</span> <span class="n">the</span> <span class="n">current</span> <span class="n">part</span><span class="o">.</span>

<span class="n">ERROR</span><span class="p">:</span> <span class="p">[</span><span class="n">Common</span> <span class="mi">17</span><span class="o">-</span><span class="mi">39</span><span class="p">]</span> <span class="s1">&#39;create_bd_cell&#39;</span> <span class="n">failed</span> <span class="n">due</span> <span class="n">to</span> <span class="n">earlier</span> <span class="n">errors</span> <span class="k">while</span> <span class="n">executing</span>
<span class="s2">&quot;create_bd_cell -type ip -vlnv analog.com:user:axi_clkgen:1.0 axi_hdmi_clkgen&quot;</span> <span class="n">invoked</span> <span class="kn">from</span> <span class="nn">within</span>
<span class="s2">&quot;set axi_hdmi_clkgen [create_bd_cell -type ip -vlnv analog.com:user:axi_clkgen:1.0 axi_hdmi_clkgen]&quot;</span> <span class="p">(</span><span class="n">file</span> <span class="s2">&quot;../../../projects/common/zc706/zc706_system_bd.tcl&quot;</span> <span class="n">line</span> <span class="mi">57</span><span class="p">)</span>
</pre></div>
</div>
<p>You haven’t generated the library component or have the wrong user IP
repository setting. If you were using the GUI flow, now is a good time
to evaluate the <code class="docutils literal notranslate"><span class="pre">make</span></code> flow.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CRITICAL</span> <span class="n">WARNING</span><span class="p">:</span> <span class="p">[</span><span class="n">IP_Flow</span> <span class="mi">19</span><span class="o">-</span><span class="mi">459</span><span class="p">]</span> <span class="n">IP</span> <span class="n">file</span> <span class="s1">&#39;C:/Git/hdl/library/common/ad_pnmon.v&#39;</span> <span class="n">appears</span> <span class="n">to</span> <span class="n">be</span> <span class="n">outside</span> <span class="n">of</span> <span class="n">the</span>
<span class="n">project</span> <span class="n">area</span> <span class="s1">&#39;C:/Git/hdl/library/axi_ad9467&#39;</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span>
<span class="n">ipx</span><span class="p">::</span><span class="n">package_project</span> <span class="o">-</span><span class="n">import_files</span> <span class="n">option</span> <span class="n">to</span> <span class="n">copy</span> <span class="n">remote</span> <span class="n">files</span> <span class="n">into</span> <span class="n">the</span> <span class="n">IP</span> <span class="n">directory</span><span class="o">.</span>
</pre></div>
</div>
<p>These warnings appear because the libraries are using common modules
which are located under the <strong>./library/common/</strong>. These warnings can be
ignored, they won’t affect the functionality of the IP or the project.
However, you may not be able to archive these projects. The irony is
that it does copy these files to the project area, but ignores them.</p>
</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

          </div>
              <div class="related">
                &nbsp;
    <a href="releases.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Releases</a>
    <a href="architecture.html" title="Next document (Alt+Shift+RightArrow)" class="next">HDL Architecture</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>